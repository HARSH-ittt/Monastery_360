<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sacred Sikkim | Himalayan Monastery Heritage</title>

    <!-- External Libraries -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary-gold: #d4af37;
        --primary-gold-dark: #b8941f;
        --secondary-blue: #1e3a8a;
        --accent-orange: #f59e0b;
        --text-dark: #1f2937;
        --text-light: #6b7280;
        --bg-light: #b6b2a5;
        --white: #ffffff;
        --shadow-light: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        --shadow-heavy: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        --gradient-primary: linear-gradient(135deg, #d4af37 0%, #f59e0b 100%);
        --gradient-secondary: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
      }

      body {
        font-family: "Inter", sans-serif;
        line-height: 1.6;
        color: var(--text-dark);
        overflow-x: hidden;
        background-color: var(--bg-light);
      }

      .playfair {
        font-family: "Playfair Display", serif;
      }

      /* Enhanced Scrollbar */
      ::-webkit-scrollbar {
        width: 12px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 6px;
      }
      ::-webkit-scrollbar-thumb {
        background: var(--gradient-primary);
        border-radius: 6px;
        border: 2px solid #f1f1f1;
      }

      /* Navigation */
      .navbar {
        position: fixed;
        top: 0;
        width: 100%;
        background: rgba(241, 241, 239, 0.95);
        backdrop-filter: blur(20px);
        z-index: 1000;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.05);
      }

      .navbar.scrolled {
        background: rgba(255, 255, 255, 0.98);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
        border-bottom: 1px solid rgba(210, 105, 30, 0.2);
      }

      .navbar::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(90deg, #d2691e, #cd853f, #daa520, #b8860b);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .navbar.scrolled::before {
        opacity: 1;
      }

      .nav-container {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 2rem;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        font-size: 1.6rem;
        font-weight: 700;
        color: var(--primary-gold);
        text-decoration: none;
        position: relative;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        padding: 0.5rem;
        border-radius: 12px;
      }

      .logo:hover {
        transform: translateY(-2px) scale(1.05);
        background: rgba(210, 105, 30, 0.1);
      }

      .logo i {
        font-size: 2rem;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        transition: all 0.3s ease;
        animation: logoFloat 3s ease-in-out infinite;
      }

      .logo:hover i {
        transform: rotate(10deg) scale(1.1);
        filter: drop-shadow(0 4px 8px rgba(210, 105, 30, 0.3));
      }

      @keyframes logoFloat {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-3px) rotate(2deg);
        }
      }

      .nav-menu {
        display: flex;
        list-style: none;
        gap: 2rem;
        align-items: center;
      }

      .nav-actions {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        margin-left: 1rem;
      }

      .nav-actions button {
        position: relative;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: 50%;
        width: 45px;
        height: 45px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.8);
        border: 1px solid rgba(0, 0, 0, 0.1);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      }

      .nav-actions button:hover {
        transform: translateY(-3px) scale(1.1);
        background: rgba(210, 105, 30, 0.1);
        box-shadow: 0 8px 25px rgba(210, 105, 30, 0.2);
        border-color: rgba(210, 105, 30, 0.3);
      }

      .nav-actions button i {
        color: var(--primary-gold);
        transition: all 0.3s ease;
      }

      .nav-actions button:hover i {
        transform: scale(1.2);
        filter: drop-shadow(0 2px 4px rgba(210, 105, 30, 0.3));
      }

      .nav-item a {
        text-decoration: none;
        color: var(--text-dark);
        font-weight: 600;
        padding: 0.55rem 1rem;
        border-radius: 12px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        background: rgba(255, 255, 255, 0.8);
        border: 1px solid rgba(0, 0, 0, 0.1);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        overflow: hidden;
      }

      .nav-item a::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(210, 105, 30, 0.1),
          transparent
        );
        transition: left 0.5s ease;
      }

      .nav-item a:hover::before {
        left: 100%;
      }

      .nav-item a:hover {
        color: var(--primary-gold);
        background: rgba(210, 105, 30, 0.1);
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 8px 25px rgba(210, 105, 30, 0.2);
        border-color: rgba(210, 105, 30, 0.3);
      }

      .nav-item a.active {
        color: var(--primary-gold);
        background: linear-gradient(
          135deg,
          rgba(210, 105, 30, 0.15),
          rgba(205, 133, 63, 0.1)
        );
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(210, 105, 30, 0.25);
        border-color: rgba(210, 105, 30, 0.4);
      }

      .nav-item a.active::after {
        content: "";
        position: absolute;
        bottom: -2px;
        left: 50%;
        transform: translateX(-50%);
        width: 30px;
        height: 2px;
        background: var(--gradient-primary);
        border-radius: 2px;
      }

      .mobile-toggle {
        display: none;
        flex-direction: column;
        cursor: pointer;
        padding: 0.5rem;
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      .mobile-toggle:hover {
        background: rgba(210, 105, 30, 0.1);
        transform: scale(1.1);
      }

      .mobile-toggle span {
        width: 25px;
        height: 3px;
        background: var(--primary-gold);
        margin: 3px 0;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: 2px;
      }

      .mobile-toggle.active span:nth-child(1) {
        transform: rotate(45deg) translate(6px, 6px);
      }

      .mobile-toggle.active span:nth-child(2) {
        opacity: 0;
      }

      .mobile-toggle.active span:nth-child(3) {
        transform: rotate(-45deg) translate(6px, -6px);
      }

      /* Floating particles animation for navbar */
      .navbar::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: radial-gradient(
            2px 2px at 20px 30px,
            rgba(210, 105, 30, 0.1),
            transparent
          ),
          radial-gradient(
            2px 2px at 40px 70px,
            rgba(205, 133, 63, 0.1),
            transparent
          ),
          radial-gradient(
            1px 1px at 90px 40px,
            rgba(218, 165, 32, 0.1),
            transparent
          ),
          radial-gradient(
            1px 1px at 130px 80px,
            rgba(184, 134, 11, 0.1),
            transparent
          );
        background-repeat: repeat;
        background-size: 200px 100px;
        animation: floatingParticles 20s linear infinite;
        pointer-events: none;
        opacity: 0.3;
      }

      @keyframes floatingParticles {
        0% {
          transform: translateY(0px);
        }
        100% {
          transform: translateY(-100px);
        }
      }

      /* Mega dropdown */
      .mega-parent {
        position: relative;
      }
      .mega-toggle {
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }
      .mega-toggle i {
        font-size: 0.8rem;
      }
      .mega-menu {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        top: 110%;
        width: min(1100px, 92vw);
        background: #fff;
        border: 1px solid rgba(212, 175, 55, 0.18);
        border-radius: 16px;
        box-shadow: var(--shadow-heavy);
        padding: 1.5rem;
        display: none;
        gap: 1.5rem;
        z-index: 1001;
      }
      .mega-menu.open {
        display: grid;
      }
      @media (min-width: 769px) {
        .mega-parent:hover .mega-menu {
          display: grid;
        }
      }
      .mega-menu {
        grid-template-columns: 1fr 1fr;
      }
      .mega-col h4 {
        color: var(--secondary-blue);
        margin-bottom: 0.8rem;
        font-size: 1rem;
      }
      .mega-links {
        display: grid;
        gap: 0.4rem;
      }
      .mega-links a {
        color: var(--text-dark);
        text-decoration: none;
        padding: 0.4rem 0.6rem;
        border-radius: 8px;
      }
      .mega-links a:hover {
        background: transparent;
        color: var(--text-dark);
      }
      .mega-card {
        background: var(--bg-light);
        border: 1px solid rgba(212, 175, 55, 0.12);
        border-radius: 12px;
        padding: 1rem;
      }
      .mega-card i {
        color: var(--primary-gold);
      }

      /* AI Assistant, Festival Calendar and Search buttons */
      .ai-assistant-toggle,
      .festival-calendar-toggle,
      .search-toggle {
        background: transparent;
        border: 0;
        color: var(--text-dark);
        cursor: pointer;
        padding: 0.4rem;
        border-radius: 8px;
        transition: all 0.3s ease;
      }
      .ai-assistant-toggle:hover,
      .festival-calendar-toggle:hover,
      .search-toggle:hover {
        background: rgba(212, 175, 55, 0.12);
        color: var(--primary-gold-dark);
      }

      /* AI Chat Box */
      .ai-chat-overlay {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 400px;
        height: 600px;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.2);
        z-index: 9999;
        opacity: 0;
        visibility: hidden;
        transform: translateY(20px) scale(0.9);
        transition: all 0.3s ease;
        max-width: calc(100vw - 40px);
        max-height: calc(100vh - 40px);
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      /* Floating chat launcher with Buddha avatar */
      .ai-chat-launcher {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 80px;
        height: 80px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: radial-gradient(
            rgba(255, 255, 255, 0.9),
            rgba(255, 255, 255, 0.8)
          ),
          url("../doodleart1.jpg") center/cover no-repeat;
        border: 2px solid var(--primary-gold);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3),
          0 0 15px var(--primary-gold-dark);
        cursor: pointer;
        z-index: 10000;
        transition: transform 200ms ease, box-shadow 200ms ease;
      }
      .ai-chat-launcher:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.25),
          0 0 20px var(--primary-gold);
      }
      .ai-chat-launcher .avatar {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 40px;
        line-height: 1;
        background: rgba(255, 255, 255, 0.9);
        border: 2px solid var(--primary-gold);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        animation: avatarFloat 3s ease-in-out infinite;
        transition: opacity 0.3s ease, transform 0.3s ease;
      }
      .ai-chat-launcher.hidden .avatar {
        opacity: 0;
        transform: scale(0);
      }
      @keyframes avatarFloat {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-4px);
        }
      }

      .ai-chat-overlay.open {
        opacity: 1;
        visibility: visible;
        transform: translateY(0) scale(1);
      }

      .ai-chat-header {
        background: var(--gradient-primary);
        color: white;
        padding: 0.8rem 1.2rem;
        border-radius: 20px 20px 0 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-shrink: 0;
        min-height: 60px;
      }

      .ai-chat-title {
        font-weight: 600;
        font-size: 1.1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .ai-chat-stop {
        background: #e74c3c;
        color: white;
        border: none;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-right: 8px;
        transition: all 0.2s ease;
      }

      .ai-chat-stop:hover {
        background: #c0392b;
        transform: scale(1.05);
      }

      .ai-chat-close {
        background: none;
        border: none;
        color: white;
        font-size: 1.2rem;
        cursor: pointer;
        padding: 0.25rem;
        border-radius: 50%;
        transition: background 0.3s ease;
      }

      .ai-chat-close:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .ai-chat-messages {
        flex: 1;
        overflow-y: auto;
        padding: 1rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        min-height: 0;
        background-image: url("../doodleart1.jpg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }

      .ai-message {
        background: #f8f9fa;
        padding: 0.75rem 1rem;
        border-radius: 15px 15px 15px 5px;
        max-width: 80%;
        align-self: flex-start;
        border: 1px solid rgba(0, 0, 0, 0.1);
        color: #000;
      }

      .user-message {
        background: var(--gradient-primary);
        color: white;
        border-radius: 15px 15px 5px 15px;
        align-self: flex-end;
        border: none;
      }

      .ai-chat-input {
        padding: 0.8rem 1.2rem;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
        flex-shrink: 0;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 0 0 20px 20px;
      }

      .ai-chat-form {
        display: flex;
        gap: 0.5rem;
        align-items: center;
      }

      .ai-chat-input-field {
        flex: 1;
        padding: 0.75rem 1rem;
        border: 1px solid rgba(0, 0, 0, 0.2);
        border-radius: 25px;
        outline: none;
        font-size: 0.9rem;
        min-height: 44px;
        box-sizing: border-box;
      }

      .ai-chat-input-field:focus {
        border-color: var(--primary-gold);
      }

      .ai-chat-send-stop {
        background: var(--gradient-primary);
        color: white;
        border: none;
        padding: 0.75rem;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 44px;
        min-height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      }

      .ai-chat-send-stop:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      .ai-chat-send-stop:active {
        transform: scale(0.95);
      }

      .ai-chat-send-stop:focus {
        outline: 2px solid var(--primary-gold);
        outline-offset: 2px;
      }

      .ai-chat-send-stop.stop-mode {
        background: #dc3545;
      }

      .ai-chat-send-stop:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .ai-chat-stop {
        background: #dc3545;
        color: white;
        border: none;
        padding: 0.75rem;
        border-radius: 50%;
        cursor: pointer;
        font-size: 0.9rem;
        width: 45px;
        height: 45px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        margin-left: 0.5rem;
      }

      .ai-chat-stop:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        background: #c82333;
      }

      .ai-chat-start {
        background: #28a745;
        color: white;
        border: none;
        padding: 0.75rem;
        border-radius: 50%;
        cursor: pointer;
        font-size: 0.9rem;
        width: 45px;
        height: 45px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        margin-left: 0.5rem;
      }

      .ai-chat-start:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        background: #218838;
      }

      /* Festival Calendar Overlay */
      .festival-calendar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(10px);
        z-index: 2000;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .festival-calendar-overlay.open {
        opacity: 1;
        visibility: visible;
      }

      .festival-calendar-container {
        background: white;
        border-radius: 20px;
        width: 95%;
        height: 90%;
        max-width: 1200px;
        max-height: 800px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
        position: relative;
      }

      .festival-calendar-header {
        background: linear-gradient(135deg, #8b4513, #d2691e);
        color: white;
        padding: 1rem 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .festival-calendar-header h2 {
        margin: 0;
        font-size: 1.5rem;
        font-weight: 600;
      }

      .festival-calendar-close {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .festival-calendar-close:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
      }

      .festival-calendar-content {
        height: calc(100% - 80px);
        overflow-y: auto;
        padding: 0;
      }
      /* About Section Enhanced Styles */
      .about-section {
        position: relative;
        background: linear-gradient(
          135deg,
          #fdfaf5 0%,
          #e8e3d3 50%,
          #f5f1eb 100%
        );
        padding: 6rem 0;
        overflow: hidden;
      }

      .about-bg-elements {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
      }

      .floating-element {
        position: absolute;
        font-size: 2rem;
        opacity: 0.1;
        animation: float 6s ease-in-out infinite;
      }

      .element-1 {
        top: 10%;
        left: 10%;
        animation-delay: 0s;
      }

      .element-2 {
        top: 20%;
        right: 15%;
        animation-delay: 1s;
      }

      .element-3 {
        top: 60%;
        left: 5%;
        animation-delay: 2s;
      }

      .element-4 {
        top: 70%;
        right: 10%;
        animation-delay: 3s;
      }

      .element-5 {
        top: 40%;
        left: 50%;
        animation-delay: 4s;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-20px) rotate(5deg);
        }
      }

      .about-header {
        text-align: center;
        margin-bottom: 4rem;
        position: relative;
        z-index: 2;
      }

      .typewriter-text {
        font-size: 3.5rem;
        background: linear-gradient(45deg, #8b4513, #d2691e, #cd853f);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: typewriter 2s steps(20) 1s 1 normal both;
        overflow: hidden;
        white-space: nowrap;
        border-right: 3px solid #d2691e;
        margin: 0 auto;
        width: fit-content;
      }

      @keyframes typewriter {
        from {
          width: 0;
        }
        to {
          width: 100%;
        }
      }

      .fade-in-text {
        animation: fadeInUp 1s ease-out 2.5s both;
        font-size: 1.2rem;
        color: #666;
        max-width: 600px;
        margin: 1rem auto 0;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .title-underline {
        width: 100px;
        height: 4px;
        background: linear-gradient(90deg, #d2691e, #cd853f);
        margin: 1rem auto 0;
        border-radius: 2px;
        animation: expandWidth 1s ease-out 3s both;
      }

      @keyframes expandWidth {
        from {
          width: 0;
        }
        to {
          width: 100px;
        }
      }

      .about-cards-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
        gap: 3rem;
        margin-bottom: 4rem;
        position: relative;
        z-index: 2;
      }

      .about-card {
        background: white;
        padding: 2.5rem;
        border-radius: 25px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: hidden;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        border: 2px solid transparent;
      }

      .about-card:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
        border-color: #d2691e;
      }

      .card-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        display: inline-block;
        animation: bounce 2s infinite;
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }

      .card-title {
        color: #d2691e;
        font-size: 1.8rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        position: relative;
      }

      .card-content {
        position: relative;
        z-index: 2;
      }

      .card-text {
        color: #555;
        line-height: 1.8;
        margin-bottom: 1.5rem;
        font-size: 1rem;
      }

      .card-glow {
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(210, 105, 30, 0.1) 0%,
          transparent 70%
        );
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
      }

      .about-card:hover .card-glow {
        opacity: 1;
      }

      /* Link card styling */
      .about-card[href] {
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .about-card[href]:hover {
        transform: translateY(-15px) scale(1.03);
        box-shadow: 0 25px 60px rgba(0, 0, 0, 0.2);
      }

      .about-card[href]:hover .card-glow {
        opacity: 0.4;
      }

      /* Sikkim Traditional Doodles Styles */
      .sikkim-doodles {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        pointer-events: none;
        z-index: 1;
        overflow: hidden;
      }

      .doodle-element {
        position: absolute;
        font-size: 2rem;
        opacity: 0.1;
        animation-duration: 4s;
        animation-iteration-count: infinite;
        animation-timing-function: ease-in-out;
      }

      .doodle-element:nth-child(1) {
        top: 10%;
        left: 5%;
        animation-name: float;
        animation-delay: 0s;
      }

      .doodle-element:nth-child(2) {
        top: 20%;
        right: 10%;
        animation-name: rotate;
        animation-delay: 1s;
      }

      .doodle-element:nth-child(3) {
        top: 60%;
        left: 8%;
        animation-name: sway;
        animation-delay: 2s;
      }

      .doodle-element:nth-child(4) {
        top: 70%;
        right: 5%;
        animation-name: flow;
        animation-delay: 3s;
      }

      .doodle-element:nth-child(5) {
        top: 40%;
        left: 15%;
        animation-name: swing;
        animation-delay: 0.5s;
      }

      .doodle-element:nth-child(6) {
        top: 30%;
        right: 20%;
        animation-name: bloom;
        animation-delay: 1.5s;
      }

      .doodle-element:nth-child(7) {
        top: 80%;
        left: 25%;
        animation-name: glow;
        animation-delay: 2.5s;
      }

      .doodle-element:nth-child(8) {
        top: 50%;
        right: 15%;
        animation-name: paint;
        animation-delay: 3.5s;
      }

      /* Keyframe Animations for Doodles */
      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-15px) rotate(3deg);
        }
      }

      @keyframes rotate {
        0% {
          transform: rotate(0deg) scale(1);
        }
        50% {
          transform: rotate(180deg) scale(1.1);
        }
        100% {
          transform: rotate(360deg) scale(1);
        }
      }

      @keyframes sway {
        0%,
        100% {
          transform: translateX(0px) rotate(0deg);
        }
        25% {
          transform: translateX(8px) rotate(2deg);
        }
        75% {
          transform: translateX(-8px) rotate(-2deg);
        }
      }

      @keyframes flow {
        0%,
        100% {
          transform: translateX(0px) scale(1);
        }
        50% {
          transform: translateX(12px) scale(1.05);
        }
      }

      @keyframes swing {
        0%,
        100% {
          transform: rotate(0deg);
        }
        25% {
          transform: rotate(8deg);
        }
        75% {
          transform: rotate(-8deg);
        }
      }

      @keyframes bloom {
        0%,
        100% {
          transform: scale(1) rotate(0deg);
        }
        50% {
          transform: scale(1.15) rotate(8deg);
        }
      }

      @keyframes glow {
        0%,
        100% {
          transform: scale(1);
          filter: drop-shadow(0 0 10px rgba(147, 112, 219, 0.3));
        }
        50% {
          transform: scale(1.1);
          filter: drop-shadow(0 0 20px rgba(147, 112, 219, 0.6));
        }
      }

      @keyframes paint {
        0%,
        100% {
          transform: translateY(0px) scale(1) rotate(0deg);
        }
        50% {
          transform: translateY(-8px) scale(1.03) rotate(2deg);
        }
      }

      /* Additional Animated Emojis Styles */
      .animated-emojis {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        pointer-events: none;
        z-index: 1;
        overflow: hidden;
      }

      .emoji-small {
        position: absolute;
        font-size: 1.5rem;
        opacity: 0.15;
        animation-duration: 3s;
        animation-iteration-count: infinite;
        animation-timing-function: ease-in-out;
      }

      .emoji-small:nth-child(1) {
        top: 15%;
        left: 3%;
        animation-name: bounce;
        animation-delay: 0.2s;
      }

      .emoji-small:nth-child(2) {
        top: 25%;
        right: 8%;
        animation-name: wiggle;
        animation-delay: 1.2s;
      }

      .emoji-small:nth-child(3) {
        top: 45%;
        left: 2%;
        animation-name: pulse;
        animation-delay: 2.2s;
      }

      .emoji-small:nth-child(4) {
        top: 65%;
        right: 3%;
        animation-name: shake;
        animation-delay: 0.8s;
      }

      .emoji-small:nth-child(5) {
        top: 35%;
        left: 12%;
        animation-name: twirl;
        animation-delay: 1.8s;
      }

      .emoji-small:nth-child(6) {
        top: 55%;
        right: 12%;
        animation-name: float-gentle;
        animation-delay: 2.8s;
      }

      .emoji-small:nth-child(7) {
        top: 75%;
        left: 8%;
        animation-name: sparkle;
        animation-delay: 1.5s;
      }

      .emoji-small:nth-child(8) {
        top: 85%;
        right: 8%;
        animation-name: drift;
        animation-delay: 0.5s;
      }

      .emoji-small:nth-child(9) {
        top: 5%;
        left: 20%;
        animation-name: flutter;
        animation-delay: 2.5s;
      }

      .emoji-small:nth-child(10) {
        top: 95%;
        left: 15%;
        animation-name: sway-gentle;
        animation-delay: 1.8s;
      }

      .emoji-small:nth-child(11) {
        top: 10%;
        right: 25%;
        animation-name: rotate-slow;
        animation-delay: 3.2s;
      }

      .emoji-small:nth-child(12) {
        top: 90%;
        right: 18%;
        animation-name: bounce-gentle;
        animation-delay: 0.9s;
      }

      /* Additional Keyframe Animations */
      @keyframes bounce {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-12px);
        }
      }

      @keyframes wiggle {
        0%,
        100% {
          transform: rotate(0deg);
        }
        25% {
          transform: rotate(5deg);
        }
        75% {
          transform: rotate(-5deg);
        }
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
          opacity: 0.15;
        }
        50% {
          transform: scale(1.2);
          opacity: 0.25;
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0px);
        }
        25% {
          transform: translateX(3px);
        }
        75% {
          transform: translateX(-3px);
        }
      }

      @keyframes twirl {
        0% {
          transform: rotate(0deg) scale(1);
        }
        50% {
          transform: rotate(180deg) scale(1.1);
        }
        100% {
          transform: rotate(360deg) scale(1);
        }
      }

      @keyframes float-gentle {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-8px) rotate(2deg);
        }
      }

      @keyframes sparkle {
        0%,
        100% {
          transform: scale(1);
          filter: brightness(1);
        }
        50% {
          transform: scale(1.15);
          filter: brightness(1.3);
        }
      }

      @keyframes drift {
        0%,
        100% {
          transform: translateX(0px) translateY(0px);
        }
        33% {
          transform: translateX(5px) translateY(-3px);
        }
        66% {
          transform: translateX(-3px) translateY(5px);
        }
      }

      @keyframes flutter {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        25% {
          transform: translateY(-6px) rotate(1deg);
        }
        75% {
          transform: translateY(3px) rotate(-1deg);
        }
      }

      @keyframes sway-gentle {
        0%,
        100% {
          transform: rotate(0deg);
        }
        50% {
          transform: rotate(3deg);
        }
      }

      @keyframes rotate-slow {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes bounce-gentle {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }

      .tech-features {
        margin-bottom: 2rem;
      }

      .tech-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1.5rem;
        padding: 1rem;
        border-radius: 15px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .tech-item:hover {
        background: linear-gradient(135deg, #fef3c7, #fcd34d);
        transform: translateX(10px);
      }

      .tech-icon {
        font-size: 1.5rem;
        min-width: 2rem;
        text-align: center;
      }

      .tech-text {
        color: #555;
        font-weight: 500;
        flex: 1;
      }

      .tech-progress {
        position: absolute;
        bottom: 0;
        left: 0;
        height: 3px;
        background: linear-gradient(90deg, #d2691e, #cd853f);
        width: 0;
        transition: width 0.6s ease;
      }

      .tech-item:hover .tech-progress {
        width: 100%;
      }

      .stats-section {
        margin: 4rem 0;
        position: relative;
        z-index: 2;
      }

      .stats-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 2rem;
        text-align: center;
      }

      .stat-item {
        background: rgba(255, 255, 255, 0.75);
        padding: 2rem 1.5rem;
        border-radius: 20px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(10px) saturate(120%);
        -webkit-backdrop-filter: blur(10px) saturate(120%);
        border: 1px solid rgba(255, 255, 255, 0.4);
        background-clip: padding-box;
      }

      .stat-item:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
      }

      .stat-item::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(210, 105, 30, 0.1),
          transparent
        );
        transition: left 0.5s ease;
      }

      .stat-item:hover::before {
        left: 100%;
      }

      .stat-number {
        font-size: 3rem;
        font-weight: 800;
        color: #d2691e;
        margin-bottom: 0.5rem;
        position: relative;
      }

      .stat-label {
        color: #666;
        font-weight: 600;
        margin-bottom: 1rem;
      }

      .stat-icon {
        font-size: 2rem;
        opacity: 0.7;
      }

      .cta-section {
        text-align: center;
        margin-top: 3rem;
        position: relative;
        z-index: 2;
      }

      .cta-button {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 1rem 2rem;
        margin: 0 1rem;
        border-radius: 50px;
        text-decoration: none;
        font-weight: 600;
        font-size: 1.1rem;
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        position: relative;
        overflow: hidden;
        border: 2px solid transparent;
      }

      .primary-cta {
        background: linear-gradient(135deg, #d2691e, #cd853f);
        color: white;
        box-shadow: 0 8px 25px rgba(210, 105, 30, 0.3);
      }
      .primary-cta:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 15px 40px rgba(210, 105, 30, 0.4);
      }

      .secondary-cta {
        background: transparent;
        color: #d2691e;
        border-color: #d2691e;
      }

      .secondary-cta:hover {
        background: #d2691e;
        color: white;
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 15px 40px rgba(210, 105, 30, 0.3);
      }

      .cta-ripple {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        transform: translate(-50%, -50%);
        transition: width 0.6s ease, height 0.6s ease;
      }

      .cta-button:active .cta-ripple {
        width: 300px;
        height: 300px;
      }

      .cta-icon {
        font-size: 1.2rem;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .about-cards-container {
          grid-template-columns: 1fr;
          gap: 2rem;
        }

        .typewriter-text {
          font-size: 2.5rem;
        }

        .about-card {
          padding: 2rem;
        }

        .stats-container {
          grid-template-columns: repeat(2, 1fr);
          gap: 1.5rem;
        }

        .cta-button {
          display: block;
          margin: 1rem auto;
          width: fit-content;
        }
      }

      @media (max-width: 480px) {
        .stats-container {
          grid-template-columns: 1fr;
        }

        .typewriter-text {
          font-size: 2rem;
        }
      }

      .ai-chat-stop:active {
        transform: scale(0.95);
      }

      .ai-chat-stop:focus {
        outline: 2px solid #dc3545;
        outline-offset: 2px;
      }

      .ai-chat-stop:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .ai-chat-input-field:focus {
        outline: 2px solid var(--primary-gold);
        outline-offset: 2px;
      }

      .ai-chat-close:focus {
        outline: 2px solid rgba(255, 255, 255, 0.8);
        outline-offset: 2px;
      }

      .ai-chat-close {
        min-width: 44px;
        min-height: 44px;
      }

      .search-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.45);
        backdrop-filter: blur(6px);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1100;
        padding: 1rem;
      }
      .search-overlay.open {
        display: flex;
      }
      .search-box {
        width: min(800px, 92vw);
        background: #fff;
        border-radius: 14px;
        padding: 1rem;
        box-shadow: var(--shadow-heavy);
        border: 1px solid rgba(212, 175, 55, 0.15);
      }
      .search-input {
        width: 100%;
        padding: 0.9rem 1rem;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        font-size: 1rem;
        outline: none;
      }
      .search-hints {
        margin-top: 0.8rem;
        color: var(--text-light);
        font-size: 0.9rem;
      }

      /* Scroll progress */
      .scroll-progress {
        position: fixed;
        top: 0;
        left: 0;
        height: 3px;
        width: 0;
        background: var(--gradient-primary);
        z-index: 1200;
        transition: width 0.1s linear;
      }

      /* Hero Section */
      .hero {
        height: 100vh;
        background: black;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
        margin-bottom: 4rem; /* ensure clear space before next section */
        isolation: isolate; /* prevent blending with following sections */
      }

      /* Background video styling */
      .hero-video {
        position: absolute;
        top: 50%;
        left: 50%;
        min-width: 100%;
        min-height: 100%;
        width: auto;
        height: auto;
        transform: translate(-50%, -50%);
        z-index: 0;
        object-fit: cover;
        filter: none;
      }

      /* Gradient overlay to improve text readability */
      .hero::after {
        content: "";
        position: absolute;
        inset: 0;
        background: none; /* remove light tint over video */
        z-index: 1;
        pointer-events: none;
      }

      .hero-particles {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      .particle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: rgba(255, 255, 255, 0.6);
        border-radius: 50%;
        animation: float 6s ease-in-out infinite;
      }

      .hero-content {
        text-align: center;
        color: white;
        max-width: 900px;
        padding: 0 2rem;
        z-index: 2;
        position: relative;
      }

      .hero h1 {
        font-size: 4.5rem;
        font-weight: 800;
        margin-bottom: 1.5rem;
        color: #ffffff;
        -webkit-text-fill-color: #ffffff;
        text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        animation: slideInUp 1s ease-out;
      }

      .hero-subtitle {
        font-size: 1.4rem;
        margin-bottom: 2.5rem;
        opacity: 0.95;
        font-weight: 400;
        animation: slideInUp 1s ease-out 0.2s both;
      }

      .hero-buttons {
        display: flex;
        gap: 1.5rem;
        justify-content: center;
        flex-wrap: wrap;
        animation: slideInUp 1s ease-out 0.4s both;
      }

      .btn {
        padding: 1rem 2.5rem;
        border: none;
        border-radius: 50px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s ease;
        cursor: pointer;
        font-size: 1rem;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }

      .btn-primary {
        background: var(--gradient-primary);
        color: white;
        box-shadow: var(--shadow-heavy);
        position: relative;
        overflow: hidden;
      }

      .btn-primary::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        transition: left 0.6s;
      }

      .btn-primary:hover::before {
        left: 100%;
      }

      .btn-primary:hover {
        box-shadow: var(--shadow-heavy), 0 0 20px rgba(212, 175, 55, 0.4),
          0 0 40px rgba(212, 175, 55, 0.2);
        transform: translateY(-2px);
      }

      .btn-primary:active {
        transform: translateY(0) scale(0.98);
        transition: transform 0.1s ease;
      }

      .btn-primary.clicked {
        animation: buttonClick 0.3s ease;
      }

      @keyframes buttonClick {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(0.95);
        }
        100% {
          transform: scale(1);
        }
      }

      .btn-secondary {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: 2px solid rgba(255, 255, 255, 0.3);
        backdrop-filter: blur(10px);
      }

      .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      }

      /* Content Sections */
      .section {
        padding: 6rem 2rem;
        position: relative;
        scroll-margin-top: 80px; /* better anchor scroll positioning below fixed nav */
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 1.25rem;
      }

      .section-header {
        text-align: center;
        margin-bottom: 4rem;
      }

      .section-title {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 1rem;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .section-subtitle {
        font-size: 1.2rem;
        color: #f5f5f5;
        max-width: 600px;
        margin: 0 auto;
      }

      /* Stats Section - Professional Design */
      .stats {
        /* Fallback neutral background */
        background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        padding: 6rem 2rem;
        margin-top: 0; /* lowered top offset to avoid overlap */
        position: relative;
        z-index: 10;
      }

      /* Stats visible: soft on-brand background that blends with the interface */
      .stats.visible {
        background: transparent; /* move heavy image to pseudo for smoother scroll */
        position: relative; /* ensure stacking context above body background */
        z-index: 1;
        border: 8px solid transparent;
        background-clip: padding-box;
      }

      /* Traditional Sikkim Frame Border for Stats Section */
      .stats.visible::after {
        content: "";
        position: absolute;
        inset: -8px;
        background: 
                /* Outer golden border */ linear-gradient(
            45deg,
            #d4af37,
            #ffd700,
            #ff6b35,
            #d4af37,
            #ffd700,
            #ff6b35,
            #d4af37,
            #ffd700
          ),
          /* Inner decorative pattern */
            repeating-linear-gradient(
              45deg,
              transparent 0px,
              transparent 10px,
              #ff6b35 10px,
              #ff6b35 12px,
              transparent 12px,
              transparent 22px,
              #d4af37 22px,
              #d4af37 24px
            ),
          /* Corner decorations */
            radial-gradient(circle at 0% 0%, #d4af37 15px, transparent 15px),
          radial-gradient(circle at 100% 0%, #ff6b35 15px, transparent 15px),
          radial-gradient(circle at 0% 100%, #ffd700 15px, transparent 15px),
          radial-gradient(circle at 100% 100%, #d4af37 15px, transparent 15px);
        background-size: 100% 100%, 20px 20px, 30px 30px, 30px 30px, 30px 30px,
          30px 30px;
        background-position: 0 0, 0 0, 0 0, 100% 0, 0 100%, 100% 100%;
        background-repeat: no-repeat, repeat, no-repeat, no-repeat, no-repeat,
          no-repeat;
        border-radius: 25px;
        z-index: -1;
        animation: sikkimFrameGlow 3s ease-in-out infinite alternate;
      }

      .stats.visible::before {
        content: "";
        position: absolute;
        inset: 0;
        z-index: 0; /* above body background, below content */
        background: linear-gradient(
            135deg,
            rgba(0, 0, 0, 0.35),
            rgba(0, 0, 0, 0.2)
          ),
          url("../doodleart1.jpg");
        background-position: center top;
        background-repeat: no-repeat;
        background-size: cover;
        pointer-events: none;
        will-change: transform;
        animation: stats-bg-zoom 18s ease-in-out infinite alternate;
        transform-origin: center;
      }

      /* Container styling inside stats for blended card-like effect */
      .stats.visible > .container {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.9),
          rgba(255, 255, 255, 0.85)
        );
        border: 1px solid rgba(212, 175, 55, 0.15);
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
        padding: 3rem 2rem;
        backdrop-filter: blur(6px);
        -webkit-backdrop-filter: blur(6px);
        position: relative;
        overflow: hidden;
      }

      @keyframes stats-bg-zoom {
        0% {
          transform: scale(1);
          filter: saturate(105%) contrast(102%);
        }
        100% {
          transform: scale(1.06);
          filter: saturate(110%) contrast(105%);
        }
      }

      @media (prefers-reduced-motion: reduce) {
        .stats.visible::before {
          animation: none !important;
        }
      }

      /* Decorative Sikkim Art Border */
      .stats.visible > .container::after {
        content: "";
        position: absolute;
        inset: -3px;
        background: linear-gradient(
          45deg,
          #d4af37 0%,
          #ffd700 15%,
          #ff6b35 30%,
          #d4af37 45%,
          #ffd700 60%,
          #ff6b35 75%,
          #d4af37 90%,
          #ffd700 100%
        );
        border-radius: 23px;
        z-index: -1;
        animation: sikkimBorderGlow 4s ease-in-out infinite alternate;
      }

      /* Container styling inside stats for blended card-like effect */
      .stats.visible > .container {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.9),
          rgba(255, 255, 255, 0.85)
        );
        border: 1px solid rgba(212, 175, 55, 0.15);
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
        padding: 3rem 2rem;
        backdrop-filter: blur(6px);
        -webkit-backdrop-filter: blur(6px);
        position: relative;
        overflow: hidden;
      }

      @keyframes sikkimFrameGlow {
        0% {
          box-shadow: 0 0 20px rgba(212, 175, 55, 0.5),
            inset 0 0 20px rgba(255, 107, 53, 0.3);
        }
        100% {
          box-shadow: 0 0 30px rgba(255, 107, 53, 0.6),
            inset 0 0 30px rgba(212, 175, 55, 0.4);
        }
      }

      /* Animated border glow effect */
      @keyframes sikkimBorderGlow {
        0% {
          box-shadow: 0 0 20px rgba(212, 175, 55, 0.3),
            0 0 40px rgba(255, 107, 53, 0.2),
            inset 0 0 20px rgba(255, 215, 0, 0.1);
        }
        100% {
          box-shadow: 0 0 30px rgba(255, 107, 53, 0.4),
            0 0 50px rgba(212, 175, 55, 0.3),
            inset 0 0 30px rgba(255, 215, 0, 0.2);
        }
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 4rem;
        background: #ffffff;
        background-image: radial-gradient(
            circle at 20% 80%,
            rgba(212, 175, 55, 0.03) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(212, 175, 55, 0.03) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 40%,
            rgba(212, 175, 55, 0.02) 0%,
            transparent 50%
          );
        padding: 5rem 4rem;
        border-radius: 0;
        box-shadow: 0 25px 80px rgba(0, 0, 0, 0.08);
        border: 1px solid rgba(0, 0, 0, 0.05);
        position: relative;
        overflow: hidden;
        max-width: 1200px;
        margin: 0 auto;
      }

      .stats-grid::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, #1a1a1a, #d4af37, #1a1a1a);
      }

      .stats-grid::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, #e0e0e0, transparent);
      }

      .stat-item {
        text-align: center;
        padding: 0;
        position: relative;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .stat-item:hover {
        transform: translateY(-8px);
      }

      .stat-item:not(:last-child)::after {
        content: "";
        position: absolute;
        right: -2rem;
        top: 50%;
        transform: translateY(-50%);
        width: 1px;
        height: 60px;
        background: linear-gradient(180deg, transparent, #d4af37, transparent);
      }

      .stat-number {
        font-size: 4.5rem;
        font-weight: 300;
        color: #1a1a1a;
        margin-bottom: 1.5rem;
        padding: 0;
        border: none;
        background: none;
        box-shadow: none;
        position: relative;
        font-family: "Arial", sans-serif;
        letter-spacing: -2px;
      }

      .stat-number::before {
        content: "";
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 60px;
        height: 2px;
        background: linear-gradient(90deg, transparent, #d4af37, transparent);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .stat-item:hover .stat-number::before {
        opacity: 1;
      }

      .stat-label {
        color: #666;
        font-weight: 400;
        font-size: 1rem;
        text-transform: none;
        letter-spacing: 0.5px;
        margin-top: 0;
        line-height: 1.4;
      }

      /* Features Grid */
      .features {
        background-image: url("../data/images/bg2.jpg");
        background-size: cover;
        background-position: center;
      }

      .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2rem;
      }

      .feature-card {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        padding: 2.5rem;
        border-radius: 20px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1),
          inset 0 1px 0 rgba(255, 255, 255, 0.4),
          inset 0 -1px 0 rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
        border: 2px solid rgba(255, 255, 255, 0.3);
        position: relative;
        overflow: hidden;
        transform: translateZ(0);
      }

      .feature-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--gradient-primary);
      }

      .feature-card:hover {
        transform: translateY(-8px) scale(1.02);
        background: rgba(255, 255, 255, 0.25);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15),
          inset 0 1px 0 rgba(255, 255, 255, 0.6),
          inset 0 -1px 0 rgba(0, 0, 0, 0.15), 0 0 0 2px rgba(255, 255, 255, 0.2),
          0 0 24px rgba(212, 175, 55, 0.35);
        border: 2px solid rgba(255, 255, 255, 0.4);
      }

      .feature-card:hover .feature-title {
        color: #1a1a1a;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        text-decoration: underline;
        text-decoration-thickness: 2px;
        text-underline-offset: 6px;
        text-decoration-color: rgba(212, 175, 55, 0.6);
      }

      .feature-card:hover .feature-description {
        color: #000000;
      }

      /* Hover effects: icon lift and subtle shine */
      .feature-card:hover .feature-icon {
        transform: translateY(-4px) scale(1.05);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        transition: transform 0.25s ease, box-shadow 0.25s ease;
      }

      .feature-card::after {
        content: "";
        position: absolute;
        top: -120%;
        left: -120%;
        width: 240%;
        height: 240%;
        background: radial-gradient(
          circle at center,
          rgba(255, 255, 255, 0.15),
          transparent 60%
        );
        transform: rotate(25deg);
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
      }

      .feature-card:hover::after {
        opacity: 1;
      }

      .feature-card:active {
        transform: translateY(-4px) scale(1.01);
        transition: all 0.1s ease;
      }

      .feature-icon {
        width: 70px;
        height: 70px;
        background: var(--gradient-primary);
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8rem;
        color: white;
        margin-bottom: 1.5rem;
      }

      .feature-title {
        font-size: 1.4rem;
        font-weight: 700;
        margin-bottom: 1rem;
        color: #000000;
        transition: color 0.3s ease;
      }

      .feature-description {
        color: #333333;
        line-height: 1.7;
        transition: color 0.3s ease;
      }

      /* Map Section */
      .map-section {
        background: white;
      }

      .map-container {
        height: 600px;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: var(--shadow-heavy);
        border: 1px solid rgba(212, 175, 55, 0.2);
      }

      .map-controls {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }
      .map-filter {
        padding: 0.8rem 1.5rem;
        background: white;
        border: 2px solid var(--primary-gold);
        border-radius: 50px;
        color: var(--primary-gold);
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .map-filter.active,
      .map-filter:hover {
        background: var(--primary-gold);
        color: white;
      }

      /* Monasteries Section */
      .monasteries {
        background-image: url("../data/images/bg1.jpg");
        background-size: cover;
        background-position: center;
        position: relative;
      }

      .monasteries::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.3),
          rgba(0, 0, 0, 0.6)
        );
        z-index: 1;
      }

      .monasteries .container {
        position: relative;
        z-index: 2;
      }

      .monastery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: 2rem;
      }

      .monastery-card {
        background: white;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: var(--shadow-light);
        transition: all 0.3s ease;
        border: 1px solid rgba(212, 175, 55, 0.1);
      }

      .monastery-card {
        transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        position: relative;
        overflow: hidden;
        transform: translateZ(0);
      }

      .monastery-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        transition: left 0.6s;
        z-index: 1;
      }

      .monastery-card:hover::before {
        left: 100%;
      }

      .monastery-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15),
          0 0 0 1px rgba(212, 175, 55, 0.25), 0 0 24px rgba(212, 175, 55, 0.25);
      }

      .monastery-card:hover .monastery-image {
        transform: scale(1.05);
      }

      .monastery-card:hover .monastery-title {
        color: var(--primary-gold);
        text-decoration: underline;
        text-decoration-thickness: 2px;
        text-underline-offset: 6px;
        text-decoration-color: rgba(212, 175, 55, 0.6);
      }

      .monastery-card:hover .btn {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
      }

      /* Monastery tags hover interaction */
      .tag {
        background: rgba(212, 175, 55, 0.1);
        color: var(--primary-gold-dark);
        padding: 0.4rem 1rem;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 500;
        border: 1px solid rgba(212, 175, 55, 0.25);
        transition: background 0.25s ease, color 0.25s ease,
          box-shadow 0.25s ease, transform 0.2s ease, border-color 0.25s ease;
      }

      .monastery-card:hover .monastery-tags .tag {
        background: rgba(212, 175, 55, 0.15);
        border-color: rgba(212, 175, 55, 0.4);
      }

      .monastery-tags .tag:hover {
        background: rgba(212, 175, 55, 0.22);
        color: #000;
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
      }

      /* Soft sheen on hover */
      .monastery-card::after {
        content: "";
        position: absolute;
        top: -120%;
        left: -120%;
        width: 240%;
        height: 240%;
        background: radial-gradient(
          circle at center,
          rgba(255, 255, 255, 0.12),
          transparent 60%
        );
        transform: rotate(25deg);
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
      }

      .monastery-card:hover::after {
        opacity: 1;
      }

      .monastery-image {
        height: 250px;
        background: linear-gradient(
          135deg,
          var(--primary-gold) 0%,
          var(--accent-orange) 100%
        );
        position: relative;
        overflow: hidden;
        transition: transform 0.4s ease;
      }

      .monastery-image::before {
        display: none;
      }

      .monastery-content {
        padding: 2rem;
      }

      .monastery-title {
        font-size: 1.4rem;
        font-weight: 700;
        margin-bottom: 1rem;
        color: var(--text-dark);
        transition: color 0.3s ease;
      }

      .monastery-description {
        color: var(--text-light);
        margin-bottom: 1.5rem;
        line-height: 1.6;
      }

      .monastery-tags {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
        margin-bottom: 1.5rem;
      }

      .tag {
        background: rgba(212, 175, 55, 0.1);
        color: var(--primary-gold-dark);
        padding: 0.4rem 1rem;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 500;
      }

      .monastery-actions {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        margin-top: 1.5rem;
      }

      .monastery-actions .btn {
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .monastery-actions .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .monastery-actions .btn:active {
        transform: translateY(0);
      }

      .monastery-actions .btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s;
      }

      .monastery-actions .btn:hover::before {
        left: 100%;
      }

      .btn-label {
        font-size: 0.8rem;
        color: var(--text-light);
        text-align: center;
        margin-bottom: 0.25rem;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .btn-small {
        padding: 0.6rem 1.2rem;
        font-size: 0.9rem;
        border-radius: 8px;
      }

      /* Archive Section */
      .archive {
        background: white;
      }

      .archive-categories {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-bottom: 4rem;
      }

      .archive-category {
        background: #ffffff;
        padding: 2rem;
        border-radius: 16px;
        text-align: center;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border: 1px solid rgba(0, 0, 0, 0.05);
        position: relative;
        overflow: hidden;
        cursor: pointer;
        max-width: 300px;
        margin: 0 auto;
      }

      /* Archive card styling */

      /* Archive image styling */
      .archive-image {
        margin: 2rem 0 1.5rem 0;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .archive-image img {
        width: 150px;
        height: 120px;
        object-fit: cover;
        border-radius: 12px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      /* Individual card colors with soft pastels */
      .archive-category:nth-child(1) {
        background: linear-gradient(135deg, #fff5f0 0%, #ffe4d6 100%);
        border-color: #ffb366;
      }

      .archive-category:nth-child(2) {
        background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
        border-color: #87ceeb;
      }

      .archive-category:nth-child(3) {
        background: linear-gradient(135deg, #f5f0ff 0%, #e6d7ff 100%);
        border-color: #dda0dd;
      }

      .archive-category:nth-child(4) {
        background: linear-gradient(135deg, #f0ffff 0%, #e0ffff 100%);
        border-color: #afeeee;
      }

      .archive-category:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
        cursor: pointer;
      }

      .archive-category:hover .archive-icon {
        transform: scale(1.1);
      }

      /* Archive hover carousel */
      .archive-carousel {
        position: absolute;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        background: rgba(0, 0, 0, 0.05);
        padding: 1rem;
        border-radius: 16px;
        z-index: 10;
      }

      .archive-category.show-carousel .archive-carousel {
        display: flex;
      }

      .archive-category.show-carousel .archive-image,
      .archive-category.show-carousel .archive-title,
      .archive-category.show-carousel .archive-description {
        opacity: 0;
        visibility: hidden;
      }

      .archive-carousel img {
        max-width: 100%;
        width: 100%;
        height: 250px;
        object-fit: cover;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        cursor: pointer;
        transition: transform 0.3s ease;
        background: #f7f7f7;
        margin-top: -20px;
      }

      .archive-carousel img:hover {
        transform: scale(1.02);
      }

      /* Modal for enlarged image */
      .archive-modal {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 1rem;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .archive-modal.open {
        display: flex;
        opacity: 1;
      }

      .archive-modal-content {
        background: #fff;
        border-radius: 12px;
        max-width: 90vw;
        max-height: 90vh;
        overflow: hidden;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        position: relative;
        width: 80vw; /* Wider modal content */
      }

      .archive-modal-content img {
        display: block;
        max-width: 100%;
        max-height: 90vh;
        object-fit: contain;
        background: #000;
        width: 100%; /* Full width of modal content */
        height: auto; /* Maintain aspect ratio */
        transform: scale(0.95);
        transition: transform 0.3s ease;
      }

      .archive-modal.open .archive-modal-content img {
        transform: scale(1);
      }

      .archive-modal-close {
        position: absolute;
        top: 10px;
        right: 15px;
        background: rgba(0, 0, 0, 0.7);
        color: #fff;
        border: none;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.2rem;
        transition: background-color 0.2s ease, transform 0.2s ease;
        z-index: 1010;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }

      .archive-modal-close:hover {
        background: rgba(0, 0, 0, 0.9);
        transform: scale(1.1);
      }

      .archive-icon {
        font-size: 3.5rem;
        margin-bottom: 1.5rem;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        transition: all 0.3s ease;
        display: block;
      }

      .archive-title {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        color: #1f2937;
        line-height: 1.3;
      }

      .archive-description {
        color: #4b5563;
        line-height: 1.6;
        font-size: 0.95rem;
        margin: 0;
        text-align: left;
      }

      /* Tours Section */
      .tours {
        background: var(--bg-light);
      }

      .tour-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2rem;
      }

      .tour-card {
        background: white;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: var(--shadow-light);
        transition: all 0.3s ease;
      }

      .tour-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-heavy);
      }

      .tour-preview {
        height: 200px;
        background: var(--gradient-secondary);
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 3rem;
      }

      .tour-info {
        padding: 2rem;
      }

      .tour-title {
        font-size: 1.3rem;
        font-weight: 700;
        margin-bottom: 1rem;
      }

      .tour-meta {
        display: flex;
        gap: 1rem;
        margin-bottom: 1rem;
        font-size: 0.9rem;
        color: var(--text-light);
      }

      .tour-description {
        color: var(--text-light);
        line-height: 1.6;
        margin-bottom: 1.5rem;
      }

      /* Research Section */
      .research {
        background: white;
      }

      .research-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2rem;
      }

      .research-paper {
        background: var(--bg-light);
        padding: 2rem;
        border-radius: 16px;
        border-left: 4px solid var(--primary-gold);
        transition: all 0.3s ease;
      }

      .research-paper:hover {
        background: white;
        box-shadow: var(--shadow-light);
      }

      .research-title {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 1rem;
        color: var(--text-dark);
      }

      .research-author {
        color: var(--primary-gold-dark);
        font-weight: 500;
        margin-bottom: 0.5rem;
      }

      .research-date {
        color: var(--text-light);
        font-size: 0.9rem;
        margin-bottom: 1rem;
      }

      .research-abstract {
        color: var(--text-light);
        line-height: 1.6;
      }

      /* Footer */
      .footer {
        background: var(--text-dark);
        color: white;
        padding: 4rem 2rem 2rem;
      }

      .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin-bottom: 3rem;
      }

      .footer-section h3 {
        color: var(--primary-gold);
        margin-bottom: 1.5rem;
        font-size: 1.2rem;
      }

      .footer-section a {
        color: #9ca3af;
        text-decoration: none;
        display: block;
        margin-bottom: 0.8rem;
        transition: color 0.3s ease;
      }

      .footer-section a:hover {
        color: white;
      }

      .footer-bottom {
        border-top: 1px solid #374151;
        padding-top: 2rem;
        text-align: center;
        color: #9ca3af;
      }

      /* Animations */
      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
          opacity: 0.6;
        }
        50% {
          transform: translateY(-20px) rotate(180deg);
          opacity: 1;
        }
      }

      .fade-in {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.6s ease;
      }

      .fade-in.visible {
        opacity: 1;
        transform: translateY(0);
      }

      /* Large screen optimization */
      @media (min-width: 1200px) {
        .ai-chat-overlay {
          width: 450px;
          height: 650px;
        }
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .nav-menu {
          display: none;
        }
        .mobile-toggle {
          display: flex;
        }

        .hero h1 {
          font-size: 2.8rem;
        }
        .hero-subtitle {
          font-size: 1.1rem;
        }
        .hero-buttons {
          flex-direction: column;
          align-items: center;
        }

        .section {
          padding: 4rem 1rem;
        }
        .section-title {
          font-size: 2.2rem;
        }

        .stats-grid {
          grid-template-columns: 1fr;
          gap: 3rem;
          padding: 3rem 2rem;
        }
        .stat-item:not(:last-child)::after {
          display: none;
        }
        .features-grid {
          grid-template-columns: 1fr;
        }
        .monastery-grid {
          grid-template-columns: 1fr;
        }
        .tour-grid {
          grid-template-columns: 1fr;
        }
        .research-grid {
          grid-template-columns: 1fr;
        }

        .map-controls {
          flex-direction: column;
        }
        .map-container {
          height: 400px;
        }

        /* AI Chat Box Mobile Optimization */
        .ai-chat-overlay {
          bottom: 15px;
          right: 15px;
          left: 15px;
          width: auto;
          height: 70vh;
          max-height: 500px;
          border-radius: 15px;
        }

        .ai-chat-header {
          padding: 0.7rem 1rem;
          min-height: 50px;
        }

        .ai-chat-input {
          padding: 0.7rem 1rem;
        }

        .ai-chat-input-field {
          font-size: 16px; /* Prevents zoom on iOS */
        }
      }
      @media (max-width: 480px) {
        .nav-container {
          padding: 1rem;
        }
        .hero h1 {
          font-size: 2.2rem;
        }
        .btn {
          padding: 0.8rem 1.5rem;
          font-size: 0.9rem;
        }
        .stats-grid {
          grid-template-columns: 1fr;
          gap: 2rem;
          padding: 2rem 1.5rem;
        }
        .stat-number {
          font-size: 3.5rem;
        }

        /* AI Chat Box Small Mobile Optimization */
        .ai-chat-overlay {
          bottom: 10px;
          right: 10px;
          left: 10px;
          height: 75vh;
          max-height: 450px;
          border-radius: 12px;
        }

        .ai-chat-header {
          padding: 0.6rem 0.8rem;
          border-radius: 12px 12px 0 0;
          min-height: 45px;
        }

        .ai-chat-title {
          font-size: 1rem;
        }

        .ai-chat-messages {
          padding: 0.8rem;
        }

        .ai-chat-input {
          padding: 0.6rem 0.8rem;
          border-radius: 0 0 12px 12px;
        }

        .ai-chat-input-field {
          padding: 0.6rem 0.8rem;
          font-size: 16px;
        }

        .ai-chat-send {
          padding: 0.6rem;
          min-width: 44px;
          min-height: 44px;
          font-size: 0.9rem;
        }
      }

      /* Enhanced Leaflet popup styles */
      .leaflet-popup-content-wrapper {
        border-radius: 12px !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15) !important;
        border: 1px solid rgba(212, 175, 55, 0.2) !important;
      }

      .leaflet-popup-content {
        margin: 0 !important;
        padding: 0 !important;
        font-family: "Inter", sans-serif !important;
      }

      .leaflet-popup-tip {
        background: white !important;
        border: 1px solid rgba(212, 175, 55, 0.2) !important;
      }

      .custom-popup .leaflet-popup-content {
        margin: 0;
        padding: 0;
        max-height: 400px;
        overflow: hidden;
      }

      .popup-content {
        padding: 0;
        min-width: 350px;
        max-width: 450px;
        font-size: 0.9rem;
      }

      .popup-content::-webkit-scrollbar {
        width: 4px;
      }

      .popup-content::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 2px;
      }

      .popup-content::-webkit-scrollbar-thumb {
        background: var(--primary-gold);
        border-radius: 2px;
      }

      .popup-content h4 {
        border-bottom: 1px solid #e5e7eb;
        padding-bottom: 0.3rem;
      }

      .popup-btn {
        background: var(--gradient-primary);
        color: white;
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        font-size: 0.85rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.3rem;
      }

      .popup-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
      }

      .popup-btn i {
        font-size: 0.8rem;
      }

      /* Monastery Modal Styles */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .modal-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      .modal-content {
        background: white;
        border-radius: 20px;
        max-width: 90vw;
        max-height: 90vh;
        width: 800px;
        overflow-y: auto;
        position: relative;
        transform: scale(0.7);
        transition: transform 0.3s ease;
      }

      .modal-overlay.active .modal-content {
        transform: scale(1);
      }

      .modal-header {
        padding: 2rem 2rem 1rem;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        position: relative;
      }

      .modal-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--text-light);
        transition: color 0.3s ease;
      }

      .modal-close:hover {
        color: var(--text-dark);
      }

      .modal-title {
        font-size: 2rem;
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: 0.5rem;
      }

      .modal-subtitle {
        color: var(--text-light);
        font-size: 1.1rem;
      }

      .modal-body {
        padding: 2rem;
      }

      .modal-image {
        width: 100%;
        height: 300px;
        background: linear-gradient(
          135deg,
          var(--primary-gold) 0%,
          var(--accent-orange) 100%
        );
        border-radius: 15px;
        margin-bottom: 1.5rem;
        position: relative;
        overflow: hidden;
      }

      .modal-image::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 4rem;
        opacity: 0.7;
      }

      .modal-description {
        color: var(--text-dark);
        line-height: 1.7;
        margin-bottom: 1.5rem;
        font-size: 1.1rem;
      }

      .modal-features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .feature-item {
        background: var(--bg-light);
        padding: 1rem;
        border-radius: 10px;
        text-align: center;
      }

      .feature-icon {
        font-size: 2rem;
        margin-bottom: 0.5rem;
      }

      .feature-title {
        font-weight: 600;
        color: var(--text-dark);
        margin-bottom: 0.25rem;
      }

      .feature-desc {
        color: var(--text-light);
        font-size: 0.9rem;
      }

      .modal-actions {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
      }

      /* Enhanced monastery marker animations */
      .custom-monastery-marker div {
        animation: markerPulse 2s ease-in-out infinite;
      }

      @keyframes markerPulse {
        0%,
        100% {
          transform: scale(1);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        50% {
          transform: scale(1.05);
          box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }
      }

      .custom-monastery-marker:hover div {
        animation: none;
        transform: scale(1.15) !important;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5) !important;
      }
    </style>
  </head>
  <body>
    <!-- Buddha avatar chat launcher -->
    <button
      id="aiChatLauncher"
      class="ai-chat-launcher"
      aria-label="Open AI Assistant"
      title="Ask Sacred Sikkim AI"
    >
      <span class="avatar" aria-hidden="true"></span>
    </button>
    <div class="scroll-progress" aria-hidden="true"></div>
    <!-- Navigation -->
    <nav class="navbar">
      <div class="nav-container">
        <a href="#home" class="logo">
          <i class="fas fa-mountain"></i>
          <span>Sacred Sikkim</span>
        </a>
        <ul class="nav-menu">
          <li class="nav-item"><a href="#home" class="active">Home</a></li>
          <li class="nav-item"><a href="#monasteries">Monasteries</a></li>
          <li class="nav-item"><a href="#map">Map</a></li>
          <li class="nav-item"><a href="#archive">Archive</a></li>
          <li class="nav-item"><a href="#research">Research</a></li>
          <li class="nav-item"><a href="#about">About</a></li>
          <li class="nav-item mega-parent">
            <a href="#features" class="mega-toggle"
              ><i class="fas fa-compass"></i> Explore
              <i class="fas fa-chevron-down"></i
            ></a>
            <div class="mega-menu" role="menu" aria-label="Explore menu">
              <div class="mega-col">
                <h4>Plan Your Journey</h4>
                <div class="mega-links">
                  <a href="#map"
                    ><i class="fas fa-map-marked-alt"></i> Interactive Map</a
                  >
                  <a href="#monasteries"
                    ><i class="fas fa-landmark"></i> Featured Monasteries</a
                  >
                  <a href="#archive"
                    ><i class="fas fa-archive"></i> Digital Archive</a
                  >
                </div>
              </div>
              <div class="mega-col">
                <h4>Quick Access</h4>
                <div class="mega-links">
                  <a href="#research"><i class="fas fa-book"></i> Research</a>
                  <a href="#about"><i class="fas fa-info-circle"></i> About</a>
                  <a href="#tours"><i class="fas fa-calendar"></i> Festivals</a>
                  <a href="#archive"
                    ><i class="fas fa-scroll"></i> Manuscripts</a
                  >
                </div>
              </div>
            </div>
          </li>
        </ul>
        <div class="nav-actions">
          <button
            class="ai-assistant-toggle"
            aria-label="AI Assistant"
            title="AI Assistant"
          >
            <i class="fas fa-robot"></i>
          </button>
          <button
            class="festival-calendar-toggle"
            aria-label="Festival Calendar"
            title="Sikkim Festival Calendar"
          >
            <i class="fas fa-calendar-alt"></i>
          </button>
          <button class="search-toggle" aria-label="Open search" title="Search">
            <i class="fas fa-search"></i>
          </button>
          <div
            class="mobile-toggle"
            aria-label="Open menu"
            role="button"
            tabindex="0"
          >
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </div>
    </nav>
    <div
      class="search-overlay"
      aria-modal="true"
      role="dialog"
      aria-hidden="true"
    >
      <div class="search-box">
        <input
          class="search-input"
          type="search"
          placeholder="Search monasteries, tours, manuscripts..."
          aria-label="Search"
        />
        <div class="search-hints">
          <i class="fas fa-lightbulb"></i> Try: "Nyingma monasteries near
          Gangtok"
        </div>
      </div>
    </div>

    <!-- AI Chat Box -->
    <div
      class="ai-chat-overlay"
      id="aiChatBox"
      aria-modal="true"
      role="dialog"
      aria-hidden="true"
    >
      <div class="ai-chat-header">
        <div class="ai-chat-title">
          <i class="fas fa-robot"></i>
          SIDDHARTH
        </div>
        <button class="ai-chat-close" id="aiChatClose" aria-label="Close chat">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="ai-chat-messages" id="aiChatMessages">
        <div class="ai-message">
          <b>AI:</b> Namaste! I'm your friendly AI travel assistant Sid powered
          by Mistral AI for Sacred Sikkim. I can help you plan your monastery
          tour, suggest itineraries, recommend accommodations, and provide
          travel tips. I can assist you in English and Hindi languages with a
          natural, friendly approach.  **Quick Start**: Try asking "plan
          tour", "3 days", "5 days", or "accommodation"  **Monasteries**: Ask
          about "Rumtek", "Pemayangtse", or "festivals"  **Budget**: Ask about
          "budget" or "transportation" How can I help plan your Sikkim journey
          today?
        </div>
      </div>
      <div class="ai-chat-input">
        <form class="ai-chat-form" id="aiChatForm">
          <select
            id="aiLang"
            aria-label="Chat language"
            style="
              border: 1px solid rgba(0, 0, 0, 0.2);
              border-radius: 10px;
              padding: 0.6rem 0.8rem;
              background: #fff;
              color: #111;
              font-size: 0.9rem;
            "
          >
            <option value="auto" selected>Language</option>
            <option value="en">English</option>
            <option value="hi">Hindi</option>
          </select>
          <label
            for="aiSpeak"
            style="
              display: flex;
              align-items: center;
              gap: 0.4rem;
              font-size: 0.9rem;
              color: #111;
              background: #fff;
              border: 1px solid rgba(0, 0, 0, 0.2);
              padding: 0.45rem 0.6rem;
              border-radius: 10px;
            "
          >
            <input type="checkbox" id="aiSpeak" /> Speak
          </label>
          <input
            type="text"
            class="ai-chat-input-field"
            id="aiChatInput"
            placeholder="Plan my tour, accommodation, or ask about monasteries..."
          />
          <button
            type="button"
            class="ai-chat-stop"
            id="aiChatStop"
            aria-label="Stop generation"
          >
            <i class="fas fa-stop"></i>
          </button>
          <button
            type="button"
            class="ai-chat-start"
            id="aiChatStart"
            aria-label="Start new response"
            style="
              background: var(--gradient-primary);
              color: white;
              border: none;
              padding: 0.75rem;
              border-radius: 50%;
              cursor: pointer;
              font-size: 0.9rem;
              width: 45px;
              height: 45px;
              display: flex;
              align-items: center;
              justify-content: center;
              transition: all 0.3s ease;
              box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
              margin-left: 0.5rem;
            "
          >
            <i class="fas fa-play"></i>
          </button>
          <button type="submit" class="ai-chat-send" aria-label="Send message">
            <i class="fas fa-paper-plane"></i>
          </button>
        </form>
      </div>
    </div>

    <!-- Festival Calendar Overlay -->
    <div class="festival-calendar-overlay" id="festivalCalendarOverlay">
      <div class="festival-calendar-container">
        <div class="festival-calendar-header">
          <h2> Sikkim Festival Calendar</h2>
          <button class="festival-calendar-close" id="festivalCalendarClose">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="festival-calendar-content" id="festivalCalendarContent">
          <!-- Calendar content will be loaded here -->
        </div>
      </div>
    </div>

    <!-- Hero Section -->
    <section class="hero" id="home">
      <video class="hero-video" autoplay muted loop playsinline>
        <source
          src="../data/images/WhatsApp Video 2025-09-10 at 00.59.10_55d34f5a.mp4"
          type="video/mp4"
        />
      </video>
      <div class="hero-particles"></div>
      <div class="hero-content">
        <h1 class="playfair">Sacred Sikkim</h1>
        <p class="hero-subtitle">
          Journey through the spiritual heritage of the Himalayas. Discover 250+
          monasteries, ancient wisdom, and timeless architecture through
          immersive digital experiences.
        </p>
        <div class="hero-buttons">
          <a href="#map" class="btn btn-primary">
            <i class="fas fa-map-marked-alt"></i>
            Explore Interactive Map
          </a>
        </div>
      </div>
    </section>

    <!-- Stats Section -->
    <section class="stats">
      <div class="container">
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-number" data-count="257">0</div>
            <div class="stat-label">Monasteries Documented</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" data-count="1200">0</div>
            <div class="stat-label">Years of History</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" data-count="15000">0</div>
            <div class="stat-label">Artifacts Digitized</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Features Section -->
    <section class="section features" id="features">
      <div class="container">
        <div class="section-header">
          <h2 class="section-title playfair">Discover Spiritual Heritage</h2>
          <p class="section-subtitle">
            Explore Sikkim's monasteries through cutting-edge digital
            experiences that bring ancient wisdom into the modern world
          </p>
        </div>
        <div class="features-grid">
          <div class="feature-card fade-in">
            <div class="feature-icon">
              <i class="fas fa-map-marked-alt"></i>
            </div>
            <h3 class="feature-title">Interactive Heritage Map</h3>
            <p class="feature-description">
              Navigate through 250+ monasteries with our intelligent mapping
              system. Filter by Buddhist sect, historical period, accessibility,
              elevation, and cultural significance with real-time location data.
            </p>
          </div>

          <div class="feature-card fade-in">
            <div class="feature-icon">
              <i class="fas fa-vr-cardboard"></i>
            </div>
            <h3 class="feature-title">Immersive VR Experiences</h3>
            <p class="feature-description">
              Step inside sacred halls through 360 VR tours. Experience prayer
              ceremonies, examine ancient murals in detail, and feel the
              spiritual atmosphere of these sacred spaces from anywhere in the
              world.
            </p>
          </div>

          <div class="feature-card fade-in">
            <div class="feature-icon">
              <i class="fas fa-scroll"></i>
            </div>
            <h3 class="feature-title">Digital Manuscript Archive</h3>
            <p class="feature-description">
              Access rare Tibetan manuscripts, palm-leaf texts, and historical
              documents. Our high-resolution digitization preserves ancient
              knowledge and makes it searchable for researchers worldwide.
            </p>
          </div>

          <div class="feature-card fade-in">
            <div class="feature-icon">
              <i class="fas fa-building"></i>
            </div>
            <h3 class="feature-title">Architectural Analysis</h3>
            <p class="feature-description">
              Detailed studies of monastic architecture, construction
              techniques, and cultural influences. Compare different styles
              across periods and understand the evolution of Himalayan sacred
              architecture.
            </p>
          </div>

          <div class="feature-card fade-in">
            <div class="feature-icon">
              <i class="fas fa-palette"></i>
            </div>
            <h3 class="feature-title">Sacred Art Gallery</h3>
            <p class="feature-description">
              Ultra-high-resolution photography of thangkas, murals, and
              sculptures with detailed iconographic interpretations. Discover
              the symbolic meanings behind every brushstroke and carving.
            </p>
          </div>

          <div class="feature-card fade-in">
            <div class="feature-icon">
              <i class="fas fa-search"></i>
            </div>
            <h3 class="feature-title">Advanced Discovery Tools</h3>
            <p class="feature-description">
              AI-powered search across all content. Find monasteries by
              historical events, architectural features, resident teachers,
              festival calendars, or spiritual lineages with intelligent
              recommendations.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Interactive Map Section -->
    <section class="section map-section" id="map">
      <div class="container">
        <div class="section-header">
          <h2 class="section-title playfair">Interactive Monastery Map</h2>
          <p class="section-subtitle" style="color: #000000">
            Discover monasteries across Sikkim with our interactive map
            featuring real-time information and tourist-friendly navigation
          </p>
        </div>

        <div class="map-controls">
          <button class="map-filter active" data-filter="all">
            <i class="fas fa-globe"></i> All Monasteries
          </button>
          <button class="map-filter" data-filter="gelug">
            <i class="fas fa-lotus"></i> Gelug Sect
          </button>
          <button class="map-filter" data-filter="kagyu">
            <i class="fas fa-mountain"></i> Kagyu Sect
          </button>
          <button class="map-filter" data-filter="nyingma">
            <i class="fas fa-fire"></i> Nyingma Sect
          </button>
          <button class="map-filter" data-filter="accessible">
            <i class="fas fa-car"></i> Road Accessible
          </button>
          <button class="map-filter" data-filter="hospitality">
            <i class="fas fa-hotel"></i> Hotels & Restaurants
          </button>
        </div>

        <div class="map-container" id="monastery-map"></div>

        <!-- Map Legend -->
        <div
          style="
            margin-top: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 2rem;
            flex-wrap: wrap;
          "
        >
          <!-- Monastery Regions Legend -->
          <div
            style="
              background: white;
              padding: 1.5rem;
              border-radius: 12px;
              box-shadow: var(--shadow-light);
              flex: 1;
              min-width: 300px;
            "
          >
            <h4
              style="
                color: var(--primary-gold);
                margin: 0 0 1rem 0;
                font-size: 1.1rem;
                display: flex;
                align-items: center;
                gap: 0.5rem;
              "
            >
              <i class="fas fa-temple-buddhist"></i> Monastery Regions
            </h4>
            <div
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 0.8rem;
              "
            >
              <div style="display: flex; align-items: center; gap: 0.8rem">
                <div
                  style="
                    width: 20px;
                    height: 20px;
                    background-color: #e74c3c;
                    border-radius: 50%;
                    border: 2px solid white;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
                  "
                ></div>
                <span style="font-size: 0.9rem; color: #333">East Sikkim</span>
              </div>
              <div style="display: flex; align-items: center; gap: 0.8rem">
                <div
                  style="
                    width: 20px;
                    height: 20px;
                    background-color: #3498db;
                    border-radius: 50%;
                    border: 2px solid white;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
                  "
                ></div>
                <span style="font-size: 0.9rem; color: #333">West Sikkim</span>
              </div>
              <div style="display: flex; align-items: center; gap: 0.8rem">
                <div
                  style="
                    width: 20px;
                    height: 20px;
                    background-color: #f39c12;
                    border-radius: 50%;
                    border: 2px solid white;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
                  "
                ></div>
                <span style="font-size: 0.9rem; color: #333">South Sikkim</span>
              </div>
              <div style="display: flex; align-items: center; gap: 0.8rem">
                <div
                  style="
                    width: 20px;
                    height: 20px;
                    background-color: #9b59b6;
                    border-radius: 50%;
                    border: 2px solid white;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
                  "
                ></div>
                <span style="font-size: 0.9rem; color: #333">North Sikkim</span>
              </div>
            </div>
          </div>

          <!-- Hospitality Legend -->
          <div
            style="
              background: white;
              padding: 1.5rem;
              border-radius: 12px;
              box-shadow: var(--shadow-light);
              flex: 1;
              min-width: 300px;
            "
          >
            <h4
              style="
                color: var(--primary-gold);
                margin: 0 0 1rem 0;
                font-size: 1.1rem;
                display: flex;
                align-items: center;
                gap: 0.5rem;
              "
            >
              <i class="fas fa-hotel"></i> Hospitality
            </h4>
            <div
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 0.8rem;
              "
            >
              <div style="display: flex; align-items: center; gap: 0.8rem">
                <div
                  style="
                    width: 20px;
                    height: 20px;
                    background-color: #dc3545;
                    border-radius: 50%;
                    border: 2px solid white;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-size: 10px;
                  "
                >
                  <i class="fas fa-home"></i>
                </div>
                <span style="font-size: 0.9rem; color: #333"
                  >Hotels & Restaurants</span
                >
              </div>
              <div style="display: flex; align-items: center; gap: 0.8rem">
                <div
                  style="
                    width: 20px;
                    height: 20px;
                    background-color: #dc3545;
                    border-radius: 50%;
                    border: 2px solid white;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-size: 10px;
                  "
                >
                  <i class="fas fa-home"></i>
                </div>
                <span style="font-size: 0.9rem; color: #333">Homestays</span>
              </div>
            </div>
          </div>
        </div>

        <div style="margin-top: 2rem; text-align: center">
          <p style="color: var(--text-light)">
            <i class="fas fa-info-circle"></i>
            Click on monastery markers for detailed information, photos, and
            directions. Use filters to find monasteries that match your
            interests and travel plans.
          </p>
        </div>
      </div>
    </section>
    <!-- Monasteries Section -->
    <section class="section monasteries" id="monasteries">
      <div class="container">
        <div class="section-header">
          <h2 class="section-title playfair">Featured Monasteries</h2>
          <p class="section-subtitle">
            Explore the most significant monasteries of Sikkim, each with unique
            history, architecture, and spiritual significance
          </p>
        </div>

        <div class="monastery-grid">
          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('../data/images/Rumtek_monastry.jpg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Rumtek Monastery</h3>
              <p class="monastery-description">
                The Dharma Chakra Centre, seat of the Gyalwa Karmapa and head of
                the Kagyu lineage. Built in the 1960s, it houses precious relics
                and maintains traditional Tibetan architecture with modern
                amenities.
              </p>
              <div class="monastery-tags">
                <span class="tag">Kagyu Sect</span>
                <span class="tag">Founded 1966</span>
                <span class="tag">Main Seat</span>
                <span class="tag">Road Accessible</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a href="#" class="btn btn-primary btn-small">
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('../data/images/Pemayangtse_Monastry.jpg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Pemayangtse Monastery</h3>
              <p class="monastery-description">
                One of Sikkim's oldest and most important Nyingma monasteries,
                founded in 1705. Famous for its seven-tiered wooden sculpture
                depicting Guru Rinpoche's heavenly palace, Zangdok Palri.
              </p>
              <div class="monastery-tags">
                <span class="tag">Nyingma Sect</span>
                <span class="tag">Founded 1705</span>
                <span class="tag">UNESCO Heritage</span>
                <span class="tag">Ancient Art</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a href="#" class="btn btn-primary btn-small">
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('../data/images/Enchey_monastry.jpg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Enchey Monastery</h3>
              <p class="monastery-description">
                Built in 1909 on a site blessed by Lama Drupthob Karpo, this
                Nyingma monastery is famous for the annual Cham dance during the
                Pang Lhabsol festival. Offers panoramic views of Gangtok valley.
              </p>
              <div class="monastery-tags">
                <span class="tag">Nyingma Sect</span>
                <span class="tag">Founded 1909</span>
                <span class="tag">Festival Hub</span>
                <span class="tag">City Views</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a href="#" class="btn btn-primary btn-small">
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('../data/images/Tashiding_Monastry.jpg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Tashiding Monastery</h3>
              <p class="monastery-description">
                Sacred Nyingma monastery built in 1717, believed to be blessed
                by Guru Rinpoche. Famous for the Bhumchu ceremony during Losar,
                where holy water levels predict the coming year's fortune.
              </p>
              <div class="monastery-tags">
                <span class="tag">Nyingma Sect</span>
                <span class="tag">Founded 1717</span>
                <span class="tag">Sacred Site</span>
                <span class="tag">Pilgrimage</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a href="#" class="btn btn-primary btn-small">
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('../data/images/Labrang_monastry.jpg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Labrang Monastery</h3>
              <p class="monastery-description">
                The royal monastery of Sikkim, built in 1814 by the third
                Chogyal. Houses the coronation throne and royal artifacts.
                Features exquisite murals depicting the life of Buddha and
                Sikkimese history.
              </p>
              <div class="monastery-tags">
                <span class="tag">Royal Heritage</span>
                <span class="tag">Founded 1814</span>
                <span class="tag">Palace Complex</span>
                <span class="tag">Historical Murals</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a href="#" class="btn btn-primary btn-small">
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('../data/images/Phensang_monastery.jpg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Phensang Monastery</h3>
              <p class="monastery-description">
                Ancient Kagyu monastery dating to 1721, perched on a hilltop
                offering breathtaking views of the Himalayas. Known for its
                meditation caves and retreat centers where monks practice
                intensive meditation.
              </p>
              <div class="monastery-tags">
                <span class="tag">Kagyu Sect</span>
                <span class="tag">Founded 1721</span>
                <span class="tag">Meditation Center</span>
                <span class="tag">Mountain Views</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a href="#" class="btn btn-primary btn-small">
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
              </div>
            </div>
          </div>
        </div>

        <div style="text-align: center; margin-top: 3rem">
          <a href="#" class="btn btn-primary" id="view-more-monasteries">
            <i class="fas fa-plus"></i>
            View More Monasteries
          </a>
        </div>

        <!-- Hidden Monastery Cards (Initially Hidden) -->
        <div class="monastery-grid hidden" id="more-monasteries">
          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('project sih/new_monasteries/dubdi.jpg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Dubdi Monastery</h3>
              <p class="monastery-description">
                The oldest monastery in Sikkim, established in 1701, known as
                the 'Hermit's Cell'. Located on a hilltop in Yuksom, it offers
                panoramic views of Kanchenjunga and houses ancient Buddhist
                scriptures and artifacts.
              </p>
              <div class="monastery-tags">
                <span class="tag">Nyingma Sect</span>
                <span class="tag">Founded 1701</span>
                <span class="tag">Historical Site</span>
                <span class="tag">Mountain Trek</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a
                  href="#"
                  class="btn btn-primary btn-small monastery-3d-view"
                  data-monastery="Dubdi"
                >
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
                <a
                  href="https://www.google.com/maps/dir/?api=1&destination=Dubdi+Monastery+Sikkim"
                  target="_blank"
                  class="btn btn-secondary btn-small"
                >
                  <i class="fas fa-directions"></i> Directions
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('../data/images/WhatsApp Image 2025-09-13 at 00.06.34_47332faa.jpg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Ralang Monastery</h3>
              <p class="monastery-description">
                A significant Kagyu monastery established in 1768, known for its
                exquisite collection of thangkas and religious paintings. The
                monastery hosts the colorful Pang Lhabsol festival celebrating
                Mount Kanchenjunga.
              </p>
              <div class="monastery-tags">
                <span class="tag">Kagyu Sect</span>
                <span class="tag">Founded 1768</span>
                <span class="tag">Festival Site</span>
                <span class="tag">Art Collection</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a
                  href="#"
                  class="btn btn-primary btn-small monastery-3d-view"
                  data-monastery="Ralang"
                >
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
                <a
                  href="https://www.google.com/maps/dir/?api=1&destination=Ralang+Monastery+Sikkim"
                  target="_blank"
                  class="btn btn-secondary btn-small"
                >
                  <i class="fas fa-directions"></i> Directions
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('project sih/new_monasteries/lingdum.jpg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Lingdum Monastery</h3>
              <p class="monastery-description">
                Also known as Ranka Monastery, this modern Zurmang Kagyud
                monastery was built in the 1990s. It features stunning
                architecture with colorful murals, a large prayer hall, and a
                25-foot statue of Guru Padmasambhava.
              </p>
              <div class="monastery-tags">
                <span class="tag">Kagyu Sect</span>
                <span class="tag">Founded 1990s</span>
                <span class="tag">Modern Complex</span>
                <span class="tag">Giant Statue</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a
                  href="#"
                  class="btn btn-primary btn-small monastery-3d-view"
                  data-monastery="Lingdum"
                >
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
                <a
                  href="https://www.google.com/maps/dir/?api=1&destination=Lingdum+Monastery+Sikkim"
                  target="_blank"
                  class="btn btn-secondary btn-small"
                >
                  <i class="fas fa-directions"></i> Directions
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('../data/images/textile-background-sikkim-13416790.webp');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Sangachoeling Monastery</h3>
              <p class="monastery-description">
                The second oldest monastery in Sikkim, established in 1697,
                known for its ancient Buddhist murals and sculptures. Perched on
                a ridge above Pelling, it offers spectacular views of the
                Himalayan range.
              </p>
              <div class="monastery-tags">
                <span class="tag">Nyingma Sect</span>
                <span class="tag">Founded 1697</span>
                <span class="tag">Ancient Murals</span>
                <span class="tag">Hilltop Views</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a
                  href="#"
                  class="btn btn-primary btn-small monastery-3d-view"
                  data-monastery="Sangachoeling"
                >
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
                <a
                  href="https://www.google.com/maps/dir/?api=1&destination=Sangachoeling+Monastery+Sikkim"
                  target="_blank"
                  class="btn btn-secondary btn-small"
                >
                  <i class="fas fa-directions"></i> Directions
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('project sih/new_monasteries/gojang.jpg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Gojang Monastery</h3>
              <p class="monastery-description">
                A relatively new monastery established in 1981, known for its
                beautiful architecture and serene atmosphere. Located near
                Gangtok, it houses important Buddhist scriptures and hosts
                annual Chaam dance ceremonies.
              </p>
              <div class="monastery-tags">
                <span class="tag">Nyingma Sect</span>
                <span class="tag">Founded 1981</span>
                <span class="tag">Modern Design</span>
                <span class="tag">Ritual Dances</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a
                  href="#"
                  class="btn btn-primary btn-small monastery-3d-view"
                  data-monastery="Gonjang"
                >
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
                <a
                  href="https://www.google.com/maps/dir/?api=1&destination=Gonjang+Monastery+Sikkim"
                  target="_blank"
                  class="btn btn-secondary btn-small"
                >
                  <i class="fas fa-directions"></i> Directions
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('../data/images/bg1.jpg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Karma Kagyu Monastery</h3>
              <p class="monastery-description">
                Located in Phodong, this monastery was built in the early 18th
                century and rebuilt in 1908. It's known for its collection of
                ancient Buddhist manuscripts and traditional Tibetan
                architecture with intricate woodwork.
              </p>
              <div class="monastery-tags">
                <span class="tag">Kagyu Sect</span>
                <span class="tag">Founded 1740</span>
                <span class="tag">Rebuilt 1908</span>
                <span class="tag">Manuscript Collection</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a
                  href="#"
                  class="btn btn-primary btn-small monastery-3d-view"
                  data-monastery="Karma"
                >
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
                <a
                  href="https://www.google.com/maps/dir/?api=1&destination=Karma+Kagyu+Monastery+Phodong+Sikkim"
                  target="_blank"
                  class="btn btn-secondary btn-small"
                >
                  <i class="fas fa-directions"></i> Directions
                </a>
              </div>
            </div>
          </div>

          <!-- Recently Added Monasteries -->
          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('../data/images/bg2.jpg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Phodong Monastery</h3>
              <p class="monastery-description">
                A significant Nyingma monastery established in 1740, rebuilt in
                1908. Known for its beautiful murals depicting the life of
                Buddha and traditional Tibetan architecture. Houses important
                Buddhist scriptures and serves as a center for religious
                education.
              </p>
              <div class="monastery-tags">
                <span class="tag">Nyingma Sect</span>
                <span class="tag">Founded 1740</span>
                <span class="tag">Rebuilt 1908</span>
                <span class="tag">Educational Center</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a
                  href="#"
                  class="btn btn-primary btn-small monastery-3d-view"
                  data-monastery="Phodong"
                >
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
                <a
                  href="https://www.google.com/maps/dir/?api=1&destination=Phodong+Monastery+Sikkim"
                  target="_blank"
                  class="btn btn-secondary btn-small"
                >
                  <i class="fas fa-directions"></i> Directions
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('../data/images/bg3.jpg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Lachung Monastery</h3>
              <p class="monastery-description">
                Located in the picturesque Lachung valley at 2,600m altitude,
                this monastery was established in 1880. Known for its stunning
                location surrounded by snow-capped peaks and its collection of
                ancient Buddhist texts and artifacts.
              </p>
              <div class="monastery-tags">
                <span class="tag">Nyingma Sect</span>
                <span class="tag">Founded 1880</span>
                <span class="tag">High Altitude</span>
                <span class="tag">Valley Location</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a
                  href="#"
                  class="btn btn-primary btn-small monastery-3d-view"
                  data-monastery="Lachung"
                >
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
                <a
                  href="https://www.google.com/maps/dir/?api=1&destination=Lachung+Monastery+Sikkim"
                  target="_blank"
                  class="btn btn-secondary btn-small"
                >
                  <i class="fas fa-directions"></i> Directions
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('../data/images/hm.jpeg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Yuksom Monastery</h3>
              <p class="monastery-description">
                Built in 1642, this historic monastery marks the coronation site
                of the first Chogyal of Sikkim. Located in the ancient capital
                Yuksom, it houses the coronation throne and serves as a
                pilgrimage site for Buddhists and history enthusiasts.
              </p>
              <div class="monastery-tags">
                <span class="tag">Nyingma Sect</span>
                <span class="tag">Founded 1642</span>
                <span class="tag">Historic Site</span>
                <span class="tag">Coronation Site</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a
                  href="#"
                  class="btn btn-primary btn-small monastery-3d-view"
                  data-monastery="Yuksom"
                >
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
                <a
                  href="https://www.google.com/maps/dir/?api=1&destination=Yuksom+Monastery+Sikkim"
                  target="_blank"
                  class="btn btn-secondary btn-small"
                >
                  <i class="fas fa-directions"></i> Directions
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('project sih/new_monasteries/namchi.jpg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Namchi Monastery</h3>
              <p class="monastery-description">
                A modern monastery complex established in 2004, featuring the
                world's tallest statue of Guru Padmasambhava (135 feet). Located
                in Namchi, it offers panoramic views of the Himalayas and serves
                as a major pilgrimage destination.
              </p>
              <div class="monastery-tags">
                <span class="tag">Nyingma Sect</span>
                <span class="tag">Founded 2004</span>
                <span class="tag">Modern Complex</span>
                <span class="tag">Giant Statue</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a
                  href="#"
                  class="btn btn-primary btn-small monastery-3d-view"
                  data-monastery="Namchi"
                >
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
                <a
                  href="https://www.google.com/maps/dir/?api=1&destination=Namchi+Monastery+Sikkim"
                  target="_blank"
                  class="btn btn-secondary btn-small"
                >
                  <i class="fas fa-directions"></i> Directions
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('../data/images/sac.jpeg');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Ravangla Monastery</h3>
              <p class="monastery-description">
                Established in 1995, this monastery is famous for its annual
                Pang Lhabsol festival and its location near the Buddha Park.
                Known for its peaceful atmosphere and beautiful architecture, it
                serves as a meditation retreat center.
              </p>
              <div class="monastery-tags">
                <span class="tag">Kagyu Sect</span>
                <span class="tag">Founded 1995</span>
                <span class="tag">Festival Site</span>
                <span class="tag">Meditation Center</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a
                  href="#"
                  class="btn btn-primary btn-small monastery-3d-view"
                  data-monastery="Ravangla"
                >
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
                <a
                  href="https://www.google.com/maps/dir/?api=1&destination=Ravangla+Monastery+Sikkim"
                  target="_blank"
                  class="btn btn-secondary btn-small"
                >
                  <i class="fas fa-directions"></i> Directions
                </a>
              </div>
            </div>
          </div>

          <div class="monastery-card fade-in">
            <div
              class="monastery-image"
              style="
                background-image: url('../data/images/am.png');
                background-size: cover;
                background-position: center;
              "
            ></div>
            <div class="monastery-content">
              <h3 class="monastery-title">Zongri Monastery</h3>
              <p class="monastery-description">
                A remote monastery established in 1850, located at high altitude
                in West Sikkim. Known for its traditional architecture and its
                role in preserving ancient Buddhist practices. Accessible only
                by trekking, it offers a truly authentic monastic experience.
              </p>
              <div class="monastery-tags">
                <span class="tag">Nyingma Sect</span>
                <span class="tag">Founded 1850</span>
                <span class="tag">Remote Location</span>
                <span class="tag">Trekking Required</span>
              </div>
              <div class="monastery-actions">
                <div class="btn-label">3D View</div>
                <a
                  href="#"
                  class="btn btn-primary btn-small monastery-3d-view"
                  data-monastery="Zongri"
                >
                  <i class="fas fa-vr-cardboard"></i> 3D View
                </a>
                <a
                  href="https://www.google.com/maps/dir/?api=1&destination=Zongri+Monastery+Sikkim"
                  target="_blank"
                  class="btn btn-secondary btn-small"
                >
                  <i class="fas fa-directions"></i> Directions
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Digital Archive Section -->
    <section class="section archive" id="archive">
      <div class="container">
        <div class="section-header">
          <h2 class="section-title playfair">Digital Archive</h2>
          <p class="section-subtitle" style="color: #000000">
            Preserving millennia of Buddhist wisdom through advanced
            digitization and scholarly research
          </p>
        </div>

        <div class="archive-categories">
          <div
            class="archive-category fade-in"
            data-images='["../data/archive/digital_archive_assets/manuscripts/m1.jpg", "../data/archive/digital_archive_assets/manuscripts/m2.jpg", "../data/archive/digital_archive_assets/manuscripts/m3.jpg", "../data/archive/digital_archive_assets/manuscripts/m4.jpg", "../data/archive/digital_archive_assets/manuscripts/m5.jpg"]'
          >
            <div class="archive-image">
              <img src="../am.png" alt="Ancient Manuscript" />
            </div>
            <h3 class="archive-title">Ancient Manuscripts</h3>
            <p class="archive-description">
              Tibetan texts, Sanskrit palm-leaf manuscripts, and Sikkimese
              historical records dating back to the 8th century.
            </p>
            <div class="archive-carousel"></div>
          </div>

          <div
            class="archive-category fade-in"
            data-images='["../data/archive/digital_archive_assets/historical/h1.JPG", "../data/archive/digital_archive_assets/historical/h2.jpg", "../data/archive/digital_archive_assets/historical/h3.jpg", "../data/archive/digital_archive_assets/historical/h4.jpg", "../data/archive/digital_archive_assets/historical/h5.jpg"]'
          >
            <div class="archive-image">
              <img src="../data/images/hp.jpeg" alt="Historical Photograph" />
            </div>
            <h3 class="archive-title">Historical Photographs</h3>
            <p class="archive-description">
              Rare photographs from British colonial period, royal ceremonies,
              and monastic life spanning 150+ years.
            </p>
            <div class="archive-carousel"></div>
          </div>

          <div
            class="archive-category fade-in"
            data-images='["../data/archive/digital_archive_assets/Sacred_art/1.jpg", "../data/archive/digital_archive_assets/Sacred_art/2.jpg", "../data/archive/digital_archive_assets/Sacred_art/3.jpg", "../data/archive/digital_archive_assets/Sacred_art/4.jpg", "../data/archive/digital_archive_assets/Sacred_art/5.jpg"]'
          >
            <div class="archive-image">
              <img src="../data/images/sac.jpeg" alt="Sacred Art" />
            </div>
            <h3 class="archive-title">Sacred Art Collection</h3>
            <p class="archive-description">
              Thangkas, murals, sculptures, and ritual objects with detailed
              iconographic analysis and cultural context.
            </p>
            <div class="archive-carousel"></div>
          </div>

          <div
            class="archive-category fade-in"
            data-images='["../data/archive/digital_archive_assets/his_maps/ma1.jpg", "../data/archive/digital_archive_assets/his_maps/ma2.jpg", "../data/archive/digital_archive_assets/his_maps/ma3.jpg", "../data/archive/digital_archive_assets/his_maps/ma4.jpg", "../data/archive/digital_archive_assets/his_maps/ma5.jpg"]'
          >
            <div class="archive-image">
              <img src="../data/images/hm.jpeg" alt="Historical Map" />
            </div>
            <h3 class="archive-title">Historical Maps</h3>
            <p class="archive-description">
              Ancient trade routes, pilgrimage paths, territorial boundaries,
              and monastery foundation records.
            </p>
            <div class="archive-carousel"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Research Section -->
    <section
      class="section research"
      id="research"
      style="
        background: linear-gradient(rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.25)),
          url('../data/images/bg3.jpg') center/cover no-repeat;
      "
    >
      <div class="container">
        <div class="section-header">
          <h2 class="section-title playfair">Research & Publications</h2>
          <p class="section-subtitle">
            Scholarly research and academic publications exploring the rich
            heritage of Sikkim's monastic traditions
          </p>
        </div>

        <div class="research-grid">
          <div class="research-paper fade-in">
            <h3 class="research-title">
              Architectural Evolution of Sikkimese Monasteries: A Comparative
              Study
            </h3>
            <div class="research-author">
              Dr. Tenzin Norbu, Sikkim University
            </div>
            <div class="research-date">Published: March 2024</div>
            <p class="research-abstract">
              This comprehensive study examines the architectural development of
              monastic structures in Sikkim from the 17th to 21st centuries,
              analyzing influences from Tibetan, Nepalese, and indigenous Lepcha
              traditions. The research includes detailed structural analysis of
              47 major monasteries...
            </p>
            <a
              href="https://scholar.google.com/scholar?q=Architectural+Evolution+of+Sikkimese+Monasteries:+A+Comparative+Study"
              target="_blank"
              rel="noopener"
              class="btn btn-secondary btn-small"
              style="margin-top: 1rem"
            >
              <i class="fas fa-file-pdf"></i> Read Full Paper
            </a>
          </div>

          <div class="research-paper fade-in">
            <h3 class="research-title">
              Digital Preservation of Tibetan Manuscripts: Challenges and
              Solutions
            </h3>
            <div class="research-author">
              Prof. Sarah Chen, Harvard University
            </div>
            <div class="research-date">Published: January 2024</div>
            <p class="research-abstract">
              An analysis of advanced digitization techniques for preserving
              ancient Tibetan manuscripts, including spectral imaging, 3D
              scanning, and AI-assisted text recognition. The study presents
              innovative methods for handling fragile documents while
              maintaining scholarly accessibility...
            </p>
            <a
              href="https://scholar.google.com/scholar?q=Digital+Preservation+of+Tibetan+Manuscripts:+Challenges+and+Solutions"
              target="_blank"
              rel="noopener"
              class="btn btn-secondary btn-small"
              style="margin-top: 1rem"
            >
              <i class="fas fa-external-link-alt"></i> View Research
            </a>
          </div>

          <div class="research-paper fade-in">
            <h3 class="research-title">
              Ritual Symbolism in Nyingma Monastery Murals
            </h3>
            <div class="research-author">
              Dr. Karma Wangchuk, Tibet University
            </div>
            <div class="research-date">Published: November 2023</div>
            <p class="research-abstract">
              A detailed iconographic analysis of mural paintings in Nyingma
              monasteries across Sikkim, exploring the symbolic representations
              of Buddhist deities, cosmic diagrams, and ritual practices. The
              study includes high-resolution documentation of previously
              unstudied artworks...
            </p>
            <a
              href="https://scholar.google.com/scholar?q=Ritual+Symbolism+in+Nyingma+Monastery+Murals"
              target="_blank"
              rel="noopener"
              class="btn btn-secondary btn-small"
              style="margin-top: 1rem"
            >
              <i class="fas fa-images"></i> View Gallery
            </a>
          </div>

          <div class="research-paper fade-in">
            <h3 class="research-title">
              Climate Change Impacts on High-Altitude Monasteries
            </h3>
            <div class="research-author">Dr. Pemba Sherpa, ICIMOD</div>
            <div class="research-date">Published: September 2023</div>
            <p class="research-abstract">
              This environmental study documents the effects of climate change
              on monastery structures and practices in high-altitude regions of
              Sikkim. The research provides recommendations for conservation
              strategies and adaptive practices for monastic communities...
            </p>
            <a
              href="https://scholar.google.com/scholar?q=Climate+Change+Impacts+on+High-Altitude+Monasteries"
              target="_blank"
              rel="noopener"
              class="btn btn-secondary btn-small"
              style="margin-top: 1rem"
            >
              <i class="fas fa-leaf"></i> Conservation Report
            </a>
          </div>

          <div class="research-paper fade-in">
            <h3 class="research-title">
              Women in Sikkimese Buddhist Monasticism
            </h3>
            <div class="research-author">
              Dr. Diki Sherpa, Jawaharlal Nehru University
            </div>
            <div class="research-date">Published: June 2023</div>
            <p class="research-abstract">
              An anthropological study examining the role of women in Buddhist
              monasticism in Sikkim, including the establishment of nunneries,
              female religious leadership, and changing gender dynamics in
              contemporary monastic practice...
            </p>
            <a
              href="https://scholar.google.com/scholar?q=Women+in+Sikkimese+Buddhist+Monasticism"
              target="_blank"
              rel="noopener"
              class="btn btn-secondary btn-small"
              style="margin-top: 1rem"
            >
              <i class="fas fa-book-open"></i> Full Study
            </a>
          </div>

          <div class="research-paper fade-in">
            <h3 class="research-title">
              Tourism and Monastic Heritage: Sustainable Development Models
            </h3>
            <div class="research-author">
              Prof. Michael Thompson, Oxford University
            </div>
            <div class="research-date">Published: April 2023</div>
            <p class="research-abstract">
              This policy research examines sustainable tourism models that
              balance economic development with heritage preservation in
              Sikkim's monastery regions. The study proposes community-based
              tourism frameworks that benefit local communities while protecting
              sacred sites...
            </p>
            <a
              href="https://scholar.google.com/scholar?q=Tourism+and+Monastic+Heritage:+Sustainable+Development+Models"
              target="_blank"
              rel="noopener"
              class="btn btn-secondary btn-small"
              style="margin-top: 1rem"
            >
              <i class="fas fa-chart-line"></i> Policy Brief
            </a>
          </div>
        </div>

        <div
          style="
            background: var(--bg-light);
            padding: 3rem;
            border-radius: 20px;
            text-align: center;
            margin-top: 3rem;
          "
        >
          <h3 style="margin-bottom: 1rem; color: var(--text-dark)">
            Contribute to Research
          </h3>
          <p style="margin-bottom: 2rem; color: var(--text-light)">
            Join our global network of researchers, scholars, and practitioners.
            Submit your research, access our data, or collaborate on new
            projects.
          </p>
          <div
            style="
              display: flex;
              gap: 1rem;
              justify-content: center;
              flex-wrap: wrap;
            "
          >
            <a href="#" class="btn btn-primary">
              <i class="fas fa-plus"></i> Submit Research
            </a>
            <a href="#" class="btn btn-secondary">
              <i class="fas fa-database"></i> Access Data
            </a>
            <a href="#" class="btn btn-secondary">
              <i class="fas fa-users"></i> Join Network
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section class="about-section" id="about">
      <!-- Animated Background Elements -->
      <div class="about-bg-elements">
        <div class="floating-element element-1"></div>
        <div class="floating-element element-2"></div>
        <div class="floating-element element-3"></div>
        <div class="floating-element element-4"></div>
        <div class="floating-element element-5"></div>
      </div>

      <!-- Sikkim Traditional Doodles -->
      <div class="sikkim-doodles">
        <div class="doodle-element"></div>
        <div class="doodle-element"></div>
        <div class="doodle-element"></div>
        <div class="doodle-element"></div>
        <div class="doodle-element"></div>
        <div class="doodle-element"></div>
        <div class="doodle-element"></div>
        <div class="doodle-element"></div>
      </div>

      <!-- Additional Animated Emojis -->
      <div class="animated-emojis">
        <div class="emoji-small"></div>
        <div class="emoji-small"></div>
        <div class="emoji-small"></div>
        <div class="emoji-small"></div>
        <div class="emoji-small"></div>
        <div class="emoji-small"></div>
        <div class="emoji-small"></div>
        <div class="emoji-small"></div>
        <div class="emoji-small"></div>
        <div class="emoji-small"></div>
        <div class="emoji-small"></div>
        <div class="emoji-small"></div>
      </div>

      <div class="container">
        <!-- Title with Typewriter Effect -->
        <div class="section-header about-header">
          <h2 class="section-title playfair typewriter-text">
            About Sacred Sikkim
          </h2>
          <p class="section-subtitle fade-in-text" style="color: #000000">
            Preserving and sharing the spiritual heritage of the Himalayas
            through innovative digital technology
          </p>
          <div class="title-underline"></div>
        </div>

        <!-- Cards with Staggered Animation -->
        <div class="about-cards-container">
          <div
            class="about-card mission-card"
            data-aos="fade-right"
            data-aos-delay="100"
          >
            <div class="card-icon"></div>
            <h3 class="card-title">Our Mission</h3>
            <div class="card-content">
              <p class="card-text">
                Sacred Sikkim is a collaborative digital heritage project
                dedicated to documenting, preserving, and sharing the rich
                monastic traditions of Sikkim. We work with local communities,
                international scholars, and technology partners to create
                immersive experiences that make ancient wisdom accessible to the
                modern world.
              </p>
              <p class="card-text">
                Our goal is to ensure that future generations can explore,
                study, and appreciate the spiritual and cultural treasures of
                the Himalayas, regardless of geographical barriers or physical
                accessibility limitations.
              </p>
            </div>
            <div class="card-glow"></div>
          </div>

          <a
            href="file:///P:/project%20sih/interactive_map/about.html"
            class="about-card vision-card"
            data-aos="fade-left"
            data-aos-delay="200"
            style="text-decoration: none; color: inherit"
          >
            <div class="card-icon"></div>
            <h3 class="card-title">Explore Sikkim</h3>
            <div class="card-content">
              <p class="card-text">
                Discover the enchanting beauty of Sikkim through our interactive
                map. Explore the four districts of Sikkim with their unique
                attractions, cultural heritage, and natural wonders.
              </p>

              <div
                style="
                  margin: 1rem 0;
                  display: grid;
                  grid-template-columns: 1fr 1fr;
                  gap: 0.5rem;
                  font-size: 0.9rem;
                "
              >
                <div style="display: flex; align-items: center; gap: 0.5rem">
                  <div
                    style="
                      width: 12px;
                      height: 12px;
                      background: #e74c3c;
                      border-radius: 50%;
                    "
                  ></div>
                  <span>North Sikkim</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem">
                  <div
                    style="
                      width: 12px;
                      height: 12px;
                      background: #3498db;
                      border-radius: 50%;
                    "
                  ></div>
                  <span>East Sikkim</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem">
                  <div
                    style="
                      width: 12px;
                      height: 12px;
                      background: #2ecc71;
                      border-radius: 50%;
                    "
                  ></div>
                  <span>West Sikkim</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem">
                  <div
                    style="
                      width: 12px;
                      height: 12px;
                      background: #f39c12;
                      border-radius: 50%;
                    "
                  ></div>
                  <span>South Sikkim</span>
                </div>
              </div>

              <p class="card-text">
                From the high-altitude wonderland of North Sikkim to the
                cultural heart of East Sikkim, explore monasteries, lakes,
                valleys, and the majestic Kanchenjunga peak.
              </p>

              <div style="margin-top: 1rem; text-align: center">
                <span
                  style="
                    background: linear-gradient(135deg, #d2691e, #cd853f);
                    color: white;
                    padding: 0.5rem 1rem;
                    border-radius: 25px;
                    font-weight: 600;
                    display: inline-block;
                  "
                >
                  Explore Interactive Map 
                </span>
              </div>
            </div>
            <div class="card-glow"></div>
          </a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h3><i class="fas fa-mountain"></i> Sacred Sikkim</h3>
            <p style="color: #9ca3af; line-height: 1.6; margin-bottom: 1.5rem">
              Preserving and sharing the spiritual heritage of Sikkim's
              monasteries through innovative digital experiences and scholarly
              research.
            </p>
            <div style="display: flex; gap: 1rem">
              <a href="#" style="color: var(--primary-gold); font-size: 1.2rem"
                ><i class="fab fa-facebook"></i
              ></a>
              <a href="#" style="color: var(--primary-gold); font-size: 1.2rem"
                ><i class="fab fa-twitter"></i
              ></a>
              <a href="#" style="color: var(--primary-gold); font-size: 1.2rem"
                ><i class="fab fa-instagram"></i
              ></a>
              <a href="#" style="color: var(--primary-gold); font-size: 1.2rem"
                ><i class="fab fa-youtube"></i
              ></a>
            </div>
          </div>

          <div class="footer-section">
            <h3>Explore</h3>
            <a href="#monasteries"
              ><i class="fas fa-building"></i> Monasteries</a
            >
            <a href="#map"><i class="fas fa-map"></i> Interactive Map</a>
            <a href="#archive"
              ><i class="fas fa-archive"></i> Digital Archive</a
            >
            <a href="#research"><i class="fas fa-book"></i> Research</a>
          </div>

          <div class="footer-section">
            <h3>Learn</h3>
            <a href="#"><i class="fas fa-history"></i> Buddhist History</a>
            <a href="#"
              ><i class="fas fa-drafting-compass"></i> Architecture Guide</a
            >
            <a href="#"><i class="fas fa-palette"></i> Sacred Art</a>
            <a href="#"
              ><i class="fas fa-graduation-cap"></i> Educational Resources</a
            >
            <a href="#"><i class="fas fa-language"></i> Tibetan Language</a>
          </div>

          <div class="footer-section">
            <h3>Contribute</h3>
            <a href="#"><i class="fas fa-plus"></i> Submit Content</a>
            <a href="#"><i class="fas fa-camera"></i> Donate Photos</a>
            <a href="#"><i class="fas fa-hands-helping"></i> Volunteer</a>
            <a href="#"><i class="fas fa-donate"></i> Support Project</a>
            <a href="#"><i class="fas fa-users"></i> Join Community</a>
          </div>

          <div class="footer-section">
            <h3>Connect</h3>
            <a href="#"><i class="fas fa-envelope"></i> Newsletter</a>
            <a href="#"><i class="fas fa-phone"></i> Contact Us</a>
            <a href="#"><i class="fas fa-info-circle"></i> About Team</a>
            <a href="#"><i class="fas fa-shield-alt"></i> Privacy Policy</a>
            <a href="#"><i class="fas fa-balance-scale"></i> Terms of Use</a>
          </div>
        </div>

        <div class="footer-bottom">
          <p>
            &copy; 2025 Sacred Sikkim Digital Heritage Project. Preserving
            spiritual culture for future generations.
          </p>
          <p style="margin-top: 0.5rem; font-size: 0.9rem">
            Built with  for the preservation of Himalayan Buddhist heritage.
          </p>
        </div>
      </div>
    </footer>

    <!-- Monastery Modal -->
    <div class="modal-overlay" id="monasteryModal">
      <div class="modal-content">
        <div class="modal-header">
          <button class="modal-close" id="closeModal">&times;</button>
          <h2 class="modal-title" id="modalTitle">Monastery Details</h2>
          <p class="modal-subtitle" id="modalSubtitle">
            Discover the rich heritage and spiritual significance
          </p>
        </div>
        <div class="modal-body">
          <div class="modal-image" id="modalImage"></div>
          <div class="modal-3d-view" id="modal3DView" style="display: none">
            <iframe
              src=""
              width="100%"
              height="300"
              style="border: 0; border-radius: 15px"
              allowfullscreen=""
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
            ></iframe>
          </div>
          <p class="modal-description" id="modalDescription">
            This monastery holds deep spiritual significance in the Himalayan
            region, serving as a center for Buddhist learning, meditation, and
            cultural preservation.
          </p>
          <div class="modal-features">
            <div class="feature-item">
              <div class="feature-icon"></div>
              <div class="feature-title">Architecture</div>
              <div class="feature-desc">
                Traditional Tibetan design with modern amenities
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon"></div>
              <div class="feature-title">Spiritual Practice</div>
              <div class="feature-desc">
                Daily prayers, meditation, and religious ceremonies
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon"></div>
              <div class="feature-title">Cultural Events</div>
              <div class="feature-desc">
                Annual festivals and traditional dance performances
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon"></div>
              <div class="feature-title">Education</div>
              <div class="feature-desc">
                Buddhist philosophy and traditional arts training
              </div>
            </div>
          </div>
          <div class="modal-actions">
            <a href="#" class="btn btn-primary" id="modalDirectionsBtn">
              <i class="fas fa-map-marker-alt"></i> Get Directions
            </a>
            <a href="#" class="btn btn-secondary">
              <i class="fas fa-calendar"></i> Plan Visit
            </a>
            <a href="#" class="btn btn-outline">
              <i class="fas fa-share"></i> Share
            </a>
          </div>
        </div>
      </div>
    </div>
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
    <script>
      // Monastery data for the map with detailed historic and geographic information
      const monasteryData = [
        {
          name: "Rumtek Monastery",
          lat: 27.3389,
          lng: 88.55,
          sect: "kagyu",
          region: "East Sikkim",
          regionColor: "#e74c3c",
          founded: 1966,
          accessible: true,
          description: "The Dharma Chakra Centre, seat of the Gyalwa Karmapa",
          significance: "Main seat of Kagyu lineage",
          elevation: "1550m",
          history:
            "Built by the 16th Karmapa Rangjung Rigpe Dorje in 1966 as the main seat of the Karma Kagyu lineage outside Tibet. The monastery was constructed to replicate the original Tsurphu Monastery in Tibet. It houses precious relics including the Black Crown of the Karmapa and golden stupas containing the relics of previous Karmapas.",
          geography:
            "Located 24km from Gangtok on a hilltop overlooking the Rangeet River valley. The monastery sits on a south-facing slope of the Himalayan foothills, surrounded by dense forests of oak, rhododendron, and bamboo. The location was chosen for its serene environment and strategic position controlling the ancient trade route between Sikkim and Tibet.",
          architecture:
            "Traditional Tibetan architecture with modern reinforcements. The main temple features intricate woodwork, golden roofs, and elaborate murals depicting the life of Buddha and Kagyu lineage masters. The complex includes the main shrine hall, monks' quarters, library, and meditation halls.",
          culturalInfo:
            "Houses over 300 monks and serves as a major center for Buddhist learning. The monastery hosts the annual Kagyu Monlam Chenmo prayer festival and is famous for its sacred dance performances during Tibetan New Year.",
          nearbyLandmarks: "Martam village, Rangeet River, Ranipool town",
          bestTime: "October to May for clear mountain views",
          specialEvents: "Tibetan New Year (Feb/Mar), Kagyu Monlam (Dec/Jan)",
        },
        {
          name: "Pemayangtse Monastery",
          lat: 27.2951,
          lng: 88.2183,
          sect: "nyingma",
          region: "West Sikkim",
          regionColor: "#3498db",
          founded: 1705,
          accessible: true,
          description:
            "One of Sikkim's oldest and most important Nyingma monasteries",
          significance: "UNESCO World Heritage candidate",
          elevation: "2085m",
          history:
            "Founded in 1705 by Lama Lhatsun Chempo, one of the three learned lamas who came from Tibet to establish Buddhism in Sikkim. The monastery was built under the patronage of Chogyal Chakdor Namgyal. It served as the head monastery of the Nyingma sect in Sikkim and played a crucial role in the political and religious history of the kingdom.",
          geography:
            "Perched on a hilltop near Pelling in West Sikkim, offering panoramic views of the Kanchenjunga range and surrounding valleys. The monastery overlooks the Rabdentse ruins, the former capital of Sikkim. Located at the confluence of several mountain streams, the area is known for its rich biodiversity and medicinal plants.",
          architecture:
            "Three-story traditional Tibetan structure with the famous seven-tiered wooden sculpture 'Zangdok Palri' (Guru Rinpoche's Celestial Palace) on the top floor. The monastery features ancient murals, hand-carved wooden artifacts, and rare manuscripts. The main prayer hall houses statues of Guru Rinpoche, Buddha, and other Buddhist deities.",
          culturalInfo:
            "Literally means 'Perfect Sublime Lotus' - only pure Tibetan monks of unmixed lineage were allowed to become monks here. Houses rare Tibetan texts and maintains strict monastic traditions.",
          nearbyLandmarks:
            "Rabdentse Palace ruins, Sangachoeling Monastery, Khecheopalri Lake",
          bestTime: "March to May and September to November",
          specialEvents:
            "Cham dance during Pang Lhabsol festival (August/September)",
        },
        {
          name: "Enchey Monastery",
          lat: 27.3314,
          lng: 88.6138,
          sect: "nyingma",
          region: "East Sikkim",
          regionColor: "#e74c3c",
          founded: 1909,
          accessible: true,
          description:
            "Famous for annual Cham dance during Pang Lhabsol festival",
          significance: "Festival hub with city views",
          elevation: "1840m",
          history:
            "Built in 1909 by Lama Drupthob Karpo on a site blessed by him with tantric powers. The location was chosen after the lama performed flying meditation from Maenam Hill to this spot. The monastery replaced an earlier hermitage and became a center for tantric practices and ritual ceremonies.",
          geography:
            "Located on a ridge above Gangtok city, offering spectacular views of the Kanchenjunga range and Gangtok valley. The monastery sits amidst a grove of pine and rhododendron trees, creating a peaceful environment despite its proximity to the capital. The location provides natural protection from strong winds and receives optimal sunlight throughout the day.",
          architecture:
            "Single-story traditional structure with modern additions. The prayer hall features beautiful frescoes depicting Buddhist deities and the monastery's history. The compound includes monks' quarters, a library, and meditation rooms. The main attraction is the large prayer wheel and the collection of ancient masks used in ritual dances.",
          culturalInfo:
            "Famous for the colorful Cham dance performed during the Pang Lhabsol festival, celebrating the guardian deity of Sikkim. The monastery maintains a rich tradition of sacred mask dances and serves as a major cultural center for Gangtok residents.",
          nearbyLandmarks:
            "Gangtok city center, Ridge Park, Lukshyama Building",
          bestTime:
            "Year-round, but August-September for Pang Lhabsol festival",
          specialEvents:
            "Pang Lhabsol festival (August/September), Losar (February/March)",
        },
        {
          name: "Tashiding Monastery",
          lat: 27.3167,
          lng: 88.2667,
          sect: "nyingma",
          region: "West Sikkim",
          regionColor: "#3498db",
          founded: 1717,
          accessible: false,
          description: "Sacred Nyingma monastery blessed by Guru Rinpoche",
          significance: "Major pilgrimage site",
          elevation: "1465m",
          history:
            "Founded in 1717 by Ngadak Sempa Chempo Phunshok Rigzing, built on a conical hilltop believed to be blessed by Guru Rinpoche in the 8th century. Legend says Guru Rinpoche shot an arrow from Bumchu rock, and where it landed became the monastery site. The monastery holds the sacred Bumchu (holy water) ceremony, predicting the year's fortune based on water levels in a sacred vase.",
          geography:
            "Built on a heart-shaped hill at the confluence of Ratong and Rangeet rivers, creating a naturally sacred geography in Buddhist cosmology. The location represents the center of Sikkim and is considered the most sacred spot in the kingdom. The hill is covered with prayer flags and offers views of major Himalayan peaks.",
          architecture:
            "Traditional Tibetan monastery with golden roofs visible from far distances. The main shrine houses the sacred Bumchu vase and statues of Guru Rinpoche. The monastery features ancient frescoes, prayer wheels, and a collection of rare Buddhist texts. The circumambulation path around the monastery is lined with prayer wheels and chortens.",
          culturalInfo:
            "Considered the holiest monastery in Sikkim, where a single visit is believed to wash away sins of a lifetime. The annual Bumchu festival during Losar is attended by thousands of pilgrims who come to receive blessed water and make predictions for the coming year.",
          nearbyLandmarks:
            "Ratong River, Rangeet River confluence, Legship town",
          bestTime: "October to March, avoid monsoon season",
          specialEvents:
            "Bumchu festival during Losar (February/March), major pilgrimage time",
        },
        {
          name: "Labrang Monastery",
          lat: 27.3389,
          lng: 88.6083,
          sect: "royal",
          region: "East Sikkim",
          regionColor: "#e74c3c",
          founded: 1814,
          accessible: true,
          description: "The royal monastery of Sikkim with coronation throne",
          significance: "Royal heritage site",
          elevation: "1677m",
          history:
            "Built in 1814 by the third Chogyal Tsudphud Namgyal as the royal chapel and coronation site for Sikkimese kings. The monastery served dual purposes as a place of worship and the seat of political power. It houses the original throne used for royal coronations and contains artifacts from the Namgyal dynasty that ruled Sikkim for over 300 years.",
          geography:
            "Located within the palace complex in Gangtok, strategically positioned to oversee the capital and surrounding valleys. The site was chosen for its commanding view and spiritual significance, with clear sightlines to major mountain peaks considered sacred in Sikkimese tradition. The location represents the intersection of temporal and spiritual power.",
          architecture:
            "Unique fusion of Tibetan monastery architecture with royal palace elements. Features ornate wooden carvings, golden decorations, and royal insignia alongside traditional Buddhist elements. The main hall contains the coronation throne, royal portraits, and religious artifacts. The building showcases the sophisticated craftsmanship of 19th-century Sikkimese artisans.",
          culturalInfo:
            "Served as the spiritual heart of the Sikkimese monarchy and continues to play important ceremonial roles. Houses historical documents, royal artifacts, and maintains traditions linking Buddhism with governance. The monastery represents the unique theocratic nature of historical Sikkim.",
          nearbyLandmarks:
            "Tsuklakhang Palace, Gangtok city center, Ridge area",
          bestTime: "Year-round access, best during clear weather months",
          specialEvents:
            "Royal commemorations, state ceremonies, Buddhist festivals",
        },
        {
          name: "Phensang Monastery",
          lat: 27.37,
          lng: 88.59,
          sect: "kagyu",
          region: "East Sikkim",
          regionColor: "#e74c3c",
          founded: 1721,
          accessible: false,
          description: "Ancient Kagyu monastery with meditation caves",
          significance: "Meditation retreat center",
          elevation: "2200m",
          history:
            "Established in 1721 by Lama Jigme Pawo, this monastery was built around natural caves used for meditation by earlier hermits. The site has been a meditation retreat for over 400 years, with caves showing evidence of long-term hermitage practices. The monastery maintains the tradition of three-year, three-month, three-day meditation retreats.",
          geography:
            "Perched on a steep mountainside with numerous natural caves carved into the cliff face. The location offers complete isolation necessary for intensive meditation practices, surrounded by dense forests of rhododendron, fir, and juniper. The area is rich in medicinal plants traditionally used by meditating monks. Natural springs provide pure water essential for long retreats.",
          architecture:
            "Built to integrate with natural rock formations and caves. The main building is modest, with the focus on the meditation caves carved into the mountainside. Each cave is designed for single-person retreats with minimal amenities. The monastery features simple prayer halls and quarters for retreat masters.",
          culturalInfo:
            "Maintains the strict tradition of Kagyu meditation practices including the famous three-year retreats. Monks here are known for their advanced meditation skills and the monastery serves as a training ground for meditation masters throughout the Himalayan region.",
          nearbyLandmarks:
            "Meditation caves, mountain springs, ancient hermitage sites",
          bestTime: "May to October for trekking access",
          specialEvents:
            "Completion ceremonies for three-year retreats, meditation workshops",
        },
        {
          name: "Ralang Monastery",
          lat: 27.2833,
          lng: 88.5167,
          sect: "kagyu",
          region: "South Sikkim",
          regionColor: "#f39c12",
          founded: 1768,
          accessible: true,
          description: "Important Kagyu monastery with beautiful architecture",
          significance: "Architectural significance",
          elevation: "1800m",
          history:
            "Founded in 1768 during the reign of Chogyal Tenzing Namgyal by the 4th Karmapa's representative. Built to strengthen the Kagyu presence in southern Sikkim and serve the local community. The monastery played a crucial role in spreading Kagyu teachings among the Lepcha and Bhutia communities in the region.",
          geography:
            "Situated on a terraced hillside overlooking the Rangeet River valley with commanding views of the southern Himalayan ranges. The location was chosen for its natural amphitheater setting and proximity to local settlements. The monastery is surrounded by terraced fields and traditional villages, representing the integration of monastic life with agricultural communities.",
          architecture:
            "Notable for its unique architectural features combining Tibetan and Sikkimese styles. The monastery features beautiful wood carvings, painted pillars, and traditional Tibetan roof architecture. The prayer hall contains ancient murals depicting the Kagyu lineage and local protective deities.",
          culturalInfo:
            "Known for its annual Pang Lhabsol celebrations and maintains strong connections with local communities. The monastery serves both spiritual and educational functions for nearby villages.",
          nearbyLandmarks: "Ravangla town, Buddha Park, Rangeet River valley",
          bestTime: "March to May and September to November",
          specialEvents:
            "Pang Lhabsol festival, Kagyu teachings and empowerments",
        },
        {
          name: "Dubdi Monastery",
          lat: 27.2889,
          lng: 88.2111,
          sect: "nyingma",
          region: "West Sikkim",
          regionColor: "#3498db",
          founded: 1701,
          accessible: false,
          description: "First monastery built in Sikkim",
          significance: "Historical importance",
          elevation: "2100m",
          history:
            "Built in 1701, Dubdi holds the distinction of being the first monastery constructed in Sikkim. Founded by Lhatsun Chempo, one of the three lamas who established Buddhism in Sikkim, it marks the beginning of organized Buddhist monasticism in the kingdom. The monastery was built following the coronation of the first Chogyal and represents the foundation of Sikkim's Buddhist identity.",
          geography:
            "Located on a forested hilltop near Yuksom, the first capital of Sikkim. The site offers panoramic views of the Kanchenjunga range and is surrounded by ancient forests containing rare Himalayan flora. The monastery sits at the beginning of the historic trade route to Tibet and commands strategic views of approaching valleys.",
          architecture:
            "Simple, traditional structure reflecting early Sikkimese monastic architecture. Built with local stone and timber, the monastery showcases ancient construction techniques. The prayer hall contains original 18th-century murals and statues installed by the founding lama.",
          culturalInfo:
            "Known as the 'Retreat Monastery', it maintains traditions of intensive meditation practice. The monastery holds special significance as the starting point of Sikkim's Buddhist heritage and is visited by pilgrims beginning the Kanchenjunga trek.",
          nearbyLandmarks:
            "Yuksom village, Norbugang Park, Tashiding Monastery",
          bestTime: "March to May and September to November",
          specialEvents: "Foundation day celebrations, meditation retreats",
        },
        {
          name: "Sang Monastery",
          lat: 27.4833,
          lng: 88.5833,
          sect: "nyingma",
          region: "North Sikkim",
          regionColor: "#9b59b6",
          founded: 1697,
          accessible: false,
          description: "Remote monastery in North Sikkim",
          significance: "High altitude monastery",
          elevation: "3800m",
          history:
            "Established in 1697 as one of the earliest monasteries in North Sikkim, built by Tibetan lamas who fled political turmoil in Tibet. The monastery served as a refuge for Buddhist scholars and maintained connections with major Tibetan monasteries. Despite its remote location, it played a crucial role in preserving Tibetan Buddhist texts and practices.",
          geography:
            "Located in the high-altitude region of North Sikkim, surrounded by glacial valleys and towering peaks. The monastery sits in a valley protected from harsh winds, with natural hot springs nearby. The area is characterized by alpine meadows, rare high-altitude plants, and is home to snow leopards, blue sheep, and other Himalayan wildlife.",
          architecture:
            "Built to withstand extreme weather conditions with thick stone walls and low-profile design. The monastery features traditional Tibetan high-altitude construction techniques with minimal windows and heavy timber reinforcement. Interior decorations are simpler but include ancient texts and artifacts brought from Tibet.",
          culturalInfo:
            "Maintains the strictest monastic traditions due to its isolation. The monastery is known for preserving ancient Nyingma practices and serves as a repository for rare Buddhist texts. Access requires special permits and is limited to certain times of the year.",
          nearbyLandmarks: "Gurudongmar Lake, Yumthang Valley, Tibetan plateau",
          bestTime: "June to September (monsoon permitting)",
          specialEvents:
            "Annual blessing ceremonies, limited access religious festivals",
        },
        {
          name: "Tsuklakhang Monastery",
          lat: 27.3333,
          lng: 88.6167,
          sect: "gelug",
          region: "East Sikkim",
          regionColor: "#e74c3c",
          founded: 1894,
          accessible: true,
          description: "Royal chapel within Tsuklakhang complex",
          significance: "Royal chapel",
          elevation: "1650m",
          history:
            "Built in 1894 as part of the royal palace complex during the reign of Chogyal Thutob Namgyal. The monastery served as the royal family's private chapel and housed important state ceremonies. It represents the synthesis of Tibetan Buddhism with Sikkimese royal traditions and maintained connections with major Gelug monasteries in Tibet.",
          geography:
            "Located within the Tsuklakhang Palace complex in the heart of Gangtok, providing easy access for royal ceremonies and state functions. The site was chosen for its central location and spiritual significance within the capital. The monastery overlooks the main city area and has clear views of sacred mountains.",
          architecture:
            "Designed as a royal chapel with ornate decorations befitting its status. Features elaborate golden work, precious stone decorations, and royal insignia alongside traditional Buddhist elements. The prayer hall contains royal portraits, state artifacts, and religious objects used in royal ceremonies.",
          culturalInfo:
            "Served dual purposes as a place of worship and venue for state ceremonies. The monastery maintains Gelug traditions while incorporating elements specific to Sikkimese royal culture. It houses historical documents related to Sikkim's political and religious history.",
          nearbyLandmarks:
            "Royal Palace, Gangtok city center, government buildings",
          bestTime: "Year-round access during visiting hours",
          specialEvents:
            "State ceremonies, royal commemorations, Buddhist festivals",
        },
      ];

      // Hospitality data: hotels, homestays, restaurants (expanded dataset with reviews)
      const hospitalityData = [
        // Hotels in Gangtok
        {
          name: "Taj Guras Kutir Resort & Spa",
          type: "Hotel",
          rating: 4.7,
          lat: 27.3265,
          lng: 88.6114,
          address: "Penchal Rd, Gangtok",
          phone: "+91-3592-XXXXXX",
          reviews: [
            "Excellent service and mountain views",
            "Luxury stay with traditional Sikkimese architecture",
            "Perfect for families",
          ],
        },
        {
          name: "The Elgin Nor-Khill",
          type: "Hotel",
          rating: 4.6,
          lat: 27.3312,
          lng: 88.6127,
          address: "Paljor Stadium Rd, Gangtok",
          phone: "+91-3592-XXXXXX",
          reviews: [
            "Historic palace converted to hotel",
            "Authentic Sikkimese experience",
            "Great location in city center",
          ],
        },
        {
          name: "Hotel Tibet",
          type: "Hotel",
          rating: 4.4,
          lat: 27.3257,
          lng: 88.6123,
          address: "MG Marg, Gangtok",
          phone: "+91-3592-XXXXXX",
          reviews: [
            "Clean rooms with mountain views",
            "Friendly staff",
            "Good value for money",
          ],
        },
        {
          name: "Mayfair Spa Resort",
          type: "Hotel",
          rating: 4.8,
          lat: 27.32,
          lng: 88.61,
          address: "Ranipool, Gangtok",
          phone: "+91-3592-XXXXXX",
          reviews: [
            "Luxury spa treatments",
            "Breathtaking Kanchenjunga views",
            "World-class amenities",
          ],
        },
        {
          name: "Hotel Sonam Delek",
          type: "Hotel",
          rating: 4.3,
          lat: 27.335,
          lng: 88.615,
          address: "Tibet Rd, Gangtok",
          phone: "+91-3592-XXXXXX",
          reviews: [
            "Traditional Tibetan architecture",
            "Peaceful atmosphere",
            "Good food",
          ],
        },
        // Hotels in Pelling
        {
          name: "The Elgin Mount Pandim",
          type: "Hotel",
          rating: 4.6,
          lat: 27.301,
          lng: 88.2416,
          address: "Pelling, West Sikkim",
          phone: "+91-3595-XXXXXX",
          reviews: [
            "Stunning mountain views",
            "Luxury in the hills",
            "Excellent service",
          ],
        },
        {
          name: "Hotel Mount Pandim",
          type: "Hotel",
          rating: 4.2,
          lat: 27.305,
          lng: 88.245,
          address: "Pelling, West Sikkim",
          phone: "+91-3595-XXXXXX",
          reviews: [
            "Great location near monasteries",
            "Clean and comfortable",
            "Friendly staff",
          ],
        },
        // Homestays in Gangtok
        {
          name: "Keepsa Residency Homestay",
          type: "Homestay",
          rating: 4.5,
          lat: 27.3413,
          lng: 88.613,
          address: "Development Area, Gangtok",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Homely atmosphere",
            "Delicious home-cooked meals",
            "Local family experience",
          ],
        },
        {
          name: "Sikkim Homestay",
          type: "Homestay",
          rating: 4.4,
          lat: 27.338,
          lng: 88.614,
          address: "Tadong, Gangtok",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Authentic local experience",
            "Warm hospitality",
            "Budget-friendly",
          ],
        },
        {
          name: "Himalayan Homestay",
          type: "Homestay",
          rating: 4.6,
          lat: 27.345,
          lng: 88.612,
          address: "Arithang, Gangtok",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Mountain views from room",
            "Traditional Sikkimese food",
            "Cultural immersion",
          ],
        },
        // Homestays in Pelling
        {
          name: "Magellan's The Golden Bridge Homestay",
          type: "Homestay",
          rating: 4.4,
          lat: 27.3172,
          lng: 88.2442,
          address: "Pelling, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Peaceful location", "Organic garden", "Eco-friendly stay"],
        },
        {
          name: "Pelling Homestay",
          type: "Homestay",
          rating: 4.3,
          lat: 27.31,
          lng: 88.24,
          address: "Pelling, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Close to monasteries", "Local family", "Simple and clean"],
        },
        // Restaurants in Gangtok
        {
          name: "The Local Cafe",
          type: "Restaurant",
          rating: 4.5,
          lat: 27.3312,
          lng: 88.6127,
          address: "Tadong, Gangtok",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Best momos in town", "Cozy atmosphere", "Great coffee"],
        },
        {
          name: "Cafe Live & Loud",
          type: "Restaurant",
          rating: 4.4,
          lat: 27.3257,
          lng: 88.6123,
          address: "Nam Nam Rd, Gangtok",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Live music venue",
            "Good food and drinks",
            "Vibrant atmosphere",
          ],
        },
        {
          name: "Taste of Tibet",
          type: "Restaurant",
          rating: 4.6,
          lat: 27.328,
          lng: 88.613,
          address: "MG Marg, Gangtok",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Authentic Tibetan cuisine",
            "Thukpa and momos",
            "Traditional decor",
          ],
        },
        {
          name: "Gangtok Kitchen",
          type: "Restaurant",
          rating: 4.3,
          lat: 27.33,
          lng: 88.611,
          address: "Lall Bazaar, Gangtok",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Local Sikkimese dishes",
            "Fresh ingredients",
            "Reasonable prices",
          ],
        },
        {
          name: "Momo Corner",
          type: "Restaurant",
          rating: 4.7,
          lat: 27.332,
          lng: 88.614,
          address: "Tibet Rd, Gangtok",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Best momos in Sikkim",
            "Variety of fillings",
            "Quick service",
          ],
        },
        // Additional hotels across Sikkim
        {
          name: "Hotel Tashi Delek",
          type: "Hotel",
          rating: 4.2,
          lat: 27.35,
          lng: 88.62,
          address: "Rangpo, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Gateway to Sikkim", "Clean rooms", "Good for transit"],
        },
        {
          name: "Namchi Hotel",
          type: "Hotel",
          rating: 4.1,
          lat: 27.1667,
          lng: 88.35,
          address: "Namchi, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "South Sikkim base",
            "Buddha Park nearby",
            "Comfortable stay",
          ],
        },
        {
          name: "Lachung Hotel",
          type: "Hotel",
          rating: 4.0,
          lat: 27.6833,
          lng: 88.75,
          address: "Lachung, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "High altitude stay",
            "Yumthang Valley access",
            "Basic but clean",
          ],
        },
        {
          name: "Lachen Hotel",
          type: "Hotel",
          rating: 4.1,
          lat: 27.7167,
          lng: 88.5667,
          address: "Lachen, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Gurudongmar Lake access",
            "Mountain views",
            "Warm hospitality",
          ],
        },
        // More hotels across Sikkim
        {
          name: "Hotel Summit Denzong",
          type: "Hotel",
          rating: 4.3,
          lat: 27.34,
          lng: 88.618,
          address: "Gangtok, East Sikkim",
          phone: "+91-3592-XXXXXX",
          reviews: ["City center location", "Modern amenities", "Good service"],
        },
        {
          name: "Hotel Royal Plaza",
          type: "Hotel",
          rating: 4.2,
          lat: 27.328,
          lng: 88.61,
          address: "MG Marg, Gangtok",
          phone: "+91-3592-XXXXXX",
          reviews: [
            "Shopping district access",
            "Comfortable rooms",
            "Friendly staff",
          ],
        },
        {
          name: "Hotel Sikkim Continental",
          type: "Hotel",
          rating: 4.1,
          lat: 27.335,
          lng: 88.612,
          address: "Tibet Rd, Gangtok",
          phone: "+91-3592-XXXXXX",
          reviews: ["Budget-friendly", "Clean accommodation", "Good location"],
        },
        {
          name: "Hotel Pelling Heights",
          type: "Hotel",
          rating: 4.4,
          lat: 27.308,
          lng: 88.243,
          address: "Pelling, West Sikkim",
          phone: "+91-3595-XXXXXX",
          reviews: ["Mountain views", "Peaceful location", "Good food"],
        },
        {
          name: "Hotel Pemayangtse",
          type: "Hotel",
          rating: 4.0,
          lat: 27.302,
          lng: 88.24,
          address: "Pelling, West Sikkim",
          phone: "+91-3595-XXXXXX",
          reviews: ["Near monastery", "Basic but clean", "Local experience"],
        },
        // More homestays
        {
          name: "Mountain View Homestay",
          type: "Homestay",
          rating: 4.5,
          lat: 27.342,
          lng: 88.614,
          address: "Tadong, Gangtok",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Panoramic mountain views",
            "Traditional Sikkimese meals",
            "Cultural exchange",
          ],
        },
        {
          name: "Green Valley Homestay",
          type: "Homestay",
          rating: 4.3,
          lat: 27.348,
          lng: 88.616,
          address: "Ranipool, Gangtok",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Eco-friendly stay",
            "Organic garden",
            "Peaceful environment",
          ],
        },
        {
          name: "Himalayan Heights Homestay",
          type: "Homestay",
          rating: 4.6,
          lat: 27.315,
          lng: 88.242,
          address: "Pelling, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Kanchenjunga views",
            "Local family hospitality",
            "Authentic experience",
          ],
        },
        {
          name: "Valley View Homestay",
          type: "Homestay",
          rating: 4.2,
          lat: 27.32,
          lng: 88.245,
          address: "Pelling, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Valley views", "Home-cooked meals", "Budget-friendly"],
        },
        {
          name: "Riverside Homestay",
          type: "Homestay",
          rating: 4.4,
          lat: 27.35,
          lng: 88.62,
          address: "Rangpo, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Riverside location", "Fresh air", "Local culture"],
        },
        // More restaurants
        {
          name: "Himalayan Kitchen",
          type: "Restaurant",
          rating: 4.5,
          lat: 27.327,
          lng: 88.611,
          address: "MG Marg, Gangtok",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Traditional Sikkimese cuisine",
            "Fresh local ingredients",
            "Authentic flavors",
          ],
        },
        {
          name: "Mountain Breeze Cafe",
          type: "Restaurant",
          rating: 4.3,
          lat: 27.329,
          lng: 88.613,
          address: "Tibet Rd, Gangtok",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Cozy atmosphere", "Good coffee", "Light meals"],
        },
        {
          name: "Spice Garden Restaurant",
          type: "Restaurant",
          rating: 4.4,
          lat: 27.333,
          lng: 88.612,
          address: "Lall Bazaar, Gangtok",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Spicy local dishes",
            "Fresh vegetables",
            "Reasonable prices",
          ],
        },
        {
          name: "Buddha Cafe",
          type: "Restaurant",
          rating: 4.6,
          lat: 27.326,
          lng: 88.614,
          address: "Tadong, Gangtok",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Peaceful ambiance",
            "Vegetarian options",
            "Meditation-friendly",
          ],
        },
        {
          name: "Pelling Restaurant",
          type: "Restaurant",
          rating: 4.2,
          lat: 27.306,
          lng: 88.244,
          address: "Pelling, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Local specialties", "Mountain views", "Good service"],
        },
        {
          name: "Kanchenjunga View Restaurant",
          type: "Restaurant",
          rating: 4.7,
          lat: 27.304,
          lng: 88.242,
          address: "Pelling, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Stunning mountain views",
            "Fine dining",
            "Romantic setting",
          ],
        },
        // Additional hotels and homestays across regions
        {
          name: "Ravangla Hotel",
          type: "Hotel",
          rating: 4.1,
          lat: 27.3167,
          lng: 88.3667,
          address: "Ravangla, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Buddha Park access", "Mountain views", "Comfortable stay"],
        },
        {
          name: "Yuksom Hotel",
          type: "Hotel",
          rating: 4.0,
          lat: 27.3667,
          lng: 88.2167,
          address: "Yuksom, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Trekking base",
            "Historical significance",
            "Basic amenities",
          ],
        },
        {
          name: "Kaluk Hotel",
          type: "Hotel",
          rating: 4.2,
          lat: 27.25,
          lng: 88.3,
          address: "Kaluk, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Off-beat location", "Peaceful stay", "Local culture"],
        },
        {
          name: "Rinchenpong Homestay",
          type: "Homestay",
          rating: 4.5,
          lat: 27.2833,
          lng: 88.2333,
          address: "Rinchenpong, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Remote location",
            "Authentic experience",
            "Mountain views",
          ],
        },
        {
          name: "Singtam Hotel",
          type: "Hotel",
          rating: 4.0,
          lat: 27.2333,
          lng: 88.5,
          address: "Singtam, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Transit stop", "Clean rooms", "Good food"],
        },
        {
          name: "Jorethang Hotel",
          type: "Hotel",
          rating: 4.1,
          lat: 27.1167,
          lng: 88.2667,
          address: "Jorethang, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["South Sikkim base", "Market access", "Comfortable"],
        },
        {
          name: "Mangan Hotel",
          type: "Hotel",
          rating: 4.0,
          lat: 27.5167,
          lng: 88.5333,
          address: "Mangan, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "North Sikkim gateway",
            "Basic facilities",
            "Mountain access",
          ],
        },
        {
          name: "Chungthang Hotel",
          type: "Hotel",
          rating: 3.9,
          lat: 27.6167,
          lng: 88.65,
          address: "Chungthang, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["High altitude", "Basic stay", "Adventure base"],
        },
        {
          name: "Dzongu Homestay",
          type: "Homestay",
          rating: 4.6,
          lat: 27.55,
          lng: 88.6,
          address: "Dzongu, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Lepcha culture", "Eco-tourism", "Authentic experience"],
        },
        {
          name: "Lingdum Homestay",
          type: "Homestay",
          rating: 4.4,
          lat: 27.3667,
          lng: 88.65,
          address: "Lingdum, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Monastery nearby", "Peaceful location", "Local family"],
        },
        {
          name: "Temi Tea Garden Homestay",
          type: "Homestay",
          rating: 4.5,
          lat: 27.2,
          lng: 88.3167,
          address: "Temi, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Tea garden views", "Organic tea", "Rural experience"],
        },
        {
          name: "Rumtek Homestay",
          type: "Homestay",
          rating: 4.3,
          lat: 27.3167,
          lng: 88.5833,
          address: "Rumtek, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Monastery access",
            "Spiritual atmosphere",
            "Local hospitality",
          ],
        },
        {
          name: "Pemayangtse Homestay",
          type: "Homestay",
          rating: 4.4,
          lat: 27.3,
          lng: 88.24,
          address: "Pelling, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Ancient monastery nearby",
            "Cultural immersion",
            "Mountain views",
          ],
        },
        {
          name: "Tashiding Homestay",
          type: "Homestay",
          rating: 4.6,
          lat: 27.2833,
          lng: 88.2167,
          address: "Tashiding, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Sacred site access",
            "Pilgrimage base",
            "Spiritual experience",
          ],
        },
        {
          name: "Enchey Homestay",
          type: "Homestay",
          rating: 4.2,
          lat: 27.35,
          lng: 88.6167,
          address: "Gangtok, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["City access", "Monastery nearby", "Convenient location"],
        },
        {
          name: "Labrang Homestay",
          type: "Homestay",
          rating: 4.5,
          lat: 27.3333,
          lng: 88.6167,
          address: "Gangtok, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Royal monastery access",
            "Cultural heritage",
            "Authentic stay",
          ],
        },
        {
          name: "Phensang Homestay",
          type: "Homestay",
          rating: 4.3,
          lat: 27.3167,
          lng: 88.6,
          address: "Gangtok, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Monastery views", "Peaceful environment", "Local family"],
        },
        {
          name: "Sangachoeling Homestay",
          type: "Homestay",
          rating: 4.4,
          lat: 27.3,
          lng: 88.25,
          address: "Pelling, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Ancient monastery access",
            "Mountain trekking",
            "Cultural experience",
          ],
        },
        {
          name: "Dubdi Homestay",
          type: "Homestay",
          rating: 4.5,
          lat: 27.3667,
          lng: 88.2167,
          address: "Yuksom, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "First monastery access",
            "Trekking base",
            "Historical significance",
          ],
        },
        {
          name: "Kartok Homestay",
          type: "Homestay",
          rating: 4.2,
          lat: 27.3667,
          lng: 88.2167,
          address: "Yuksom, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Coronation site access",
            "Local culture",
            "Mountain views",
          ],
        },
        {
          name: "Norbugang Homestay",
          type: "Homestay",
          rating: 4.3,
          lat: 27.3667,
          lng: 88.2167,
          address: "Yuksom, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Historical site",
            "Cultural heritage",
            "Authentic experience",
          ],
        },
        {
          name: "Tashiding Homestay 2",
          type: "Homestay",
          rating: 4.4,
          lat: 27.28,
          lng: 88.22,
          address: "Tashiding, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Sacred monastery",
            "Pilgrimage experience",
            "Spiritual atmosphere",
          ],
        },
        {
          name: "Ralang Homestay",
          type: "Homestay",
          rating: 4.5,
          lat: 27.25,
          lng: 88.3,
          address: "Ralang, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Monastery access",
            "Cultural immersion",
            "Local hospitality",
          ],
        },
        {
          name: "Phodong Homestay",
          type: "Homestay",
          rating: 4.3,
          lat: 27.5,
          lng: 88.55,
          address: "Phodong, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["North Sikkim base", "Mountain access", "Local culture"],
        },
        {
          name: "Lachung Homestay",
          type: "Homestay",
          rating: 4.4,
          lat: 27.6833,
          lng: 88.75,
          address: "Lachung, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Yumthang Valley access",
            "High altitude",
            "Mountain views",
          ],
        },
        {
          name: "Lachen Homestay",
          type: "Homestay",
          rating: 4.5,
          lat: 27.7167,
          lng: 88.5667,
          address: "Lachen, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Gurudongmar Lake access",
            "Adventure base",
            "Local family",
          ],
        },
        {
          name: "Thangu Homestay",
          type: "Homestay",
          rating: 4.2,
          lat: 27.8,
          lng: 88.5,
          address: "Thangu, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Highest settlement",
            "Adventure tourism",
            "Basic facilities",
          ],
        },
        {
          name: "Zemu Homestay",
          type: "Homestay",
          rating: 4.6,
          lat: 27.75,
          lng: 88.6,
          address: "Zemu, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Glacier access", "Trekking base", "Remote location"],
        },
        {
          name: "Dzongu Homestay 2",
          type: "Homestay",
          rating: 4.4,
          lat: 27.55,
          lng: 88.6,
          address: "Dzongu, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Lepcha culture", "Eco-tourism", "Traditional lifestyle"],
        },
        {
          name: "Hee Homestay",
          type: "Homestay",
          rating: 4.3,
          lat: 27.4,
          lng: 88.5,
          address: "Hee, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Off-beat location",
            "Local culture",
            "Peaceful environment",
          ],
        },
        {
          name: "Bermiok Homestay",
          type: "Homestay",
          rating: 4.5,
          lat: 27.2,
          lng: 88.25,
          address: "Bermiok, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Tea garden views",
            "Rural experience",
            "Local hospitality",
          ],
        },
        {
          name: "Ravangla Homestay",
          type: "Homestay",
          rating: 4.4,
          lat: 27.3167,
          lng: 88.3667,
          address: "Ravangla, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Buddha Park access",
            "Mountain views",
            "Cultural experience",
          ],
        },
        {
          name: "Namchi Homestay",
          type: "Homestay",
          rating: 4.2,
          lat: 27.1667,
          lng: 88.35,
          address: "Namchi, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["South Sikkim base", "Local culture", "Comfortable stay"],
        },
        {
          name: "Jorethang Homestay",
          type: "Homestay",
          rating: 4.1,
          lat: 27.1167,
          lng: 88.2667,
          address: "Jorethang, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Market town", "Local experience", "Budget-friendly"],
        },
        {
          name: "Melli Homestay",
          type: "Homestay",
          rating: 4.3,
          lat: 27.1,
          lng: 88.25,
          address: "Melli, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Border town", "Local culture", "Gateway experience"],
        },
        {
          name: "Rangpo Homestay",
          type: "Homestay",
          rating: 4.2,
          lat: 27.1833,
          lng: 88.5333,
          address: "Rangpo, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Gateway to Sikkim", "Local family", "Convenient location"],
        },
        {
          name: "Pakyong Homestay",
          type: "Homestay",
          rating: 4.4,
          lat: 27.25,
          lng: 88.5833,
          address: "Pakyong, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Airport access", "Mountain views", "Local culture"],
        },
        {
          name: "Rongli Homestay",
          type: "Homestay",
          rating: 4.3,
          lat: 27.2,
          lng: 88.6667,
          address: "Rongli, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Border area", "Adventure base", "Local experience"],
        },
        {
          name: "Dikchu Homestay",
          type: "Homestay",
          rating: 4.5,
          lat: 27.4167,
          lng: 88.6,
          address: "Dikchu, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["River views", "Peaceful location", "Local hospitality"],
        },
        {
          name: "Mangan Homestay",
          type: "Homestay",
          rating: 4.2,
          lat: 27.5167,
          lng: 88.5333,
          address: "Mangan, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["North Sikkim base", "Mountain access", "Local culture"],
        },
        {
          name: "Chungthang Homestay",
          type: "Homestay",
          rating: 4.1,
          lat: 27.6167,
          lng: 88.65,
          address: "Chungthang, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["High altitude", "Adventure base", "Basic facilities"],
        },
        {
          name: "Lachung Homestay 2",
          type: "Homestay",
          rating: 4.3,
          lat: 27.68,
          lng: 88.75,
          address: "Lachung, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Yumthang access", "Mountain views", "Local family"],
        },
        {
          name: "Lachen Homestay 2",
          type: "Homestay",
          rating: 4.4,
          lat: 27.72,
          lng: 88.57,
          address: "Lachen, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Gurudongmar access",
            "Adventure base",
            "Local hospitality",
          ],
        },
        {
          name: "Thangu Homestay 2",
          type: "Homestay",
          rating: 4.0,
          lat: 27.8,
          lng: 88.5,
          address: "Thangu, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Highest settlement", "Adventure tourism", "Basic stay"],
        },
        {
          name: "Zemu Homestay 2",
          type: "Homestay",
          rating: 4.5,
          lat: 27.75,
          lng: 88.6,
          address: "Zemu, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Glacier access", "Trekking base", "Remote experience"],
        },
        {
          name: "Dzongu Homestay 3",
          type: "Homestay",
          rating: 4.6,
          lat: 27.55,
          lng: 88.6,
          address: "Dzongu, North Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Lepcha culture", "Eco-tourism", "Traditional lifestyle"],
        },
        {
          name: "Hee Homestay 2",
          type: "Homestay",
          rating: 4.2,
          lat: 27.4,
          lng: 88.5,
          address: "Hee, West Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Off-beat location", "Local culture", "Peaceful stay"],
        },
        {
          name: "Bermiok Homestay 2",
          type: "Homestay",
          rating: 4.4,
          lat: 27.2,
          lng: 88.25,
          address: "Bermiok, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Tea garden views", "Rural experience", "Local family"],
        },
        {
          name: "Ravangla Homestay 2",
          type: "Homestay",
          rating: 4.3,
          lat: 27.3167,
          lng: 88.3667,
          address: "Ravangla, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "Buddha Park access",
            "Mountain views",
            "Cultural immersion",
          ],
        },
        {
          name: "Namchi Homestay 2",
          type: "Homestay",
          rating: 4.1,
          lat: 27.1667,
          lng: 88.35,
          address: "Namchi, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: [
            "South Sikkim base",
            "Local culture",
            "Comfortable accommodation",
          ],
        },
        {
          name: "Jorethang Homestay 2",
          type: "Homestay",
          rating: 4.0,
          lat: 27.1167,
          lng: 88.2667,
          address: "Jorethang, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Market town", "Local experience", "Budget-friendly stay"],
        },
        {
          name: "Melli Homestay 2",
          type: "Homestay",
          rating: 4.2,
          lat: 27.1,
          lng: 88.25,
          address: "Melli, South Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Border town", "Local culture", "Gateway experience"],
        },
        {
          name: "Rangpo Homestay 2",
          type: "Homestay",
          rating: 4.1,
          lat: 27.1833,
          lng: 88.5333,
          address: "Rangpo, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Gateway to Sikkim", "Local family", "Convenient location"],
        },
        {
          name: "Pakyong Homestay 2",
          type: "Homestay",
          rating: 4.3,
          lat: 27.25,
          lng: 88.5833,
          address: "Pakyong, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Airport access", "Mountain views", "Local culture"],
        },
        {
          name: "Rongli Homestay 2",
          type: "Homestay",
          rating: 4.2,
          lat: 27.2,
          lng: 88.6667,
          address: "Rongli, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["Border area", "Adventure base", "Local experience"],
        },
        {
          name: "Dikchu Homestay 2",
          type: "Homestay",
          rating: 4.4,
          lat: 27.4167,
          lng: 88.6,
          address: "Dikchu, East Sikkim",
          phone: "+91-XXXXXXXXXX",
          reviews: ["River views", "Peaceful location", "Local hospitality"],
        },
      ];

      // Expose globally for lookups elsewhere
      window.monasteryData = monasteryData;
      window.hospitalityData = hospitalityData;

      let map,
        monasteryMarkers = [],
        hospitalityMarkers = [];
      let currentFilter = "all";

      // Initialize map
      function initMap() {
        map = L.map("monastery-map").setView([27.3389, 88.45], 10);

        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
          attribution: " OpenStreetMap contributors",
        }).addTo(map);

        // Add terrain overlay for better visualization
        const terrainOverlay = L.tileLayer(
          "https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.jpg",
          {
            attribution: "Map tiles by Stamen Design, under CC BY 3.0",
            opacity: 0.3,
          }
        ).addTo(map);

        loadMonasteries();
      }

      // Create custom monastery icons
      function getMonasteryIcon(monastery) {
        let iconColor = "#D4AF37"; // Default gold
        let iconSymbol = "";

        switch (monastery.sect) {
          case "nyingma":
            iconColor = "#E53E3E";
            iconSymbol = "";
            break;
          case "kagyu":
            iconColor = "#3182CE";
            iconSymbol = "";
            break;
          case "gelug":
            iconColor = "#F59E0B";
            iconSymbol = "";
            break;
          case "royal":
            iconColor = "#9F7AEA";
            iconSymbol = "";
            break;
        }

        return L.divIcon({
          className: "custom-monastery-marker",
          html: `
                    <div style="
                        background: ${iconColor}; 
                        color: white; 
                        width: 35px; 
                        height: 35px; 
                        border-radius: 50%; 
                        display: flex; 
                        align-items: center; 
                        justify-content: center;
                        font-size: 16px;
                        border: 3px solid white;
                        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                        cursor: pointer;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.transform='scale(1.2)'" onmouseout="this.style.transform='scale(1)'">
                        ${iconSymbol}
                    </div>
                `,
          iconSize: [35, 35],
          iconAnchor: [17.5, 17.5],
          popupAnchor: [0, -35],
        });
      }
      // Load monasteries on map
      function loadMonasteries() {
        // Clear existing markers
        monasteryMarkers.forEach((marker) => map.removeLayer(marker));
        monasteryMarkers = [];
        // Also clear hospitality markers if any
        hospitalityMarkers.forEach((marker) => map.removeLayer(marker));
        hospitalityMarkers = [];

        monasteryData.forEach((monastery) => {
          if (
            currentFilter === "all" ||
            (currentFilter === "accessible" && monastery.accessible) ||
            (currentFilter === "ancient" && 2025 - monastery.founded > 500) ||
            currentFilter === monastery.sect
          ) {
            // Create custom colored icon based on region
            const regionColor = monastery.regionColor || "#2c3e50";
            const customIcon = L.divIcon({
              html: `<div style="background-color: ${regionColor}; color: white; border-radius: 50%; width: 25px; height: 25px; display: flex; align-items: center; justify-content: center; font-size: 12px; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"><i class="fas fa-temple-buddhist"></i></div>`,
              className: "custom-monastery-icon",
              iconSize: [25, 25],
              iconAnchor: [12, 12],
              popupAnchor: [0, -12],
            });

            const marker = L.marker([monastery.lat, monastery.lng], {
              icon: customIcon,
            });

            // Create detailed popup content with historic and geographic information
            const popupContent = `
                        <div class="popup-content" style="max-width: 400px;">
                            <div style="background: var(--gradient-primary); color: white; padding: 1rem; margin: -1rem -1rem 1rem -1rem; border-radius: 8px 8px 0 0;">
                                <h3 style="margin: 0; font-size: 1.3rem; font-weight: 700;">${
                                  monastery.name
                                }</h3>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem; opacity: 0.9;">
                                    <span style="font-size: 0.9rem;">Founded ${
                                      monastery.founded
                                    }</span>
                                    <span style="font-size: 0.9rem;"> ${
                                      monastery.elevation
                                    }</span>
                                </div>
                                <div style="margin-top: 0.5rem; font-size: 0.85rem; opacity: 0.9;">
                                    <span style="background: rgba(255,255,255,0.2); padding: 0.2rem 0.5rem; border-radius: 12px; margin-right: 0.5rem;">${
                                      monastery.region || "Sikkim"
                                    }</span>
                                    <span style="background: rgba(255,255,255,0.2); padding: 0.2rem 0.5rem; border-radius: 12px;">${monastery.sect.toUpperCase()}</span>
                                </div>
                            </div>
                            
                            <div style="max-height: 300px; overflow-y: auto; padding-right: 5px;">
                                <!-- Basic Info -->
                                <div style="background: #F9FAFB; padding: 0.8rem; border-radius: 8px; margin-bottom: 1rem;">
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; font-size: 0.85rem;">
                                        <div><strong>Sect:</strong> ${
                                          monastery.sect
                                            .charAt(0)
                                            .toUpperCase() +
                                          monastery.sect.slice(1)
                                        }</div>
                                        <div><strong>Access:</strong> ${
                                          monastery.accessible
                                            ? " Road accessible"
                                            : " Trekking required"
                                        }</div>
                                    </div>
                                    <div style="margin-top: 0.5rem; font-size: 0.85rem;">
                                        <strong>Significance:</strong> ${
                                          monastery.significance
                                        }
                                    </div>
                                </div>

                                <!-- Historical Information -->
                                <div style="margin-bottom: 1rem;">
                                    <h4 style="color: var(--primary-gold-dark); margin: 0 0 0.5rem 0; font-size: 1rem; display: flex; align-items: center; gap: 0.3rem;">
                                        <i class="fas fa-scroll" style="font-size: 0.9rem;"></i> Historical Background
                                    </h4>
                                    <p style="margin: 0; font-size: 0.85rem; line-height: 1.5; color: #374151;">
                                        ${monastery.history}
                                    </p>
                                </div>

                                <!-- Geographic Information -->
                                <div style="margin-bottom: 1rem;">
                                    <h4 style="color: var(--primary-gold-dark); margin: 0 0 0.5rem 0; font-size: 1rem; display: flex; align-items: center; gap: 0.3rem;">
                                        <i class="fas fa-mountain" style="font-size: 0.9rem;"></i> Geographic Setting
                                    </h4>
                                    <p style="margin: 0; font-size: 0.85rem; line-height: 1.5; color: #374151;">
                                        ${monastery.geography}
                                    </p>
                                </div>

                                <!-- Architecture -->
                                <div style="margin-bottom: 1rem;">
                                    <h4 style="color: var(--primary-gold-dark); margin: 0 0 0.5rem 0; font-size: 1rem; display: flex; align-items: center; gap: 0.3rem;">
                                        <i class="fas fa-building" style="font-size: 0.9rem;"></i> Architecture & Design
                                    </h4>
                                    <p style="margin: 0; font-size: 0.85rem; line-height: 1.5; color: #374151;">
                                        ${monastery.architecture}
                                    </p>
                                </div>

                                <!-- Cultural Information -->
                                <div style="margin-bottom: 1rem;">
                                    <h4 style="color: var(--primary-gold-dark); margin: 0 0 0.5rem 0; font-size: 1rem; display: flex; align-items: center; gap: 0.3rem;">
                                        <i class="fas fa-users" style="font-size: 0.9rem;"></i> Cultural Significance
                                    </h4>
                                    <p style="margin: 0; font-size: 0.85rem; line-height: 1.5; color: #374151;">
                                        ${monastery.culturalInfo}
                                    </p>
                                </div>

                                <!-- Visit Information -->
                                <div style="background: #EFF6FF; padding: 0.8rem; border-radius: 8px; margin-bottom: 1rem;">
                                    <h4 style="color: var(--secondary-blue); margin: 0 0 0.5rem 0; font-size: 0.95rem; display: flex; align-items: center; gap: 0.3rem;">
                                        <i class="fas fa-info-circle" style="font-size: 0.9rem;"></i> Visitor Information
                                    </h4>
                                    <div style="font-size: 0.8rem; color: #1E40AF;">
                                        <div style="margin-bottom: 0.3rem;"><strong>Best Time to Visit:</strong> ${
                                          monastery.bestTime
                                        }</div>
                                        <div style="margin-bottom: 0.3rem;"><strong>Special Events:</strong> ${
                                          monastery.specialEvents
                                        }</div>
                                        <div><strong>Nearby Landmarks:</strong> ${
                                          monastery.nearbyLandmarks
                                        }</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div style="display: flex; gap: 0.5rem; margin-top: 1rem; flex-wrap: wrap;">
                                <button class="popup-btn" onclick="viewMonasteryDetails('${
                                  monastery.name
                                }')" style="flex: 1; min-width: 100px;">
                                    <i class="fas fa-eye"></i> Full Details
                                </button>
                                <button class="popup-btn" onclick="getDirections(${
                                  monastery.lat
                                }, ${
              monastery.lng
            })" style="flex: 1; min-width: 100px;">
                                    <i class="fas fa-directions"></i> Directions
                                </button>
                            </div>
                            
                            <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                                <button class="popup-btn" onclick="viewPhotoGallery('${
                                  monastery.name
                                }')" style="flex: 1; font-size: 0.8rem; padding: 0.4rem 0.8rem; background: var(--gradient-secondary);">
                                    <i class="fas fa-camera"></i> Photo Gallery
                                </button>
                            </div>
                        </div>
                    `;

            marker.bindPopup(popupContent, {
              maxWidth: 450,
              maxHeight: 400,
              className: "custom-popup",
            });

            marker.addTo(map);
            monasteryMarkers.push(marker);
          }
        });
      }

      // Create custom red home icon for hospitality markers
      const redHomeIcon = L.divIcon({
        html: '<div style="background-color: #dc3545; color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 14px; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"><i class="fas fa-home"></i></div>',
        className: "custom-home-icon",
        iconSize: [30, 30],
        iconAnchor: [15, 15],
        popupAnchor: [0, -15],
      });

      // Load hospitality (hotels, homestays, restaurants) on map
      function loadHospitality() {
        // Clear monastery markers
        monasteryMarkers.forEach((marker) => map.removeLayer(marker));
        monasteryMarkers = [];
        // Clear previous hospitality markers
        hospitalityMarkers.forEach((marker) => map.removeLayer(marker));
        hospitalityMarkers = [];

        hospitalityData.forEach((place) => {
          const marker = L.marker([place.lat, place.lng], {
            icon: redHomeIcon,
          });
          const mapsLink = `https://www.google.com/maps/search/?api=1&query=${place.lat},${place.lng}`;
          const stars =
            "".repeat(Math.round(place.rating)) +
            "".repeat(5 - Math.round(place.rating));
          const reviewsHtml = place.reviews
            ? place.reviews
                .map(
                  (review) =>
                    `<div style="font-size:0.8rem; color:#666; margin:2px 0;"> ${review}</div>`
                )
                .join("")
            : "";
          const popupHtml = `
                    <div style="padding:12px; max-width:320px;">
                        <div style="display:flex; justify-content:space-between; align-items:center; gap:12px;">
                            <div>
                                <h3 style="margin:0 0 4px 0; font-size:1.05rem; color:#111;">${
                                  place.name
                                }</h3>
                                <div style="color:#666; font-size:0.9rem;">${
                                  place.type
                                }  ${place.rating.toFixed(1)} ${stars}</div>
                                <div style="color:#666; font-size:0.85rem; margin-top:4px;">${
                                  place.address
                                }</div>
                                <div style="color:#666; font-size:0.8rem; margin-top:4px;">${
                                  place.phone
                                }</div>
                            </div>
                        </div>
                        ${
                          reviewsHtml
                            ? `<div style="margin-top:8px; padding-top:8px; border-top:1px solid #eee;">
                            <div style="font-size:0.85rem; color:#333; font-weight:600; margin-bottom:4px;">Recent Reviews:</div>
                            ${reviewsHtml}
                        </div>`
                            : ""
                        }
                        <div style="display:flex; gap:8px; margin-top:10px;">
                            <a href="${mapsLink}" target="_blank" rel="noopener" class="btn btn-primary btn-small" style="padding:0.5rem 0.8rem;">
                                <i class="fas fa-map-marker-alt"></i> Open in Google Maps
                            </a>
                        </div>
                    </div>
                `;
          marker.bindPopup(popupHtml, {
            maxWidth: 380,
            className: "custom-popup",
          });
          marker.addTo(map);
          hospitalityMarkers.push(marker);
        });
      }

      // Map filter functionality
      document.querySelectorAll(".map-filter").forEach((button) => {
        button.addEventListener("click", function () {
          // Update active state
          document
            .querySelectorAll(".map-filter")
            .forEach((btn) => btn.classList.remove("active"));
          this.classList.add("active");

          // Smooth scroll to map section
          const mapSection = document.getElementById("map");
          if (mapSection) {
            mapSection.scrollIntoView({ behavior: "smooth", block: "start" });
          }

          // Update filter and load respective markers
          const chosen = this.dataset.filter;
          if (chosen === "hospitality") {
            loadHospitality();
          } else {
            currentFilter = chosen;
            loadMonasteries();
          }
        });
      });

      // Enhanced popup actions with detailed information
      function viewMonasteryDetails(name) {
        const monastery = monasteryData.find((m) => m.name === name);
        if (monastery) {
          // Create a detailed modal or new page view
          alert(
            `Opening comprehensive profile for ${name}\n\nThis would show:\n- Complete historical timeline\n- Detailed architectural analysis\n- Photo galleries and virtual tours\n- Manuscript collections\n- Current monks and teachings\n- Visitor guidelines and facilities\n- Related research papers`
          );
          console.log("Full monastery details:", monastery);
        }
      }

      function viewPhotoGallery(name) {
        const monastery = monasteryData.find((m) => m.name === name);
        alert(
          `Opening photo gallery for ${name}\n\nCollections include:\n- Architectural details\n- Festival celebrations\n- Daily monastic life\n- Ancient artifacts and manuscripts\n- Surrounding landscapes\n- Historical photographs`
        );
        console.log(`Photo gallery for: ${name}`, monastery);
      }

      function getDirections(lat, lng) {
        const monastery = monasteryData.find(
          (m) => m.lat === lat && m.lng === lng
        );
        if (monastery) {
          // Provide detailed travel information
          const travelInfo = `
Directions to ${monastery.name}:

 Location: ${lat}, ${lng}
 Elevation: ${monastery.elevation}
 Road Access: ${
            monastery.accessible ? "Vehicle accessible" : "Requires trekking"
          }

Best Route: ${
            monastery.accessible
              ? "Drive via NH10 from Gangtok, then local roads"
              : "Drive to nearest point, then trek (guide recommended)"
          }
Travel Tips:
- Best time: ${monastery.bestTime}
- Carry: Warm clothes, water, and respect monastery rules
- Special events: ${monastery.specialEvents}

Opening Google Maps for detailed navigation...`;

          alert(travelInfo);
        }

        const googleMapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`;
        window.open(googleMapsUrl, "_blank");
      }

      // Navigation functionality
      document.querySelectorAll(".nav-item a").forEach((link) => {
        link.addEventListener("click", function (e) {
          e.preventDefault();

          // Update active state
          document
            .querySelectorAll(".nav-item a")
            .forEach((navLink) => navLink.classList.remove("active"));
          this.classList.add("active");

          // Smooth scroll to section
          const targetId = this.getAttribute("href");
          const targetSection = document.querySelector(targetId);
          if (targetSection) {
            targetSection.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          }
        });
      });

      // General smooth scrolling for all anchor links (including hero button)
      document.querySelectorAll('a[href^="#"]').forEach((link) => {
        link.addEventListener("click", function (e) {
          const targetId = this.getAttribute("href");
          if (targetId && targetId !== "#") {
            e.preventDefault();

            // Add click animation for buttons
            if (this.classList.contains("btn")) {
              this.classList.add("clicked");
              setTimeout(() => {
                this.classList.remove("clicked");
              }, 300);
            }

            const targetSection = document.querySelector(targetId);
            if (targetSection) {
              targetSection.scrollIntoView({
                behavior: "smooth",
                block: "start",
              });
            }
          }
        });
      });

      // Enhanced navbar scroll effect
      window.addEventListener("scroll", function () {
        const navbar = document.querySelector(".navbar");
        if (window.scrollY > 100) {
          navbar.classList.add("scrolled");
        } else {
          navbar.classList.remove("scrolled");
        }
      });

      // Counter animation
      function animateCounter(element, target, duration = 2500) {
        const start = performance.now();
        const startValue = 0;

        function updateCounter(currentTime) {
          const elapsed = currentTime - start;
          const progress = Math.min(elapsed / duration, 1);

          const current = Math.floor(
            startValue + (target - startValue) * easeOutQuart(progress)
          );
          element.textContent = current.toLocaleString();

          if (progress < 1) {
            requestAnimationFrame(updateCounter);
          } else {
            element.textContent = target.toLocaleString();
          }
        }

        requestAnimationFrame(updateCounter);
      }

      function easeOutQuart(t) {
        return 1 - --t * t * t * t;
      }

      // Intersection Observer for animations
      const observerOptions = {
        threshold: 0.2,
        rootMargin: "0px 0px -100px 0px",
      };

      // Enhanced interactive effects for About section
      document.addEventListener("DOMContentLoaded", function () {
        // Enhanced tech item animations
        const techItems = document.querySelectorAll(".tech-item");
        techItems.forEach((item, index) => {
          item.addEventListener("mouseenter", () => {
            item.style.transform = `translateX(10px) scale(1.02)`;
            item.style.boxShadow = "0 8px 25px rgba(210, 105, 30, 0.2)";
          });

          item.addEventListener("mouseleave", () => {
            item.style.transform = "translateX(0) scale(1)";
            item.style.boxShadow = "none";
          });
        });

        // Card hover effects with enhanced animations
        const aboutCards = document.querySelectorAll(".about-card");
        aboutCards.forEach((card) => {
          card.addEventListener("mouseenter", () => {
            card.style.transform = "translateY(-15px) scale(1.03)";
            card.style.boxShadow = "0 25px 60px rgba(0, 0, 0, 0.2)";
          });

          card.addEventListener("mouseleave", () => {
            card.style.transform = "translateY(0) scale(1)";
            card.style.boxShadow = "0 10px 30px rgba(0, 0, 0, 0.1)";
          });
        });

        // CTA button ripple effect
        const ctaButtons = document.querySelectorAll(".cta-button");
        ctaButtons.forEach((button) => {
          button.addEventListener("click", (e) => {
            const ripple = button.querySelector(".cta-ripple");
            const rect = button.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;

            ripple.style.width = ripple.style.height = size + "px";
            ripple.style.left = x + "px";
            ripple.style.top = y + "px";
            ripple.style.opacity = "1";
            ripple.style.transform = "translate(-50%, -50%) scale(0)";
            ripple.style.transition = "transform 0.6s ease, opacity 0.6s ease";

            setTimeout(() => {
              ripple.style.transform = "translate(-50%, -50%) scale(1)";
              ripple.style.opacity = "0";
            }, 10);
          });
        });

        // Floating elements animation enhancement
        const floatingElements = document.querySelectorAll(".floating-element");
        floatingElements.forEach((element, index) => {
          element.addEventListener("mouseenter", () => {
            element.style.animationPlayState = "paused";
            element.style.transform =
              "translateY(-30px) rotate(10deg) scale(1.2)";
            element.style.opacity = "0.3";
          });

          element.addEventListener("mouseleave", () => {
            element.style.animationPlayState = "running";
            element.style.transform = "";
            element.style.opacity = "0.1";
          });
        });

        // Stats item enhanced hover effects
        const statItems = document.querySelectorAll(".stat-item");
        statItems.forEach((item) => {
          item.addEventListener("mouseenter", () => {
            item.style.transform = "translateY(-8px) scale(1.08)";
            item.style.boxShadow = "0 20px 50px rgba(0, 0, 0, 0.2)";
          });

          item.addEventListener("mouseleave", () => {
            item.style.transform = "translateY(0) scale(1)";
            item.style.boxShadow = "0 8px 25px rgba(0, 0, 0, 0.1)";
          });
        });
      });

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");

            // Animate counters
            const counters = entry.target.querySelectorAll("[data-count]");
            counters.forEach((counter) => {
              const target = parseInt(counter.dataset.count);
              animateCounter(counter, target);
            });

            observer.unobserve(entry.target);
          }
        });
      }, observerOptions);

      // Hero particles animation
      function createParticles() {
        const particlesContainer = document.querySelector(".hero-particles");
        const particleCount = 50;

        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement("div");
          particle.className = "particle";

          // Random positioning
          particle.style.left = Math.random() * 100 + "%";
          particle.style.top = Math.random() * 100 + "%";
          particle.style.animationDelay = Math.random() * 6 + "s";
          particle.style.animationDuration = Math.random() * 4 + 4 + "s";

          particlesContainer.appendChild(particle);
        }
      }

      // Enhanced button interactions
      document.querySelectorAll(".btn").forEach((btn) => {
        btn.addEventListener("mouseenter", function () {
          this.style.transform = "translateY(-3px) scale(1.02)";
        });

        btn.addEventListener("mouseleave", function () {
          this.style.transform = "translateY(0) scale(1)";
        });

        btn.addEventListener("click", function (e) {
          if (this.href === "#" || this.href.includes("#")) {
            e.preventDefault();

            // Create ripple effect
            const ripple = document.createElement("span");
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;

            ripple.style.cssText = `
                        position: absolute;
                        width: ${size}px;
                        height: ${size}px;
                        left: ${x}px;
                        top: ${y}px;
                        background: rgba(255, 255, 255, 0.3);
                        border-radius: 50%;
                        transform: scale(0);
                        animation: ripple 0.6s ease-out;
                        pointer-events: none;
                    `;

            this.style.position = "relative";
            this.style.overflow = "hidden";
            this.appendChild(ripple);

            setTimeout(() => ripple.remove(), 600);

            console.log("Button clicked:", this.textContent.trim());
          }
        });
      });

      // Add ripple animation CSS
      const style = document.createElement("style");
      style.textContent = `
            @keyframes ripple {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
      document.head.appendChild(style);

      // Enhanced mobile menu toggle
      document
        .querySelector(".mobile-toggle")
        .addEventListener("click", function () {
          const navMenu = document.querySelector(".nav-menu");
          const mobileToggle = document.querySelector(".mobile-toggle");

          if (navMenu.style.display === "flex") {
            navMenu.style.display = "none";
            mobileToggle.classList.remove("active");
          } else {
            navMenu.style.display = "flex";
            mobileToggle.classList.add("active");
          }
        });

      // Section visibility tracking for navigation
      const sections = document.querySelectorAll("section[id]");
      const sectionObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const currentId = entry.target.id;
              document.querySelectorAll(".nav-item a").forEach((link) => {
                link.classList.remove("active");
                if (link.getAttribute("href") === `#${currentId}`) {
                  link.classList.add("active");
                }
              });
            }
          });
        },
        { threshold: 0.3 }
      );

      sections.forEach((section) => sectionObserver.observe(section));

      // Monastery Modal Functionality
      function showMonasteryModal(monasteryData) {
        const modal = document.getElementById("monasteryModal");
        const title = document.getElementById("modalTitle");
        const subtitle = document.getElementById("modalSubtitle");
        const description = document.getElementById("modalDescription");
        const image = document.getElementById("modalImage");
        const view3D = document.getElementById("modal3DView");
        const iframe = view3D.querySelector("iframe");
        const directionsBtn = document.getElementById("modalDirectionsBtn");

        // Update modal content
        title.textContent = monasteryData.name;
        subtitle.textContent =
          monasteryData.subtitle ||
          "Discover the rich heritage and spiritual significance";
        description.textContent = monasteryData.description;

        // Attach directions handler with the correct coordinates if available
        if (
          typeof monasteryData.lat === "number" &&
          typeof monasteryData.lng === "number"
        ) {
          directionsBtn.style.display = "inline-flex";
          directionsBtn.onclick = function (e) {
            e.preventDefault();
            const googleMapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${monasteryData.lat},${monasteryData.lng}`;
            window.open(googleMapsUrl, "_blank");
          };
        } else {
          // Fallback: try to lookup from global dataset by name
          const found = (window.monasteryData || []).find(
            (m) => m.name === monasteryData.name
          );
          if (
            found &&
            typeof found.lat === "number" &&
            typeof found.lng === "number"
          ) {
            directionsBtn.style.display = "inline-flex";
            directionsBtn.onclick = function (e) {
              e.preventDefault();
              const googleMapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${found.lat},${found.lng}`;
              window.open(googleMapsUrl, "_blank");
            };
          } else {
            directionsBtn.style.display = "none";
            directionsBtn.onclick = null;
          }
        }

        // Show 3D view for specific monasteries
        if (monasteryData.name === "Rumtek Monastery") {
          image.style.display = "none";
          view3D.style.display = "block";
          iframe.src =
            "https://www.google.com/maps/embed?pb=!4v1757272696096!6m8!1m7!1sCAoSF0NJSE0wb2dLRUlDQWdJRDJnWVdjb2dF!2m2!1d27.2885258949387!2d88.56180959787903!3f49.28546327067793!4f13.88784359585253!5f0.7721923095919727";
        } else if (monasteryData.name === "Labrang Monastery") {
          image.style.display = "none";
          view3D.style.display = "block";
          iframe.src =
            "https://www.google.com/maps/embed?pb=!4v1757275963788!6m8!1m7!1sCAoSFkNJSE0wb2dLRUlDQWdJQ0UzUFN5Snc.!2m2!1d35.19349857117135!2d102.5040644838291!3f337.07074!4f16.881029999999996!5f0.7820865974627469";
        } else if (monasteryData.name === "Enchey Monastery") {
          image.style.display = "none";
          view3D.style.display = "block";
          iframe.src =
            "https://www.google.com/maps/embed?pb=!4v1757276720783!6m8!1m7!1sCAoSF0NJSE0wb2dLRUlDQWdJREc2cWJ1andF!2m2!1d27.33580288383717!2d88.61928037024981!3f225.86494!4f15.530550000000005!5f0.7820865974627469";
        } else if (
          monasteryData.name === "Tashiding Monastery" ||
          monasteryData.name === "Tashiding Monestry"
        ) {
          image.style.display = "none";
          view3D.style.display = "block";
          iframe.src =
            "https://www.google.com/maps/embed?pb=!4v1757278210515!6m8!1m7!1sCAoSFkNJSE0wb2dLRUlDQWdJQ0V6b09UVnc.!2m2!1d27.3080960299431!2d88.29783391014004!3f260!4f10!5f0.7820865974627469";
        } else if (
          monasteryData.name === "Pemayangtse Monastery" ||
          monasteryData.name === "Pemayangtse Monestary" ||
          monasteryData.name === "Pemayaangtse Monestary" ||
          monasteryData.name === "Pemayangtse Monestry"
        ) {
          image.style.display = "none";
          view3D.style.display = "block";
          iframe.src =
            "https://www.google.com/maps/embed?pb=!4v1757361108566!6m8!1m7!1sCAoSF0NJSE0wb2dLRUlDQWdJREVoSlhucEFF!2m2!1d27.30518919282202!2d88.25156580066201!3f172.0075!4f29.68105!5f0.7820865974627469";
        } else {
          image.style.display = "block";
          view3D.style.display = "none";
          iframe.src = "";

          // Update image if provided
          if (monasteryData.image) {
            image.style.backgroundImage = `url(${monasteryData.image})`;
            image.style.backgroundSize = "cover";
            image.style.backgroundPosition = "center";
          }
        }

        // Show modal
        modal.classList.add("active");
        document.body.style.overflow = "hidden";
      }

      function hideMonasteryModal() {
        const modal = document.getElementById("monasteryModal");
        modal.classList.remove("active");
        document.body.style.overflow = "auto";
      }
      // Initialize everything when DOM is loaded
      document.addEventListener("DOMContentLoaded", function () {
        console.log("Sacred Sikkim website initialized");

        // Initialize map
        initMap();

        // Create particles
        createParticles();

        // Observe elements for fade-in animation
        const fadeElements = document.querySelectorAll(".fade-in");
        fadeElements.forEach((el) => observer.observe(el));

        // Observe stats section
        const statsSection = document.querySelector(".stats");
        if (statsSection) {
          observer.observe(statsSection);
          // Fallback: ensure style applies even if IntersectionObserver doesn't trigger
          window.addEventListener("load", () =>
            statsSection.classList.add("visible")
          );
        }

        // Monastery Modal Event Listeners
        const closeModalBtn = document.getElementById("closeModal");
        const modalOverlay = document.getElementById("monasteryModal");

        // Close modal when clicking close button
        closeModalBtn.addEventListener("click", hideMonasteryModal);

        // Close modal when clicking outside
        modalOverlay.addEventListener("click", function (e) {
          if (e.target === modalOverlay) {
            hideMonasteryModal();
          }
        });

        // Close modal with Escape key
        document.addEventListener("keydown", function (e) {
          if (e.key === "Escape" && modalOverlay.classList.contains("active")) {
            hideMonasteryModal();
          }
        });

        // Add click listeners to monastery cards
        const monasteryCards = document.querySelectorAll(".monastery-card");
        monasteryCards.forEach((card) => {
          card.style.cursor = "pointer";
          card.addEventListener("click", function () {
            const title = card.querySelector(".monastery-title").textContent;
            const description = card.querySelector(
              ".monastery-description"
            ).textContent;
            const found = (window.monasteryData || []).find(
              (m) => m.name === title
            );

            const monasteryData = {
              name: title,
              description: description,
              subtitle:
                "Explore the spiritual heritage and cultural significance",
              lat:
                found && typeof found.lat === "number" ? found.lat : undefined,
              lng:
                found && typeof found.lng === "number" ? found.lng : undefined,
            };

            showMonasteryModal(monasteryData);
          });
        });

        // Add loading states for development
        setTimeout(() => {
          document.body.classList.add("loaded");
        }, 500);

        // AI Chat functionality
        const aiToggle = document.querySelector(".ai-assistant-toggle");
        const aiChatBox = document.getElementById("aiChatBox");
        const aiChatClose = document.getElementById("aiChatClose");
        const aiChatForm = document.getElementById("aiChatForm");
        const aiChatInput = document.getElementById("aiChatInput");
        const aiChatMessages = document.getElementById("aiChatMessages");
        const aiChatLauncher = document.getElementById("aiChatLauncher");

        // Create chat box if missing
        (function ensureChatBox() {
          if (!document.getElementById("aiChatBox")) {
            const chat = document.createElement("div");
            chat.id = "aiChatBox";
            chat.className = "ai-chat-overlay";
            chat.setAttribute("aria-hidden", "true");
            chat.innerHTML = `
              <div class="ai-chat-header">
                <div class="ai-chat-title"><i class="fas fa-temple-buddhist"></i> Sacred Sikkim AI</div>
                <button id="aiChatStop" class="ai-chat-stop" aria-label="Stop conversation"><i class="fas fa-stop"></i></button>
                <button id="aiChatClose" class="ai-chat-close" aria-label="Close chat"></button>
              </div>
              <div id="aiChatMessages" class="ai-chat-messages"></div>
              <div class="ai-chat-input">
                <form id="aiChatForm" class="ai-chat-form">
                  <input id="aiChatInput" class="ai-chat-input-field" type="text" placeholder="Ask about monasteries, tours, stays..." autocomplete="off"/>
                  <button type="button" id="aiChatSendStop" class="ai-chat-send-stop" aria-label="Send or Stop"><i class="fas fa-paper-plane"></i></button>
                </form>
              </div>`;
            document.body.appendChild(chat);
          }
        })();

        // Re-bind references after potential injection
        const _aiChatBox = document.getElementById("aiChatBox");
        const _aiChatClose = document.getElementById("aiChatClose");
        const _aiChatForm = document.getElementById("aiChatForm");
        const _aiChatInput = document.getElementById("aiChatInput");
        const _aiChatMessages = document.getElementById("aiChatMessages");
        const _aiChatSendStop = document.getElementById("aiChatSendStop");
        const _aiChatStop = document.getElementById("aiChatStop");

        function openAIChat() {
          aiChatBox.classList.add("open");
          aiChatBox.setAttribute("aria-hidden", "false");
          // Hide the avatar when chat is open
          if (aiToggle) {
            aiToggle.classList.add("hidden");
          }
          setTimeout(() => aiChatInput && aiChatInput.focus(), 50);
        }

        function closeAIChat() {
          aiChatBox.classList.remove("open");
          aiChatBox.setAttribute("aria-hidden", "true");
          // Show the avatar when chat is closed
          if (aiToggle) {
            aiToggle.classList.remove("hidden");
          }
        }

        function addMessage(message, isUser = false) {
          const messageDiv = document.createElement("div");
          messageDiv.className = isUser ? "user-message" : "ai-message";
          if (isUser) {
            messageDiv.textContent = message;
          } else {
            messageDiv.innerHTML = message;
          }
          aiChatMessages.appendChild(messageDiv);
          aiChatMessages.scrollTop = aiChatMessages.scrollHeight;
        }

        function getAIResponse(userMessage) {
          const responses = {
            hello:
              "Namaste! Welcome to Sacred Sikkim. I'm your AI travel assistant. I can help you plan your spiritual journey, suggest monastery tours, recommend accommodations, and provide travel tips. What type of experience are you looking for?",

            "plan tour":
              "I'd love to help you plan your Sikkim monastery tour! Here are some popular tour options:\n\n **Spiritual Heritage Tour (5-7 days)**: Gangtok  Rumtek  Enchey  Pemayangtse  Tashiding\n\n **High Altitude Monastery Trek (7-10 days)**: Includes remote monasteries like Phensang and Sang\n\n **Royal & Cultural Tour (4-5 days)**: Labrang Monastery, Tsuklakhang Palace, traditional villages\n\nWhat's your preferred duration and interests?",

            "3 days":
              "Perfect! Here's a 3-day Sikkim monastery tour:\n\n**Day 1 - Gangtok**: Enchey Monastery, Tsuklakhang Palace, local markets\n**Day 2 - Rumtek**: Dharma Chakra Centre, monastery complex tour\n**Day 3 - Pemayangtse**: Ancient Nyingma monastery, Pelling views\n\nWould you like me to add accommodation suggestions and transportation details?",

            "5 days":
              "Excellent choice! Here's a comprehensive 5-day Sikkim monastery tour:\n\n**Day 1**: Gangtok arrival, Enchey Monastery, Tsuklakhang Palace\n**Day 2**: Rumtek Monastery (full day with meditation session)\n**Day 3**: Pemayangtse Monastery, Rabdentse ruins\n**Day 4**: Tashiding Monastery, sacred pilgrimage site\n**Day 5**: Labrang Monastery, departure\n\nShall I customize this based on your specific interests?",

            "7 days":
              "Fantastic! A 7-day tour allows deep exploration:\n\n**Days 1-2**: Gangtok monasteries (Enchey, Tsuklakhang, Rumtek)\n**Day 3**: Pemayangtse & Rabdentse heritage sites\n**Day 4**: Tashiding sacred pilgrimage\n**Day 5**: Labrang royal monastery\n**Day 6**: Phensang meditation retreat\n**Day 7**: Local village monasteries, departure\n\nWould you like trekking options or cultural experiences added?",

            accommodation:
              "Here are the best accommodation options near monasteries:\n\n **Gangtok**: Hotel Mayur, The Royal Plaza (near Enchey)\n **Rumtek**: Rumtek Monastery Guest House, local homestays\n **Pelling**: Hotel Mount Pandim (near Pemayangtse)\n **Tashiding**: Monastery guest house, eco-lodges\n\nBudget range: 800-5000 per night. Would you like specific recommendations?",

            transportation:
              "Getting around Sikkim monasteries:\n\n **Private Taxi**: 2000-3000 per day (recommended)\n **Shared Taxis**: 200-500 per person\n **Helicopter**: Gangtok to Pelling (3000-5000)\n **Trekking**: Some monasteries require hiking\n\nPermits needed: Inner Line Permit (100). Need help with arrangements?",

            "best time":
              "Best time to visit Sikkim monasteries:\n\n **Spring (Mar-May)**: Clear views, pleasant weather\n **Summer (Jun-Aug)**: Monsoon season, lush greenery\n **Autumn (Sep-Nov)**: Perfect weather, festival season\n **Winter (Dec-Feb)**: Snow-capped views, fewer crowds\n\n**Peak Season**: October-November for best monastery experiences!",

            festivals:
              "Sikkim's major monastery festivals:\n\n **Pang Lhabsol** (Aug-Sep): Guardian deity festival at Enchey\n **Losar** (Feb-Mar): Tibetan New Year celebrations\n **Saga Dawa** (May-Jun): Buddha's birth, enlightenment, death\n **Cham Dance** (Various): Sacred mask dances\n\nWould you like festival-specific tour planning?",

            budget:
              "Sikkim monastery tour budget guide:\n\n **Budget (3000-5000/day)**: Guest houses, shared transport\n **Mid-range (5000-8000/day)**: Hotels, private taxi\n **Luxury (8000+/day)**: Premium resorts, helicopter tours\n\nIncludes: Accommodation, transport, meals, permits. Need detailed breakdown?",

            monasteries:
              "Sikkim has over 250 monasteries! Here are the must-visit ones:\n\n **Rumtek**: Kagyu lineage headquarters\n **Pemayangtse**: Oldest Nyingma monastery (1705)\n **Enchey**: Festival hub with city views\n **Tashiding**: Most sacred pilgrimage site\n **Labrang**: Royal monastery with coronation throne\n\nWhich sect or region interests you most?",

            rumtek:
              "Rumtek Monastery - The Dharma Chakra Centre:\n\n **Location**: 24km from Gangtok\n **Best Time**: 6 AM - 6 PM\n **Entry**: Free (donations welcome)\n **Duration**: 2-3 hours\n **Stay**: Monastery guest house available\n\n**Highlights**: Black Crown of Karmapa, golden stupas, meditation halls. Book a guided tour?",

            pemayangtse:
              "Pemayangtse Monastery - Ancient Nyingma Heritage:\n\n **Location**: Near Pelling, West Sikkim\n **Best Time**: 7 AM - 5 PM\n **Entry**: 25 per person\n **Duration**: 1-2 hours\n **Stay**: Hotel Mount Pandim nearby\n\n**Highlights**: Zangdok Palri sculpture, ancient murals, Kanchenjunga views. Include in your tour?",

            travel:
              "Essential Sikkim travel information:\n\n **Permits**: Inner Line Permit required (100)\n **Health**: Altitude sickness prevention\n **Clothing**: Warm layers, modest dress for monasteries\n **Connectivity**: Limited in remote areas\n **Payment**: Carry cash for monasteries\n\nNeed help with permit applications or health tips?",

            history:
              "Sikkim's Buddhist heritage timeline:\n\n **8th Century**: Guru Rinpoche visits Sikkim\n **1642**: Sikkim kingdom established\n **1701**: First monastery (Dubdi) built\n **1975**: Sikkim joins India\n **Today**: 250+ active monasteries\n\nEach monastery has unique historical significance. Want to explore specific periods?",

            trekking:
              "Monastery trekking options in Sikkim:\n\n **Easy**: Enchey, Rumtek (road accessible)\n **Moderate**: Tashiding, Pemayangtse\n **Challenging**: Phensang, Sang (high altitude)\n **Expert**: Remote meditation caves\n\n**Duration**: 2-8 days. Need trekking permits and guide arrangements?",

            photography:
              "Photography guidelines for monasteries:\n\n **Allowed**: Exterior shots, general views\n **Restricted**: Inside prayer halls, during ceremonies\n **Prohibited**: Flash photography, disrespectful poses\n **Best Times**: Early morning, golden hour\n\n**Tip**: Ask permission before photographing monks. Need photography tour planning?",

            spiritual:
              "Spiritual experiences in Sikkim monasteries:\n\n **Meditation**: Rumtek, Phensang offer sessions\n **Prayer**: Join morning/evening prayers\n **Ceremonies**: Attend Cham dances and festivals\n **Blessings**: Receive blessings from resident lamas\n\n**Retreats**: 3-day meditation retreats available. Interested in spiritual programs?",

            food: "Monastery and local cuisine:\n\n **Monastery Food**: Simple vegetarian meals\n **Local Specialties**: Momos, thukpa, gundruk\n **Tea**: Traditional butter tea at monasteries\n **Restaurants**: Gangtok has diverse options\n\n**Dietary**: Most monasteries serve vegetarian food. Need restaurant recommendations?",

            safety:
              "Safety tips for monastery visits:\n\n **Altitude**: Gradual acclimatization needed\n **Dress**: Modest, warm clothing required\n **Communication**: Inform others of your plans\n **Medical**: Carry basic first aid\n **Weather**: Check conditions before travel\n\n**Emergency**: Keep local contact numbers handy. Need safety checklist?",

            default:
              "I can help you with:\n\n **Tour Planning**: Customized monastery itineraries\n **Accommodation**: Hotel and guest house bookings\n **Transportation**: Taxi and permit arrangements\n **Festivals**: Festival-specific tour planning\n **Photography**: Best spots and guidelines\n **Spiritual**: Meditation and retreat programs\n\nWhat would you like to plan for your Sikkim journey?",
          };

          const lowerMessage = userMessage.toLowerCase();
          for (const [key, response] of Object.entries(responses)) {
            if (lowerMessage.includes(key)) {
              return response;
            }
          }
          return responses.default;
        }

        aiToggle && aiToggle.addEventListener("click", openAIChat);
        aiChatLauncher &&
          aiChatLauncher.addEventListener("click", function () {
            if (aiChatBox.classList.contains("open")) {
              closeAIChat();
            } else {
              openAIChat();
            }
          });
        (_aiChatClose || aiChatClose) &&
          (_aiChatClose || aiChatClose).addEventListener("click", closeAIChat);

        // Add event listener for the header stop button
        _aiChatStop &&
          _aiChatStop.addEventListener("click", function () {
            stopStreaming();
            // Close the chat window
            closeAIChat();
          });

        // Add event listener for the send/stop toggle button
        _aiChatSendStop &&
          _aiChatSendStop.addEventListener("click", function () {
            if (isStreaming) {
              // If currently streaming, stop it
              stopStreaming();
              this.classList.remove("stop-mode");
              this.innerHTML = '<i class="fas fa-paper-plane"></i>';
              this.setAttribute("aria-label", "Send");
            } else {
              // If not streaming, send a message
              const inputEl = _aiChatInput || aiChatInput;
              const userMessage = inputEl.value.trim();
              if (userMessage) {
                addMessage(userMessage, true);
                inputEl.value = "";

                // Change button to stop mode
                this.classList.add("stop-mode");
                this.innerHTML = '<i class="fas fa-stop"></i>';
                this.setAttribute("aria-label", "Stop");

                // Send message to streaming AI
                const langSelect = document.getElementById("aiLang");
                const lang = langSelect ? langSelect.value : "auto";
                sendStreamingMessage(userMessage, lang);
              }
            }
          });

        (_aiChatForm || aiChatForm) &&
          (_aiChatForm || aiChatForm).addEventListener("submit", function (e) {
            e.preventDefault();
            // Trigger click on the send/stop button
            const sendStopBtn = document.getElementById("aiChatSendStop");
            if (sendStopBtn && !isStreaming) {
              sendStopBtn.click();
            }
          });

        // Global variables for streaming control
        let currentReader = null;
        let isStreaming = false;

        // Test server connection
        async function testServerConnection() {
          try {
            const response = await fetch("http://localhost:3000/", {
              method: "GET",
              timeout: 5000,
            });
            console.log("Server connection test:", response.status);
            return response.ok;
          } catch (error) {
            console.error("Server connection test failed:", error);
            return false;
          }
        }

        // Streaming chat functionality
        async function sendStreamingMessage(userMessage, lang) {
          try {
            // Test server connection first
            const serverOk = await testServerConnection();
            if (!serverOk) {
              // Fallback to local responses when server is unavailable
              const fallback = getAIResponse(userMessage);
              addMessage(fallback, false);
              return;
            }

            // Update send/stop button to stop mode
            const sendStopBtn = document.getElementById("aiChatSendStop");
            if (sendStopBtn) {
              sendStopBtn.classList.add("stop-mode");
              sendStopBtn.innerHTML = '<i class="fas fa-stop"></i>';
              sendStopBtn.setAttribute("aria-label", "Stop");
            }

            isStreaming = true;

            const response = await fetch("http://localhost:3000/chat", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({ message: userMessage, lang }),
            });

            if (!response.ok) {
              throw new Error("Network response was not ok");
            }

            const reader = response.body.getReader();
            currentReader = reader;
            const decoder = new TextDecoder();

            // Create AI message container
            const aiMessageDiv = document.createElement("div");
            aiMessageDiv.className = "ai-message";
            aiMessageDiv.innerHTML = "<b>AI:</b> ";
            aiChatMessages.appendChild(aiMessageDiv);
            let spokenBuffer = "";
            let responseLength = 0;
            const maxLength = 300; // Limit response length

            while (true) {
              // Check if user clicked stop
              if (!isStreaming) {
                reader.cancel();
                aiMessageDiv.innerHTML += " <em>(Response stopped)</em>";
                break;
              }

              const { done, value } = await reader.read();
              if (done) break;

              const chunk = decoder.decode(value, { stream: true });
              const lines = chunk.split("\n\n").filter(Boolean);

              for (const line of lines) {
                if (line.startsWith("data: ")) {
                  const data = line.replace("data: ", "");
                  if (data === "[DONE]") {
                    // TTS for responses when Speak is enabled
                    try {
                      const speakToggle = document.getElementById("aiSpeak");
                      const langSelect = document.getElementById("aiLang");
                      if (
                        speakToggle &&
                        speakToggle.checked &&
                        "speechSynthesis" in window &&
                        spokenBuffer.trim()
                      ) {
                        const utter = new SpeechSynthesisUtterance(
                          spokenBuffer
                        );

                        // Set language based on selection
                        if (langSelect && langSelect.value === "hi") {
                          utter.lang = "hi-IN"; // Hindi
                        } else {
                          utter.lang = "en-US"; // English
                        }

                        utter.rate = 0.8;
                        utter.pitch = 1.0;
                        utter.volume = 1.0;

                        // Prefer appropriate voice
                        const voices = window.speechSynthesis.getVoices();
                        let preferred;
                        if (langSelect && langSelect.value === "hi") {
                          // Look for Hindi voices
                          preferred = voices.find(
                            (v) =>
                              v.lang.startsWith("hi") ||
                              v.lang.includes("Hindi") ||
                              v.lang.includes("hi-IN") ||
                              v.name.includes("Hindi") ||
                              v.name.includes("India")
                          );
                        } else {
                          // Look for English voices
                          preferred = voices.find(
                            (v) =>
                              v.lang.startsWith("en") &&
                              /Female|Samantha|Victoria|Zira|Jenny|Google US English|Microsoft|Amazon/i.test(
                                v.name
                              )
                          );
                        }
                        if (preferred) utter.voice = preferred;

                        window.speechSynthesis.cancel();
                        window.speechSynthesis.speak(utter);
                      }
                    } catch (e) {
                      console.error("TTS Error:", e);
                    }
                    break;
                  }

                  // Check response length limit
                  if (responseLength >= maxLength) {
                    reader.cancel();
                    break;
                  }

                  aiMessageDiv.innerHTML += data;
                  spokenBuffer += data;
                  responseLength += data.length;
                  aiChatMessages.scrollTop = aiChatMessages.scrollHeight;
                }
              }
            }
          } catch (error) {
            console.error("Error:", error);
            console.error("Error details:", error.message);
            console.error("Error stack:", error.stack);

            let errorMessage = "Sorry, I encountered an error. ";
            if (error.message.includes("Failed to fetch")) {
              errorMessage +=
                "Please make sure the AI server is running on localhost:3000";
            } else if (error.message.includes("Network response was not ok")) {
              errorMessage += "Server returned an error. Please try again.";
            } else {
              errorMessage +=
                "Please try again or check the console for details.";
            }

            addMessage(errorMessage, false);
          } finally {
            // Reset UI state
            const stopBtn = document.getElementById("aiChatStop");
            const sendBtn = document.querySelector(".ai-chat-send");
            stopBtn.style.display = "none";
            sendBtn.disabled = false;
            isStreaming = false;
            currentReader = null;
          }
        }

        // Stop streaming function
        function stopStreaming() {
          if (currentReader) {
            currentReader.cancel();
          }
          isStreaming = false;

          // Reset send/stop button to send mode
          const sendStopBtn = document.getElementById("aiChatSendStop");
          if (sendStopBtn) {
            sendStopBtn.classList.remove("stop-mode");
            sendStopBtn.innerHTML = '<i class="fas fa-paper-plane"></i>';
            sendStopBtn.setAttribute("aria-label", "Send");
          }
        }

        // Add event listeners for stop and start buttons
        document.addEventListener("DOMContentLoaded", function () {
          const stopBtn = document.getElementById("aiChatStop");
          const startBtn = document.getElementById("aiChatStart");

          if (stopBtn) {
            stopBtn.addEventListener("click", function () {
              stopStreaming();
            });
          }

          if (startBtn) {
            startBtn.addEventListener("click", function () {
              // Hide start button, show stop button
              this.style.display = "none";
              if (stopBtn) stopBtn.style.display = "flex";

              // Disable send button during streaming
              const sendBtn = document.querySelector(".ai-chat-send");
              if (sendBtn) sendBtn.disabled = true;

              // Set streaming flag
              isStreaming = true;

              // Send a continuation message
              const langSelect = document.getElementById("aiLang");
              const lang = langSelect ? langSelect.value : "auto";
              sendStreamingMessage("Continue the response", lang);
            });
          }
        });

        // Search overlay
        const searchToggle = document.querySelector(".search-toggle");
        const searchOverlay = document.querySelector(".search-overlay");
        const searchInput = document.querySelector(".search-input");
        function openSearch() {
          searchOverlay.classList.add("open");
          searchOverlay.setAttribute("aria-hidden", "false");
          setTimeout(() => searchInput && searchInput.focus(), 50);
        }
        function closeSearch() {
          searchOverlay.classList.remove("open");
          searchOverlay.setAttribute("aria-hidden", "true");
        }
        searchToggle && searchToggle.addEventListener("click", openSearch);
        searchOverlay &&
          searchOverlay.addEventListener("click", (e) => {
            if (e.target === searchOverlay) closeSearch();
          });
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape") closeSearch();
        });

        // Mega menu open on click for mobile/tablet
        const megaParent = document.querySelector(".mega-parent");
        const megaMenu = document.querySelector(".mega-menu");
        const megaToggle = document.querySelector(".mega-toggle");
        megaToggle &&
          megaToggle.addEventListener("click", (e) => {
            if (window.innerWidth >= 769) return; // hover on desktop
            e.preventDefault();
            megaMenu && megaMenu.classList.toggle("open");
          });
        document.addEventListener("click", (e) => {
          if (megaParent && !megaParent.contains(e.target))
            megaMenu && megaMenu.classList.remove("open");
        });

        // ========== Archive hover carousels ==========
        const archiveCards = document.querySelectorAll(".archive-category");
        const modal = document.createElement("div");
        modal.className = "archive-modal";
        modal.innerHTML = `
                <div class="archive-modal-content">
                    <button class="archive-modal-close" aria-label="Close"></button>
                    <img alt="Archive preview" />
                </div>
            `;
        document.body.appendChild(modal);
        const modalImg = modal.querySelector("img");
        const modalClose = modal.querySelector(".archive-modal-close");
        const closeModal = () => modal.classList.remove("open");
        modal.addEventListener("click", (e) => {
          if (e.target === modal) closeModal();
        });
        modalClose.addEventListener("click", closeModal);
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape") closeModal();
        });

        archiveCards.forEach((card) => {
          const carousel = card.querySelector(".archive-carousel");
          const imagesJson = card.getAttribute("data-images") || "[]";
          let images = [];
          try {
            images = JSON.parse(imagesJson);
          } catch {}
          let idx = 0;
          let timerId = null;
          let isActive = false;

          const showImage = (index) => {
            if (!carousel || !isActive) return;
            carousel.innerHTML = "";
            if (!images.length) return;
            const img = document.createElement("img");
            img.src = images[index];
            img.alt = "Archive item";
            console.log("Loading image:", images[index]);
            img.addEventListener("error", () => {
              // Fallback for missing images
              img.style.display = "none";
              const fallback = document.createElement("div");
              fallback.style.cssText = `
                            display: flex; 
                            align-items: center; 
                            justify-content: center; 
                            height: 200px; 
                            background: #f0f0f0; 
                            color: #666; 
                            font-size: 14px;
                            border-radius: 12px;
                        `;
              fallback.textContent = "Image not found";
              carousel.appendChild(fallback);
            });
            img.addEventListener("click", (e) => {
              e.stopPropagation();
              modalImg.src = img.src;
              modal.classList.add("open");
            });
            carousel.appendChild(img);
          };

          const start = () => {
            if (!images.length) {
              console.log("No images found for carousel");
              return;
            }
            if (isActive) return; // Prevent multiple starts

            isActive = true;
            console.log("Starting carousel with images:", images);
            card.classList.add("show-carousel");
            showImage(idx);

            timerId = setInterval(() => {
              if (!isActive) {
                clearInterval(timerId);
                return;
              }
              idx = (idx + 1) % images.length;
              showImage(idx);
            }, 2000);
          };

          const stop = () => {
            isActive = false;
            card.classList.remove("show-carousel");
            if (timerId) {
              clearInterval(timerId);
              timerId = null;
            }
            if (carousel) carousel.innerHTML = "";
            idx = 0; // Reset index
          };

          card.addEventListener("mouseenter", start);
          card.addEventListener("mouseleave", stop);
          card.addEventListener("focusin", start);
          card.addEventListener("focusout", stop);
        });

        // Scroll progress bar
        const progress = document.querySelector(".scroll-progress");
        function updateProgress() {
          const scrollTop = window.scrollY;
          const docHeight =
            document.documentElement.scrollHeight - window.innerHeight;
          const percent = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
          progress.style.width = percent + "%";
        }
        window.addEventListener("scroll", updateProgress);
        window.addEventListener("resize", updateProgress);
        updateProgress();
      });

      // Add some CSS for the loaded state
      document.head.insertAdjacentHTML(
        "beforeend",
        `
            <style>
                body:not(.loaded) .fade-in {
                    opacity: 0;
                    transform: translateY(30px);
                }
                body.loaded .fade-in {
                    transition: opacity 0.8s ease, transform 0.8s ease;
                }
                body.loaded {
                    background-color: #0f172a; /* slate-900 like dark, blends with interface */
                    color: #e5e7eb; /* light text for contrast */
                }
            </style>
        `
      );

      // Load voices for TTS
      if ("speechSynthesis" in window) {
        const loadVoices = () => {
          const voices = window.speechSynthesis.getVoices();
          console.log(
            "Available voices:",
            voices.map((v) => `${v.name} (${v.lang})`)
          );

          // Check for Hindi voices
          const hindiVoices = voices.filter(
            (v) =>
              v.lang.startsWith("hi") ||
              v.lang.includes("Hindi") ||
              v.lang.includes("hi-IN") ||
              v.name.includes("Hindi") ||
              v.name.includes("India")
          );
          console.log(
            "Hindi voices available:",
            hindiVoices.map((v) => `${v.name} (${v.lang})`)
          );
        };

        // Load voices on change
        window.speechSynthesis.onvoiceschanged = loadVoices;

        // Load voices immediately
        loadVoices();
      }

      // Festival Calendar functionality
      const festivalCalendarOverlay = document.getElementById(
        "festivalCalendarOverlay"
      );
      const festivalCalendarToggle = document.querySelector(
        ".festival-calendar-toggle"
      );
      const festivalCalendarClose = document.getElementById(
        "festivalCalendarClose"
      );
      const festivalCalendarContent = document.getElementById(
        "festivalCalendarContent"
      );
      // Festival data from the calendar
      const festivals = {
        0: [
          {
            date: 14,
            name: "Maghe Sankranti",
            description:
              "Sacred harvest festival where devotees take holy dips in rivers at dawn. Mountain villages come alive with fairs and traditional sweets. The sun's journey north begins, bringing warmer days to the Himalayas. ",
            type: "Hindu",
            emoji: "",
            location: "Rivers & Villages",
          },
        ],
        1: [
          {
            date: 15,
            name: "Losar (Tibetan New Year)",
            description:
              "The air fills with juniper incense as monasteries echo with prayers. Families prepare traditional khapse cookies and butter tea. Prayer flags flutter fresh in mountain winds, carrying hopes for the new year. ",
            type: "Buddhist",
            emoji: "",
            location: "Monasteries & Homes",
          },
        ],
        2: [],
        3: [
          {
            date: 20,
            name: "Saga Dawa",
            description:
              "Most sacred Buddhist month celebrating Buddha's birth, enlightenment, and parinirvana. Pilgrims circumambulate stupas while monks perform ancient rituals. Merit accumulated this month is multiplied. ",
            type: "Buddhist",
            emoji: "",
            location: "Stupas & Monasteries",
          },
        ],
        4: [
          {
            date: 15,
            name: "International Flower Festival",
            description:
              "Gangtok transforms into a garden paradise! Rare orchids, vibrant rhododendrons, and alpine blooms create a natural carpet. The mountain air becomes perfumed with floral fragrances. ",
            type: "Cultural",
            emoji: "",
            location: "Gangtok Parks",
          },
        ],
        5: [],
        6: [
          {
            date: 13,
            name: "Bhanu Jayanti",
            description:
              "Celebrating Nepal's beloved poet Bhanubhakta Acharya. Villages resonate with recitations of traditional poems. Cultural programs honor the 'Adikavi' who gave Nepali literature its voice. ",
            type: "Literary",
            emoji: "",
            location: "Schools & Communities",
          },
          {
            date: 25,
            name: "Drukpa Tshechi",
            description:
              "Mystical masked dances at ancient Druk monasteries. Colorful cham dancers whirl in courtyards while trumpets echo through valleys. Commemorates Buddha's first sermon at Sarnath. ",
            type: "Buddhist",
            emoji: "",
            location: "Druk Monasteries",
          },
        ],
        7: [
          {
            date: 10,
            name: "Tendong Lho Rum Faat",
            description:
              "Ancient Lepcha thanksgiving to sacred Mount Tendong. Shamans perform mystical rituals while communities honor the mountain spirit that saved ancestors from the great deluge. ",
            type: "Lepcha",
            emoji: "",
            location: "Mount Tendong",
          },
          {
            date: 28,
            name: "Pang Lhabsol",
            description:
              "Unique to Sikkim! Venerating mighty Kanchenjunga as protector deity. Warrior dances and masked performances reenact legendary battles. The guardian spirit of Sikkim is celebrated. ",
            type: "Guardian",
            emoji: "",
            location: "Palace & Monasteries",
          },
        ],
        8: [
          {
            date: 5,
            name: "Indra Jatra",
            description:
              "Invoking Indra, the rain god, for bountiful harvests. Colorful street processions wind through settlements. Traditional dances honor the king of gods who brings life-giving monsoons. ",
            type: "Hindu",
            emoji: "",
            location: "Streets & Squares",
          },
          {
            date: 25,
            name: "Durga Puja",
            description:
              "Nine sacred nights honoring divine feminine power. Temporary bamboo pandals house magnificent clay goddesses. Dhak drums thunder through valleys as communities celebrate victory over evil. ",
            type: "Hindu",
            emoji: "",
            location: "Community Pandals",
          },
        ],
        9: [
          {
            date: 18,
            name: "Tihar (Deepawali)",
            description:
              "Five magical days honoring animals, deities, and family bonds. Oil lamps twinkle like stars in windows. Deusi-Bhailo carolers spread joy through mountain villages singing ancient melodies. ",
            type: "Hindu",
            emoji: "",
            location: "Homes & Villages",
          },
        ],
        10: [
          {
            date: 15,
            name: "Limbu Heritage Day",
            description:
              "Celebrating Teyongsi Sirijunga's gift of written script to Limbu people. Traditional Chyabrung drums beat ancient rhythms as elders share oral histories with eager youth. ",
            type: "Limbu",
            emoji: "",
            location: "Cultural Centers",
          },
        ],
        11: [
          {
            date: 5,
            name: "Sakewa",
            description:
              "Ancient Kirat earth-worship with sacred Bhumi Puja. Shamans connect with Mother Earth's spirit through mystical rituals. Communities perform traditional Sakela dances under starlit skies. ",
            type: "Kirat",
            emoji: "",
            location: "Sacred Grounds",
          },
          {
            date: 15,
            name: "Kagyed Chaam",
            description:
              "Spectacular year-end masked dance festival! Monks in elaborate costumes perform vigorous cham dances. Evil spirits are banished before the new year through powerful rituals. ",
            type: "Buddhist",
            emoji: "",
            location: "Major Monasteries",
          },
          {
            date: 20,
            name: "Losoong",
            description:
              "Bhutia-Lepcha New Year with mystical Black Hat dances. Traditional archery contests test skill while families toast with chang (millet beer). Harvest season concludes with gratitude. ",
            type: "New Year",
            emoji: "",
            location: "Communities",
          },
          {
            date: 30,
            name: "Tamu Lochar",
            description:
              "Gurung New Year celebration with graceful Ghatu dances. Families feast on traditional delicacies while elders offer blessings. The lunar calendar turns with mountain customs. ",
            type: "Gurung",
            emoji: "",
            location: "Gurung Villages",
          },
        ],
      };

      let currentMonth = new Date().getMonth();
      const monthNames = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
      ];
      const dayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

      function loadFestivalCalendar() {
        const calendarHTML = `
                <div style="padding: 20px; font-family: 'Kalam', cursive;">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <h1 style="font-family: 'Dancing Script', cursive; font-size: 3rem; color: #8b4513; margin-bottom: 10px;">Festiva Calendar</h1>
                        <p style="font-size: 1.2rem; color: #8b4513; font-style: italic;">Sacred Festivals of the Himalayan Kingdom </p>
                    </div>
                    
                    <div style="display: flex; justify-content: center; align-items: center; margin-bottom: 30px; gap: 30px;">
                        <button id="prevMonth" style="background: linear-gradient(145deg, #ffffff, #f0f0f0); color: #8b4513; border: 3px solid #d2691e; padding: 12px 25px; border-radius: 25px; cursor: pointer; font-size: 1.1rem; font-weight: 600; transition: all 0.3s ease;"> Previous</button>
                        <div id="currentMonth" style="font-family: 'Dancing Script', cursive; font-size: 2.5rem; font-weight: 700; background: white; padding: 15px 35px; border-radius: 30px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); border: 3px solid #d2691e; color: #8b4513;">${monthNames[currentMonth]}</div>
                        <button id="nextMonth" style="background: linear-gradient(145deg, #ffffff, #f0f0f0); color: #8b4513; border: 3px solid #d2691e; padding: 12px 25px; border-radius: 25px; cursor: pointer; font-size: 1.1rem; font-weight: 600; transition: all 0.3s ease;">Next </button>
                    </div>
                    
                    <div style="display: flex; gap: 30px; align-items: flex-start; justify-content: center; flex-wrap: wrap;">
                        <div id="mainCalendar" style="background: white; border-radius: 20px; padding: 25px; box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15); border: 4px solid #d2691e; max-width: 500px;">
                            <div id="calendar" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px;"></div>
                        </div>
                        <div id="festivalPolaroids" style="position: relative; width: 100%; max-width: 600px; min-height: 400px;"></div>
                    </div>
                </div>
            `;

        festivalCalendarContent.innerHTML = calendarHTML;
        generateCalendar(currentMonth);
        displayFestivalPolaroids(currentMonth);

        // Add event listeners
        document.getElementById("prevMonth").addEventListener("click", () => {
          currentMonth = (currentMonth - 1 + 12) % 12;
          updateCalendar();
        });

        document.getElementById("nextMonth").addEventListener("click", () => {
          currentMonth = (currentMonth + 1) % 12;
          updateCalendar();
        });
      }

      function generateCalendar(month) {
        const calendar = document.getElementById("calendar");
        if (!calendar) return;

        calendar.innerHTML = "";

        dayNames.forEach((day) => {
          const dayHeader = document.createElement("div");
          dayHeader.style.cssText =
            "text-align: center; padding: 12px 5px; font-weight: 700; color: #8b4513; font-size: 0.9rem; background: linear-gradient(145deg, #fdf2e9, #fed7aa); border-radius: 8px; border: 2px solid #fdba74;";
          dayHeader.textContent = day;
          calendar.appendChild(dayHeader);
        });

        const daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        const monthFestivals = festivals[month] || [];

        for (let day = 1; day <= daysInMonth[month]; day++) {
          const dayCell = document.createElement("div");
          dayCell.style.cssText =
            "aspect-ratio: 1; display: flex; align-items: center; justify-content: center; border-radius: 12px; cursor: pointer; background: #fafafa; color: #333; font-weight: 600; border: 2px solid #e5e7eb; transition: all 0.3s ease;";
          dayCell.textContent = day;

          const hasFestival = monthFestivals.some(
            (festival) => festival.date === day
          );
          if (hasFestival) {
            dayCell.style.cssText +=
              "background: linear-gradient(145deg, #fef3c7, #fcd34d); color: #92400e; font-weight: 700; border: 3px solid #f59e0b; position: relative;";
            dayCell.innerHTML = `${day} <span style="position: absolute; top: -8px; right: -8px; font-size: 14px; background: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; border: 2px solid #f59e0b;"></span>`;
          }

          calendar.appendChild(dayCell);
        }
      }

      function displayFestivalPolaroids(month) {
        const container = document.getElementById("festivalPolaroids");
        if (!container) return;

        const monthFestivals = festivals[month] || [];
        container.innerHTML = "";

        if (monthFestivals.length === 0) {
          container.innerHTML =
            '<div style="text-align: center; color: #8b4513; font-style: italic; padding: 40px; font-size: 1.2rem;">No festivals this month - enjoy the peaceful mountain serenity! </div>';
          return;
        }

        monthFestivals.forEach((festival, index) => {
          const polaroid = document.createElement("div");
          polaroid.style.cssText = `position: absolute; width: 200px; background: white; border-radius: 8px; padding: 15px 15px 40px 15px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2); transition: all 0.4s ease; cursor: pointer; border: 1px solid #e5e7eb; transform: rotate(${
            index % 2 === 0 ? "-" : ""
          }${(index + 1) * 5}deg);`;

          const positions = [
            { top: "20px", left: "50px" },
            { top: "10px", right: "80px" },
            { top: "200px", left: "20px" },
            { top: "180px", right: "40px" },
            { top: "350px", left: "100px" },
            { top: "320px", right: "100px" },
          ];

          const pos = positions[index % positions.length];
          Object.assign(polaroid.style, pos);

          polaroid.innerHTML = `
                    <div style="width: 100%; height: 120px; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 3rem; position: relative; overflow: hidden; margin-bottom: 12px; background: linear-gradient(135deg, #fbbf24, #f59e0b, #d97706);">
                        <div style="position: absolute; top: 10px; right: 10px; background: rgba(255, 255, 255, 0.9); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: bold; color: #8b4513;">${festival.date}</div>
                        <span style="font-size: 3rem; filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));">${festival.emoji}</span>
                    </div>
                    <div style="font-family: 'Caveat', cursive; font-size: 1.1rem; font-weight: 600; color: #8b4513; text-align: center; line-height: 1.2; margin-bottom: 5px;">${festival.name}</div>
                    <div style="font-size: 0.8rem; color: #666; text-align: center; font-style: italic;">${festival.location}</div>
                `;

          polaroid.addEventListener("click", () => showFestivalInfo(festival));
          container.appendChild(polaroid);
        });
      }

      function showFestivalInfo(festival) {
        const infoHTML = `
                <div style="position: fixed; bottom: 30px; left: 30px; right: 30px; max-width: 400px; margin: 0 auto; background: white; border-radius: 20px; padding: 25px; box-shadow: 0 12px 35px rgba(0, 0, 0, 0.2); border: 4px solid #f59e0b; z-index: 3000;">
                    <button onclick="this.parentElement.remove()" style="position: absolute; top: 15px; right: 15px; background: #f59e0b; color: white; border: 2px solid #d97706; border-radius: 50%; width: 30px; height: 30px; font-size: 1.2rem; cursor: pointer; display: flex; align-items: center; justify-content: center; font-weight: bold;"></button>
                    <h3 style="font-family: 'Dancing Script', cursive; font-size: 1.8rem; color: #8b4513; margin-bottom: 10px;">${festival.emoji} ${festival.name}</h3>
                    <p style="color: #333; line-height: 1.5; margin-bottom: 10px;">${festival.description}</p>
                    <span style="display: inline-block; background: linear-gradient(145deg, #fef3c7, #fcd34d); color: #92400e; padding: 6px 12px; border-radius: 15px; font-size: 0.8rem; font-weight: 600; border: 2px solid #f59e0b;">${festival.type} Festival</span>
                </div>
            `;

        document.body.insertAdjacentHTML("beforeend", infoHTML);
      }

      function updateCalendar() {
        const currentMonthElement = document.getElementById("currentMonth");
        if (currentMonthElement) {
          currentMonthElement.textContent = monthNames[currentMonth];
        }
        generateCalendar(currentMonth);
        displayFestivalPolaroids(currentMonth);
      }

      // Event listeners
      festivalCalendarToggle.addEventListener("click", () => {
        festivalCalendarOverlay.classList.add("open");
        loadFestivalCalendar();
      });

      festivalCalendarClose.addEventListener("click", () => {
        festivalCalendarOverlay.classList.remove("open");
      });

      festivalCalendarOverlay.addEventListener("click", (e) => {
        if (e.target === festivalCalendarOverlay) {
          festivalCalendarOverlay.classList.remove("open");
        }
      });
    </script>
    <style>
      .hidden {
        display: none;
      }

      #more-monasteries {
        transition: all 0.3s ease-in-out;
      }

      .hidden-monastery-cards {
        display: none;
      }

      .hidden-monastery-cards.visible {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 2rem;
        margin-top: 2rem;
      }
    </style>

    <style>
      /* Overrides per request: white body when loaded, white stats overlay */
      body.loaded {
        background-color: #ffffff !important;
        background-image: none !important;
      }

      section.states.visible::after,
      section.stats.visible::after {
        background: #ffffff !important;
        opacity: 1 !important;
      }
      /* Stats section container pseudo-element color override */
      .stats-section .container::after,
      section.stats .container::after {
        background: #ffffff !important;
      }
      /* Ensure stats section itself is white with no image */
      .stats-section,
      section.stats {
        background-color: #ffffff !important;
        background-image: none !important;
      }
      /* Make all major sections have white base background */
      section,
      .section {
        background-color: #ffffff;
      }
      /* Chatbox polish: entrance, glow, message slide-in, streaming shimmer */
      @keyframes chatbox-pop {
        0% {
          transform: translateY(20px) scale(0.9);
          opacity: 0;
        }
        100% {
          transform: translateY(0) scale(1);
          opacity: 1;
        }
      }

      @keyframes chatbox-glow {
        0% {
          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        50% {
          box-shadow: 0 24px 48px rgba(0, 0, 0, 0.22);
        }
        100% {
          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
      }

      @keyframes message-in-left {
        0% {
          opacity: 0;
          transform: translateX(-10px) translateY(6px);
        }
        100% {
          opacity: 1;
          transform: translateX(0) translateY(0);
        }
      }

      @keyframes message-in-right {
        0% {
          opacity: 0;
          transform: translateX(10px) translateY(6px);
        }
        100% {
          opacity: 1;
          transform: translateX(0) translateY(0);
        }
      }

      /* When chat opens, add a subtle pop and periodic glow */
      .ai-chat-overlay.open {
        animation: chatbox-pop 300ms ease-out 1,
          chatbox-glow 3s ease-in-out 1.2s 2;
      }

      /* Message appearance animations */
      .ai-chat-messages .ai-message {
        animation: message-in-left 280ms ease-out both;
        will-change: transform, opacity;
      }

      .ai-chat-messages .ai-message.user-message {
        animation-name: message-in-right;
      }

      /* Streaming shimmer for live AI response */
      .ai-chat-messages .ai-message.streaming {
        position: relative;
        background-image: linear-gradient(
          90deg,
          rgba(248, 249, 250, 1) 0%,
          rgba(245, 245, 245, 1) 50%,
          rgba(248, 249, 250, 1) 100%
        );
        background-size: 200% 100%;
        animation: message-in-left 280ms ease-out both,
          shimmer 1.2s linear infinite;
      }

      @keyframes shimmer {
        0% {
          background-position: 200% 0;
        }
        100% {
          background-position: -200% 0;
        }
      }

      /* Typing dots style if needed on .ai-message.streaming::after */
      .ai-chat-messages .ai-message.streaming::after {
        content: "\2026"; /* ellipsis */
        margin-left: 6px;
        opacity: 0.6;
        animation: dots 1.1s steps(4, end) infinite;
      }

      @keyframes dots {
        0%,
        20% {
          color: transparent;
          text-shadow: 0.35em 0 0 transparent, 0.7em 0 0 transparent;
        }
        40% {
          color: currentColor;
          text-shadow: 0.35em 0 0 transparent, 0.7em 0 0 transparent;
        }
        60% {
          color: currentColor;
          text-shadow: 0.35em 0 0 currentColor, 0.7em 0 0 transparent;
        }
        80%,
        100% {
          color: currentColor;
          text-shadow: 0.35em 0 0 currentColor, 0.7em 0 0 currentColor;
        }
      }

      /* Subtle hover accent on messages */
      .ai-chat-messages .ai-message:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        transition: transform 150ms ease, box-shadow 150ms ease;
      }

      /* Respect reduced motion */
      @media (prefers-reduced-motion: reduce) {
        .ai-chat-overlay.open,
        .ai-chat-messages .ai-message,
        .ai-chat-messages .ai-message.streaming {
          animation: none !important;
          transition: none !important;
        }
      }

      /* Glass effect for AI and user messages */
      .ai-chat-messages .ai-message {
        background-color: rgba(255, 255, 255, 0.55);
        backdrop-filter: blur(10px) saturate(120%);
        -webkit-backdrop-filter: blur(10px) saturate(120%);
        border: 1px solid rgba(255, 255, 255, 0.4);
        background-clip: padding-box;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
      }

      /* Digital Archive enhancements */
      .section.archive {
        background: linear-gradient(
            rgba(255, 255, 255, 0.85),
            rgba(255, 255, 255, 0.9)
          ),
          url("../doodleart1.jpg") center/cover no-repeat;
        background-clip: border-box;
      }

      @keyframes float-slow {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-6px);
        }
      }

      .archive-category {
        transition: transform 300ms ease, box-shadow 300ms ease;
        will-change: transform;
      }

      .archive-category:hover {
        transform: translateY(-6px);
        box-shadow: 0 16px 40px rgba(0, 0, 0, 0.12);
      }

      .archive-image {
        overflow: hidden;
        border-radius: 14px;
        animation: float-slow 7s ease-in-out infinite;
      }

      .archive-image img {
        display: block;
        transform: scale(1.02);
        transition: transform 500ms ease;
      }

      .archive-category:hover .archive-image img {
        transform: scale(1.08);
      }

      /* Reduced motion respect */
      @media (prefers-reduced-motion: reduce) {
        .archive-image {
          animation: none !important;
        }
        .archive-category,
        .archive-image img {
          transition: none !important;
        }
      }
    </style>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const chatOverlay = document.querySelector(".ai-chat-overlay");
        const chatToggle = document.querySelector(".ai-assistant-toggle");
        const chatClose = document.querySelector(".ai-chat-close");
        const form = document.querySelector(".ai-chat-form");
        const input = document.querySelector(".ai-chat-input-field");
        const messages = document.querySelector(".ai-chat-messages");

        // Monastery cards toggle functionality
        const viewMoreBtn = document.getElementById("view-more-monasteries");
        const hiddenMonasteryCards =
          document.getElementById("more-monasteries");

        if (viewMoreBtn && hiddenMonasteryCards) {
          viewMoreBtn.addEventListener("click", function (e) {
            e.preventDefault(); // Prevent default link behavior
            hiddenMonasteryCards.classList.toggle("hidden");

            if (hiddenMonasteryCards.classList.contains("hidden")) {
              viewMoreBtn.innerHTML =
                '<i class="fas fa-plus"></i> View More Monasteries';
            } else {
              viewMoreBtn.innerHTML =
                '<i class="fas fa-minus"></i> Hide Additional Monasteries';
            }
          });
        }

        function appendMessage(text, isUser = false) {
          const div = document.createElement("div");
          div.className = "ai-message" + (isUser ? " user-message" : "");
          div.textContent = text;
          messages.appendChild(div);
          messages.scrollTop = messages.scrollHeight;
        }

        chatToggle?.addEventListener("click", () =>
          chatOverlay.classList.add("open")
        );
        chatClose?.addEventListener("click", () =>
          chatOverlay.classList.remove("open")
        );

        form?.addEventListener("submit", async (e) => {
          e.preventDefault();
          const text = input.value.trim();
          if (!text) return;

          appendMessage(text, true); // user message
          input.value = "";

          // Streaming with EventSource
          const eventSource = new EventSource(
            `http://localhost:3000/chat-stream?message=${encodeURIComponent(text)}`
          );
          let botMsg = "";

          eventSource.onmessage = (event) => {
            if (event.data === "[DONE]") {
              eventSource.close();
              return;
            }
            botMsg += event.data;

            // Update or create bot message
            let botDiv = document.querySelector(".ai-message.streaming");
            if (!botDiv) {
              botDiv = document.createElement("div");
              botDiv.className = "ai-message streaming";
              messages.appendChild(botDiv);
            }
            botDiv.textContent = botMsg;
            messages.scrollTop = messages.scrollHeight;
          };
        });
      });
    </script>
    <script src="js/chatbot.js"></script>
  </body>
</html>
